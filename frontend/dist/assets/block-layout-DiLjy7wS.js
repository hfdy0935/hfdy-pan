/* empty css              *//* empty css              *//* empty css              */import{u as z,a as $}from"./menuData-BfYzelEX.js";import{s as c,a as I,j as B}from"./index-CdIjDISF.js";import{u as U}from"./useFolderLevelTree-BY3VF7JM.js";import{_ as V,a as L,b as j}from"./blank.vue_vue_type_script_setup_true_lang-I__VKkcy.js";import{a as D,c as P}from"./file-CTjv8ooS.js";import{u as A}from"./index.vue_vue_type_script_setup_true_lang-MDeg8KDO.js";import{d as E,ag as G,ai as M,aG as t,o as u,an as v,ao as g,ap as p,a as _,be as N,bg as R,n as q,e as H,aE as O,b1 as T,bl as J,bG as K}from"./arco-design-vue-wpZPvk8Z.js";import"./calc-CYjR0slx.js";import"./useBreadcrumb-DDMjDaLE.js";import"./arco-design-vue-icon-S64ufJhU.js";import"./index-DeLZq7_u.js";import"./index-DvwZTHc2.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./share-BzanW0kV.js";/* empty css              */import"./useEditFileName-BxV89-wi.js";const Q=["onContextmenu","onDblclick"],W={class:"flex justify-end mr-3 mb-3"},ye=E({__name:"block-layout",setup(X){const{currParentFolder:x}=c(z()),{itemList:n,query:r,contextmenuItem:m,selectedIds:s,isContextmenuShow:b}=c($()),{userInfo:h}=c(I()),{openPreviewModal:k}=A(),{isDark:f}=c(U()),S=o=>{var e;return b.value&&s.value.includes(o)&&s.value.includes(((e=m.value)==null?void 0:e.id)??"")};B();const w=async o=>{if(D(o)){if(P(x.value)===h.value.maxFolderLevel){O.warning("已达到最大深度，不支持打开");return}r.value={...r.value,page:1,pid:o.id}}else k(o)},d=G(n.value.records.reduce((o,e)=>({...o,[e.id]:s.value.some(i=>i==e.id)}),{})),y=o=>{const e=s.value.findIndex(i=>i===o.id);e===-1?s.value.push(o.id):s.value.splice(e,1)};return M(s,o=>{for(const e of n.value.records)d.value[e.id]=o.includes(e.id)}),(o,e)=>{const i=T,C=J,F=K;return t(n).records.length?(u(),v(L,{key:0},{default:g(()=>[p(C,{wrap:""},{default:g(()=>[(u(!0),_(N,null,R(t(n).records,a=>(u(),_("div",{key:a.id,onContextmenu:l=>m.value=a,onDblclick:l=>w(a),class:q(["w-28 h-28 flex flex-col justify-around items-center group truncate cursor-pointer rounded transition-all",`${S(a.id)?t(f)?"bg-[#333]":"bg-[#eee]":""} ${t(f)?"hover:bg-[#333]":"hover:bg-[#eee]"}`])},[p(V,{item:a,"icon-style":{transform:"scale(1.6)"},"name-style":{fontSize:"12px",textAlign:"center"},"input-width":100},null,8,["item"]),p(i,{class:"-mt-3","model-value":t(d)[a.id],"onUpdate:modelValue":l=>t(d)[a.id]=l,onChange:l=>y(a)},null,8,["model-value","onUpdate:modelValue","onChange"])],42,Q))),128))]),_:1}),H("div",W,[p(F,{total:t(n).total,current:t(r).page,"onUpdate:current":e[0]||(e[0]=a=>t(r).page=a),"page-size":t(r).pageSize,"onUpdate:pageSize":e[1]||(e[1]=a=>t(r).pageSize=a),"show-page-size":""},null,8,["total","current","page-size"])])]),_:1})):(u(),v(j,{key:1}))}}});export{ye as default};
