/* empty css              *//* empty css              *//* empty css              *//* empty css              */import{E as ee,a as y}from"./index-DeLZq7_u.js";import{u as W,s as Y,a as X,I as B,b as L,c as T,F as z,d as D,e as O,r as le,M as U,f as ae,g as te,h as H,i as oe,B as N,S as se,j as de,k as re,l as ne,C as ie,m as ue,L as me,n as pe,R as ce,_ as fe}from"./index-fDEUsWmJ.js";import{g as j}from"./validate-BSUe8xyQ.js";import{d as P,aa as q,ab as _e,r as h,q as A,b as R,i as I,j as l,k as a,$ as e,e as C,g as x,y as ve,a as ge,ac as J,B as b,C as S,z as $,w as we,Y as M}from"./vue-office_docx-BTzFQIdC.js";const F="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1729424626321'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='4254'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='200'%20height='200'%3e%3cpath%20d='M943.1%20172c-2.4-0.2-245.1-25.3-413.8-147.8-5.1-3.7-11-5.6-17.3-5.6-6.2%200-12.2%201.9-17.3%205.6C326.9%20146%2083.3%20171.8%2080.9%20172c-15.2%201.4-26.6%2014.1-26.6%2029.3%200%206.7%200.6%20165.8%2054.8%20344.4%2032.1%20105.8%2076.4%20196.4%20131.9%20269.2%2070.3%2092.3%20158.5%20156%20262%20189.2%202.9%200.9%205.9%201.4%209%201.4s6.1-0.5%208.9-1.4c103.6-33.2%20191.7-96.8%20262-189.2%2055.4-72.7%2099.8-163.2%20131.9-269.2%2054.1-178.6%2054.8-337.7%2054.8-344.4C969.7%20186.1%20958.3%20173.5%20943.1%20172zM910.1%20227.2l-0.1%201.6c-2.9%2058.1-13.4%20174.4-51.4%20299.9-66.7%20220.1-183.1%20360.1-346%20416.1L512%20945l-0.6-0.2C349%20888.9%20232.7%20749.4%20165.8%20530.1c-39.8-130.5-49.4-254.2-51.8-301.4l-0.1-1.6%201.5-0.2c70.6-10.3%20250.5-44.8%20395.5-142.4l0.9-0.7%201%200.7C658%20182.1%20837.9%20216.6%20908.5%20227L910.1%20227.2z'%20p-id='4255'%3e%3c/path%3e%3cpath%20d='M641.8%20351%20467%20580.3l-89-76.1c-5.3-4.5-12.1-7-19.1-7-8.6%200-16.8%203.7-22.4%2010.3-10.5%2012.3-9.1%2031%203.3%2041.5l112.7%2096.4c5.2%204.4%2012.4%207%2019.6%207%200.9%200%201.8%200%202.7-0.1%208-0.8%2015.4-5%2020.3-11.4l193.7-254c4.8-6.3%206.8-14%205.7-21.8-1-7.8-5.1-14.7-11.3-19.5C670.1%20335.6%20651.6%20338.1%20641.8%20351z'%20p-id='4256'%3e%3c/path%3e%3c/svg%3e",be=["src"],Ve=P({__name:"Login",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(E){const d=W(),p=q(E,"modelValue"),{userInfo:u}=Y(X()),o=_e("form"),c=h({}),r=A(()=>j(c.value.password)),t=async()=>{var f;let v=!0;if(await((f=o.value)==null?void 0:f.validate(i=>{i&&(v=!1)})),!!v){p.value=!0;try{const i=await le(c.value);i.code===200?(u.value=i.data,U.success("登录成功"),await d.push("/file/all")):U.error(i.message)}finally{p.value=!1}}};return(v,f)=>{const i=T,g=z,m=D,w=O;return R(),I(w,{model:e(c),class:"p-4",rules:e(r),ref:"form"},{default:l(()=>[a(g,{field:"email","hide-label":"","validate-trigger":"blur"},{default:l(()=>[a(i,{modelValue:e(c).email,"onUpdate:modelValue":f[0]||(f[0]=s=>e(c).email=s),modelModifiers:{trim:!0},placeholder:"请输入邮箱","allow-clear":"",size:"large"},{prepend:l(()=>[a(e(B))]),_:1},8,["modelValue"])]),_:1}),a(g,{field:"password","hide-label":"","validate-trigger":"blur"},{default:l(()=>[a(m,{modelValue:e(c).password,"onUpdate:modelValue":f[1]||(f[1]=s=>e(c).password=s),modelModifiers:{trim:!0},placeholder:"请输入密码","allow-clear":"",size:"large"},{prepend:l(()=>[a(e(L))]),_:1},8,["modelValue"])]),_:1}),a(g,{field:"captcha","hide-label":""},{default:l(()=>[a(i,{modelValue:e(c).captcha,"onUpdate:modelValue":f[2]||(f[2]=s=>e(c).captcha=s),modelModifiers:{trim:!0},placeholder:"请输入验证码","allow-clear":"",size:"large"},{prepend:l(()=>[C("img",{src:e(F),width:"14",alt:""},null,8,be)]),append:l(()=>[x(v.$slots,"captcha")]),_:3},8,["modelValue"])]),_:3}),x(v.$slots,"bottom",{submit:t})]),_:3},8,["model","rules"])}}});function K(){const E=h(null),d=h(-1),p=h(!1),u=h(!1);ve(async()=>{try{const r=await ae();r.code===200&&(r.data??-1)>0&&(d.value=r.data,o=setInterval(()=>{d.value>=1?d.value--:(d.value=0,clearInterval(o))},1e3))}catch{}finally{p.value=!0}});let o;return ge(()=>{o&&clearInterval(o)}),{restSeconds:d,formRef:E,getEmailCheckCode:async(r,t)=>{var f;let v=!0;if(await((f=E.value)==null?void 0:f.validateField("email",i=>{i&&(v=!1)})),!!v)try{u.value=!0;const i=await te({email:r,type:t});i.code===200?(U.success("验证码已发送"),d.value=ee,o=setInterval(()=>{d.value>=1?d.value--:(d.value=0,clearInterval(o))},1e3)):U.error("验证码发送失败，"+i.message)}catch{U.error("验证码发送失败")}finally{u.value=!1}},showEmailBtn:p,isSending:u}}const Ce=["src"],he=P({__name:"Register",props:{modelValue:{type:Boolean},modelModifiers:{}},emits:J(["getCaptcha"],["update:modelValue"]),setup(E,{emit:d}){const p=d,u=W(),o=q(E,"modelValue"),{userInfo:c}=Y(X()),r=h({}),t=A(()=>j(r.value.password)),{restSeconds:v,getEmailCheckCode:f,formRef:i,showEmailBtn:g}=K(),m=async()=>{var s;let w=!0;if(await((s=i.value)==null?void 0:s.validate(n=>{n&&(w=!1)})),!!w){o.value=!0;try{const n=await de(r.value);n.code===200?(c.value=n.data,U.success("注册成功"),await u.push("/file/all")):(U.error(n.message),p("getCaptcha"))}catch{p("getCaptcha")}finally{o.value=!1}}};return(w,s)=>{const n=T,_=z,G=N,V=D,Q=O,Z=se;return R(),I(Z,{loading:o.value,tip:"正在发送请求",class:"w-full"},{default:l(()=>[a(Q,{model:e(r),class:"p-4",rules:e(t),ref:"formRef"},{default:l(()=>[a(_,{field:"email","hide-label":"","validate-trigger":"blur"},{default:l(()=>[a(n,{modelValue:e(r).email,"onUpdate:modelValue":s[0]||(s[0]=k=>e(r).email=k),modelModifiers:{trim:!0},placeholder:"请输入邮箱","allow-clear":"",size:"large"},{prepend:l(()=>[a(e(B))]),_:1},8,["modelValue"])]),_:1}),a(_,{field:"emailCheckCode","hide-label":""},{default:l(()=>[a(n,{modelValue:e(r).emailCheckCode,"onUpdate:modelValue":s[1]||(s[1]=k=>e(r).emailCheckCode=k),modelModifiers:{trim:!0},placeholder:"请输入邮箱验证码","allow-clear":"",size:"large"},{prepend:l(()=>[a(e(H))]),_:1},8,["modelValue"]),e(g)?(R(),I(G,{key:0,type:"primary",onClick:s[2]||(s[2]=k=>e(f)(e(r).email,0)),disabled:e(v)>0,style:{height:"36px","min-width":"100px"}},{default:l(()=>[b(S(e(v)>0?e(v)+"s":"发送验证码"),1)]),_:1},8,["disabled"])):$("",!0)]),_:1}),a(_,{field:"nickname","hide-label":"","alidate-trigger":"blur"},{default:l(()=>[a(n,{modelValue:e(r).nickname,"onUpdate:modelValue":s[3]||(s[3]=k=>e(r).nickname=k),modelModifiers:{trim:!0},placeholder:"请输入昵称","allow-clear":"",size:"large"},{prepend:l(()=>[a(e(oe))]),_:1},8,["modelValue"])]),_:1}),a(_,{field:"password","hide-label":"","validate-trigger":"blur"},{default:l(()=>[a(V,{modelValue:e(r).password,"onUpdate:modelValue":s[4]||(s[4]=k=>e(r).password=k),modelModifiers:{trim:!0},placeholder:"请输入密码","allow-clear":"",size:"large"},{prepend:l(()=>[a(e(L))]),_:1},8,["modelValue"])]),_:1}),a(_,{field:"captcha","hide-label":""},{default:l(()=>[a(n,{modelValue:e(r).captcha,"onUpdate:modelValue":s[5]||(s[5]=k=>e(r).captcha=k),modelModifiers:{trim:!0},placeholder:"请输入验证码","allow-clear":"",size:"large"},{prepend:l(()=>[C("img",{src:e(F),width:"14",alt:""},null,8,Ce)]),append:l(()=>[x(w.$slots,"captcha")]),_:3},8,["modelValue"])]),_:3}),x(w.$slots,"bottom",{submit:m})]),_:3},8,["model","rules"])]),_:3},8,["loading"])}}}),ke=["src"],ye=P({name:"UpdatePassword",__name:"UpdatePassword",props:{modelValue:{},modelModifiers:{}},emits:J(["getCaptcha"],["update:modelValue"]),setup(E,{emit:d}){const p=d,u=q(E,"modelValue"),o=h({}),c=A(()=>j(o.value.password)),{restSeconds:r,getEmailCheckCode:t,formRef:v,showEmailBtn:f}=K(),i=async()=>{var m;let g=!0;if(await((m=v.value)==null?void 0:m.validate(w=>{w&&(g=!1)})),!!g){u.value=!0;try{const{confirmPassword:w,...s}=o.value,n=await re(s);n.code===200?(U.success("修改成功"),v.value.resetFields()):(U.error(n.message),p("getCaptcha"))}catch{p("getCaptcha")}finally{u.value=!1}}};return(g,m)=>{const w=T,s=z,n=N,_=D,G=O;return R(),I(G,{model:e(o),class:"p-4",rules:e(c),ref_key:"formRef",ref:v},{default:l(()=>[a(s,{field:"email","hide-label":"","validate-trigger":"blur"},{default:l(()=>[a(w,{modelValue:e(o).email,"onUpdate:modelValue":m[0]||(m[0]=V=>e(o).email=V),modelModifiers:{trim:!0},placeholder:"请输入邮箱","allow-clear":"",size:"large"},{prepend:l(()=>[a(e(B))]),_:1},8,["modelValue"])]),_:1}),a(s,{field:"emailCheckCode","hide-label":""},{default:l(()=>[a(w,{modelValue:e(o).emailCheckCode,"onUpdate:modelValue":m[1]||(m[1]=V=>e(o).emailCheckCode=V),modelModifiers:{trim:!0},placeholder:"请输入邮箱验证码","allow-clear":"",size:"large"},{prepend:l(()=>[a(e(H))]),_:1},8,["modelValue"]),e(f)?(R(),I(n,{key:0,type:"primary",onClick:m[2]||(m[2]=V=>e(t)(e(o).email,1)),disabled:e(r)>0,style:{height:"36px","min-width":"100px"}},{default:l(()=>[b(S(e(r)>0?e(r)+"s":"发送验证码"),1)]),_:1},8,["disabled"])):$("",!0)]),_:1}),a(s,{field:"password","hide-label":"","validate-trigger":"blur"},{default:l(()=>[a(_,{modelValue:e(o).password,"onUpdate:modelValue":m[3]||(m[3]=V=>e(o).password=V),modelModifiers:{trim:!0},placeholder:"请输入密码","allow-clear":"",size:"large"},{prepend:l(()=>[a(e(L))]),_:1},8,["modelValue"])]),_:1}),a(s,{field:"confirmPassword","hide-label":"","validate-trigger":"blur"},{default:l(()=>[a(_,{modelValue:e(o).confirmPassword,"onUpdate:modelValue":m[4]||(m[4]=V=>e(o).confirmPassword=V),modelModifiers:{trim:!0},placeholder:"请确认密码","allow-clear":"",size:"large"},{prepend:l(()=>[a(e(L))]),_:1},8,["modelValue"])]),_:1}),a(s,{field:"captcha","hide-label":""},{default:l(()=>[a(w,{modelValue:e(o).captcha,"onUpdate:modelValue":m[5]||(m[5]=V=>e(o).captcha=V),modelModifiers:{trim:!0},placeholder:"请输入验证码","allow-clear":"",size:"large"},{prepend:l(()=>[C("img",{src:e(F),width:"14",alt:""},null,8,ke)]),append:l(()=>[x(g.$slots,"captcha")]),_:3},8,["modelValue"])]),_:3}),x(g.$slots,"bottom",{submit:i})]),_:3},8,["model","rules"])}}}),Ue=["src"],Ee={class:"w-full flex justify-between select-none"},Re=["src"],Ie={class:"w-full flex justify-between select-none"},Me=["src"],xe={class:"w-full flex justify-between select-none"},Se=P({name:"Entry",__name:"index",setup(E){const d=h(y.LOGIN),p=h(!1),u=h(!1),o=h(""),c=async()=>{try{const r=await ne();o.value=URL.createObjectURL(r)}catch{U.error("验证码获取失败，请稍后再试")}};return we(d,c,{immediate:!0}),(r,t)=>{const v=ie,f=ue,i=z,g=me,m=N,w=pe,s=ce;return R(),I(s,{class:"background",justify:"center",align:"center"},{default:l(()=>[a(v,{xs:24,lg:10,class:"col"},{default:l(()=>t[12]||(t[12]=[C("div",{class:"img"},null,-1)])),_:1}),a(v,{xs:24,lg:14,class:"col"},{default:l(()=>[a(w,{class:"card pt-2"},{title:l(()=>t[13]||(t[13]=[C("div",{class:"title"},"hfdy 云盘",-1)])),default:l(()=>[e(d)===e(y).LOGIN?(R(),I(Ve,{key:0,modelValue:e(u),"onUpdate:modelValue":t[3]||(t[3]=n=>M(u)?u.value=n:null)},{captcha:l(()=>[C("img",{src:e(o),class:"w-28 cursor-pointer select-none",onClick:c,alt:"验证码"},null,8,Ue)]),bottom:l(({submit:n})=>[a(i,{"hide-label":""},{default:l(()=>[a(f,{modelValue:e(p),"onUpdate:modelValue":t[0]||(t[0]=_=>M(p)?p.value=_:null),style:{"user-select":"none"}},{default:l(()=>t[14]||(t[14]=[b("记住我")])),_:1},8,["modelValue"])]),_:1}),a(i,{"hide-label":""},{default:l(()=>[C("div",Ee,[a(g,{hoverable:!1,onClick:t[1]||(t[1]=_=>d.value=e(y).REGISTER)},{default:l(()=>t[15]||(t[15]=[b("没有账号？去注册")])),_:1}),a(g,{hoverable:!1,onClick:t[2]||(t[2]=_=>d.value=e(y).UPDATE_PASSWORD)},{default:l(()=>t[16]||(t[16]=[b("忘记密码？")])),_:1})])]),_:1}),a(i,{"hide-label":""},{default:l(()=>[a(m,{class:"submit-button",type:"primary",disabled:e(u),onClick:n},{default:l(()=>[b(S(e(d)),1)]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:1},8,["modelValue"])):$("",!0),e(d)===e(y).REGISTER?(R(),I(he,{key:1,modelValue:e(u),"onUpdate:modelValue":t[7]||(t[7]=n=>M(u)?u.value=n:null),onGetCaptcha:c},{captcha:l(()=>[C("img",{src:e(o),class:"w-32 cursor-pointer select-none",onClick:c,alt:"验证码"},null,8,Re)]),bottom:l(({submit:n})=>[a(i,{"hide-label":""},{default:l(()=>[a(f,{modelValue:e(p),"onUpdate:modelValue":t[4]||(t[4]=_=>M(p)?p.value=_:null),style:{"user-select":"none"}},{default:l(()=>t[17]||(t[17]=[b("记住我")])),_:1},8,["modelValue"])]),_:1}),a(i,{"hide-label":""},{default:l(()=>[C("div",Ie,[a(g,{hoverable:!1,onClick:t[5]||(t[5]=_=>d.value=e(y).UPDATE_PASSWORD)},{default:l(()=>t[18]||(t[18]=[b("忘记密码？")])),_:1}),a(g,{hoverable:!1,onClick:t[6]||(t[6]=_=>d.value=e(y).LOGIN)},{default:l(()=>t[19]||(t[19]=[b("已有帐号？去登录")])),_:1})])]),_:1}),a(i,{"hide-label":""},{default:l(()=>[a(m,{class:"submit-button",type:"primary",disabled:e(u),onClick:n},{default:l(()=>[b(S(e(d)),1)]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:1},8,["modelValue"])):$("",!0),e(d)===e(y).UPDATE_PASSWORD?(R(),I(ye,{key:2,modelValue:e(u),"onUpdate:modelValue":t[11]||(t[11]=n=>M(u)?u.value=n:null),onGetCaptcha:c},{captcha:l(()=>[C("img",{src:e(o),class:"w-32 cursor-pointer select-none",onClick:c,alt:"验证码"},null,8,Me)]),bottom:l(({submit:n})=>[a(i,{"hide-label":""},{default:l(()=>[a(f,{modelValue:e(p),"onUpdate:modelValue":t[8]||(t[8]=_=>M(p)?p.value=_:null),style:{"user-select":"none"}},{default:l(()=>t[20]||(t[20]=[b("记住我")])),_:1},8,["modelValue"])]),_:1}),a(i,{"hide-label":""},{default:l(()=>[C("div",xe,[a(g,{hoverable:!1,onClick:t[9]||(t[9]=_=>d.value=e(y).LOGIN)},{default:l(()=>t[21]||(t[21]=[b("已有帐号？去登录")])),_:1}),a(g,{hoverable:!1,onClick:t[10]||(t[10]=_=>d.value=e(y).REGISTER)},{default:l(()=>t[22]||(t[22]=[b("没有账号？去注册")])),_:1})])]),_:1}),a(i,{"hide-label":""},{default:l(()=>[a(m,{class:"submit-button",type:"primary",disabled:e(u),onClick:n},{default:l(()=>[b(S(e(d)),1)]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:1},8,["modelValue"])):$("",!0)]),_:1})]),_:1})]),_:1})}}}),Oe=fe(Se,[["__scopeId","data-v-c926af17"]]);export{Oe as default};
