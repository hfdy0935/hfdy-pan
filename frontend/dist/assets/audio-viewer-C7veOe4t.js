import{s as Sv,g as Ev,_ as kv}from"./index-CdIjDISF.js";import{u as wv}from"./index.vue_vue_type_script_setup_true_lang-MDeg8KDO.js";import{bM as us,bN as lr,d as Iv,aQ as wo,ai as xv,ak as Pv,o as en,a as tn,aG as Io,be as Ov,bg as Rv,e as rn,b as Av}from"./arco-design-vue-wpZPvk8Z.js";import"./arco-design-vue-icon-S64ufJhU.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./file-CTjv8ooS.js";import"./useFolderLevelTree-BY3VF7JM.js";import"./index-DeLZq7_u.js";function xo(n,a){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);a&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),i.push.apply(i,t)}return i}function V(n){for(var a=1;a<arguments.length;a++){var i=arguments[a]!=null?arguments[a]:{};a%2?xo(Object(i),!0).forEach(function(t){_(n,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):xo(Object(i)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(i,t))})}return n}function Q(n){"@babel/helpers - typeof";return Q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},Q(n)}function E(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}function Po(n,a){for(var i=0;i<a.length;i++){var t=a[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,jc(t.key),t)}}function k(n,a,i){return a&&Po(n.prototype,a),i&&Po(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n}function _(n,a,i){return a=jc(a),a in n?Object.defineProperty(n,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[a]=i,n}function x(n,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(a&&a.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),a&&ka(n,a)}function w(n){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},w(n)}function ka(n,a){return ka=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ka(n,a)}function Lv(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function y(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ls(n,a){if(a&&(typeof a=="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return y(n)}function P(n){var a=Lv();return function(){var t=w(n),e;if(a){var r=w(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ls(this,e)}}function Dv(n,a){for(;!Object.prototype.hasOwnProperty.call(n,a)&&(n=w(n),n!==null););return n}function I(){return typeof Reflect<"u"&&Reflect.get?I=Reflect.get.bind():I=function(a,i,t){var e=Dv(a,i);if(e){var r=Object.getOwnPropertyDescriptor(e,i);return r.get?r.get.call(arguments.length<3?a:t):r.value}},I.apply(this,arguments)}function We(n){return $v(n)||Nv(n)||Mv(n)||Fv()}function $v(n){if(Array.isArray(n))return wa(n)}function Nv(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Mv(n,a){if(n){if(typeof n=="string")return wa(n,a);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return wa(n,a)}}function wa(n,a){(a==null||a>n.length)&&(a=n.length);for(var i=0,t=new Array(a);i<a;i++)t[i]=n[i];return t}function Fv(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bv(n,a){if(typeof n!="object"||n===null)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var t=i.call(n,a||"default");if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(n)}function jc(n){var a=Bv(n,"string");return typeof a=="symbol"?a:String(a)}var Gc={exports:{}};(function(n){var a=Object.prototype.hasOwnProperty,i="~";function t(){}Object.create&&(t.prototype=Object.create(null),new t().__proto__||(i=!1));function e(u,l,c){this.fn=u,this.context=l,this.once=c||!1}function r(u,l,c,f,v){if(typeof c!="function")throw new TypeError("The listener must be a function");var d=new e(c,f||u,v),g=i?i+l:l;return u._events[g]?u._events[g].fn?u._events[g]=[u._events[g],d]:u._events[g].push(d):(u._events[g]=d,u._eventsCount++),u}function s(u,l){--u._eventsCount===0?u._events=new t:delete u._events[l]}function o(){this._events=new t,this._eventsCount=0}o.prototype.eventNames=function(){var l=[],c,f;if(this._eventsCount===0)return l;for(f in c=this._events)a.call(c,f)&&l.push(i?f.slice(1):f);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(c)):l},o.prototype.listeners=function(l){var c=i?i+l:l,f=this._events[c];if(!f)return[];if(f.fn)return[f.fn];for(var v=0,d=f.length,g=new Array(d);v<d;v++)g[v]=f[v].fn;return g},o.prototype.listenerCount=function(l){var c=i?i+l:l,f=this._events[c];return f?f.fn?1:f.length:0},o.prototype.emit=function(l,c,f,v,d,g){var m=i?i+l:l;if(!this._events[m])return!1;var p=this._events[m],b=arguments.length,T,S;if(p.fn){switch(p.once&&this.removeListener(l,p.fn,void 0,!0),b){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,c),!0;case 3:return p.fn.call(p.context,c,f),!0;case 4:return p.fn.call(p.context,c,f,v),!0;case 5:return p.fn.call(p.context,c,f,v,d),!0;case 6:return p.fn.call(p.context,c,f,v,d,g),!0}for(S=1,T=new Array(b-1);S<b;S++)T[S-1]=arguments[S];p.fn.apply(p.context,T)}else{var $=p.length,L;for(S=0;S<$;S++)switch(p[S].once&&this.removeListener(l,p[S].fn,void 0,!0),b){case 1:p[S].fn.call(p[S].context);break;case 2:p[S].fn.call(p[S].context,c);break;case 3:p[S].fn.call(p[S].context,c,f);break;case 4:p[S].fn.call(p[S].context,c,f,v);break;default:if(!T)for(L=1,T=new Array(b-1);L<b;L++)T[L-1]=arguments[L];p[S].fn.apply(p[S].context,T)}}return!0},o.prototype.on=function(l,c,f){return r(this,l,c,f,!1)},o.prototype.once=function(l,c,f){return r(this,l,c,f,!0)},o.prototype.removeListener=function(l,c,f,v){var d=i?i+l:l;if(!this._events[d])return this;if(!c)return s(this,d),this;var g=this._events[d];if(g.fn)g.fn===c&&(!v||g.once)&&(!f||g.context===f)&&s(this,d);else{for(var m=0,p=[],b=g.length;m<b;m++)(g[m].fn!==c||v&&!g[m].once||f&&g[m].context!==f)&&p.push(g[m]);p.length?this._events[d]=p.length===1?p[0]:p:s(this,d)}return this},o.prototype.removeAllListeners=function(l){var c;return l?(c=i?i+l:l,this._events[c]&&s(this,c)):(this._events=new t,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=i,o.EventEmitter=o,n.exports=o})(Gc);var Uv=Gc.exports;const Vc=us(Uv);var Hv=typeof window<"u"&&window.location&&window.location.href.indexOf("xgplayerdebugger=1")>-1,nn={info:"color: #525252; background-color: #90ee90;",error:"color: #525252; background-color: red;",warn:"color: #525252; background-color: yellow; "},an="%c[xgplayer]",A={config:{debug:Hv?3:0},logInfo:function(a){for(var i,t=arguments.length,e=new Array(t>1?t-1:0),r=1;r<t;r++)e[r-1]=arguments[r];this.config.debug>=3&&(i=console).log.apply(i,[an,nn.info,a].concat(e))},logWarn:function(a){for(var i,t=arguments.length,e=new Array(t>1?t-1:0),r=1;r<t;r++)e[r-1]=arguments[r];this.config.debug>=1&&(i=console).warn.apply(i,[an,nn.warn,a].concat(e))},logError:function(a){var i;if(!(this.config.debug<1)){for(var t=this.config.debug>=2?"trace":"error",e=arguments.length,r=new Array(e>1?e-1:0),s=1;s<e;s++)r[s-1]=arguments[s];(i=console)[t].apply(i,[an,nn.error,a].concat(r))}}};function jv(n){n.logInfo=A.logInfo.bind(n),n.logWarn=A.logWarn.bind(n),n.logError=A.logError.bind(n)}var Gv=function(){function n(a){E(this,n),this.bufferedList=a}return k(n,[{key:"start",value:function(i){return this.bufferedList[i].start}},{key:"end",value:function(i){return this.bufferedList[i].end}},{key:"length",get:function(){return this.bufferedList.length}}]),n}(),h={};h.createDom=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"div",a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"",e=document.createElement(n);return e.className=t,e.innerHTML=a,Object.keys(i).forEach(function(r){var s=r,o=i[r];n==="video"||n==="audio"||n==="live-video"?o&&e.setAttribute(s,o):e.setAttribute(s,o)}),e};h.createDomFromHtml=function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";try{var t=document.createElement("div");t.innerHTML=n;var e=t.children;return t=null,e.length>0?(e=e[0],i&&h.addClass(e,i),a&&Object.keys(a).forEach(function(r){e.setAttribute(r,a[r])}),e):null}catch(r){return A.logError("util.createDomFromHtml",r),null}};h.hasClass=function(n,a){if(!n||!a)return!1;try{return Array.prototype.some.call(n.classList,function(t){return t===a})}catch{var i=n.className&&Q(n.className)==="object"?n.getAttribute("class"):n.className;return i&&!!i.match(new RegExp("(\\s|^)"+a+"(\\s|$)"))}};h.addClass=function(n,a){if(!(!n||!a))try{a.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach(function(i){i&&n.classList.add(i)})}catch{h.hasClass(n,a)||(n.className&&Q(n.className)==="object"?n.setAttribute("class",n.getAttribute("class")+" "+a):n.className+=" "+a)}};h.removeClass=function(n,a){if(!(!n||!a))try{a.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach(function(i){i&&n.classList.remove(i)})}catch{h.hasClass(n,a)&&a.split(/\s+/g).forEach(function(t){var e=new RegExp("(\\s|^)"+t+"(\\s|$)");n.className&&Q(n.className)==="object"?n.setAttribute("class",n.getAttribute("class").replace(e," ")):n.className=n.className.replace(e," ")})}};h.toggleClass=function(n,a){n&&a.split(/\s+/g).forEach(function(i){h.hasClass(n,i)?h.removeClass(n,i):h.addClass(n,i)})};h.classNames=function(){for(var n=arguments,a=[],i=function(r){h.typeOf(n[r])==="String"?a.push(n[r]):h.typeOf(n[r])==="Object"&&Object.keys(n[r]).map(function(s){n[r][s]&&a.push(s)})},t=0;t<arguments.length;t++)i(t);return a.join(" ")};h.findDom=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document,a=arguments.length>1?arguments[1]:void 0,i;try{i=n.querySelector(a)}catch(t){A.logError("util.findDom",t),a.indexOf("#")===0&&(i=n.getElementById(a.slice(1)))}return i};h.getCss=function(n,a){return n.currentStyle?n.currentStyle[a]:document.defaultView.getComputedStyle(n,!1)[a]};h.padStart=function(n,a,i){for(var t=String(i),e=a>>0,r=Math.ceil(e/t.length),s=[],o=String(n);r--;)s.push(t);return s.join("").substring(0,e-o.length)+o};h.format=function(n){if(window.isNaN(n))return"";n=Math.round(n);var a=h.padStart(Math.floor(n/3600),2,0),i=h.padStart(Math.floor((n-a*3600)/60),2,0),t=h.padStart(Math.floor(n-a*3600-i*60),2,0);return(a==="00"?[i,t]:[a,i,t]).join(":")};h.event=function(n){if(n.touches){var a=n.touches[0]||n.changedTouches[0];n.clientX=a.clientX||0,n.clientY=a.clientY||0,n.offsetX=a.pageX-a.target.offsetLeft,n.offsetY=a.pageY-a.target.offsetTop}n._target=n.target||n.srcElement};h.typeOf=function(n){return Object.prototype.toString.call(n).match(/([^\s.*]+)(?=]$)/g)[0]};h.deepCopy=function(n,a){if(h.typeOf(a)==="Object"&&h.typeOf(n)==="Object")return Object.keys(a).forEach(function(i){h.typeOf(a[i])==="Object"&&!(a[i]instanceof Node)?n[i]===void 0||n[i]===void 0?n[i]=a[i]:h.deepCopy(n[i],a[i]):h.typeOf(a[i])==="Array"?n[i]=h.typeOf(n[i])==="Array"?n[i].concat(a[i]):a[i]:n[i]=a[i]}),n};h.deepMerge=function(n,a){return Object.keys(a).map(function(i){if(h.typeOf(a[i])==="Array"&&h.typeOf(n[i])==="Array"){if(h.typeOf(n[i])==="Array"){var t;(t=n[i]).push.apply(t,We(a[i]))}}else h.typeOf(n[i])===h.typeOf(a[i])&&n[i]!==null&&h.typeOf(n[i])==="Object"&&!(a[i]instanceof window.Node)?h.deepMerge(n[i],a[i]):a[i]!==null&&(n[i]=a[i])}),n};h.getBgImage=function(n){var a=(n.currentStyle||window.getComputedStyle(n,null)).backgroundImage;if(!a||a==="none")return"";var i=document.createElement("a");return i.href=a.replace(/url\("|"\)/g,""),i.href};h.copyDom=function(n){if(n&&n.nodeType===1){var a=document.createElement(n.tagName);return Array.prototype.forEach.call(n.attributes,function(i){a.setAttribute(i.name,i.value)}),n.innerHTML&&(a.innerHTML=n.innerHTML),a}else return""};h.setInterval=function(n,a,i,t){n._interval[a]||(n._interval[a]=window.setInterval(i.bind(n),t))};h.clearInterval=function(n,a){clearInterval(n._interval[a]),n._interval[a]=null};h.setTimeout=function(n,a,i){n._timers||(n._timers=[]);var t=setTimeout(function(){a(),h.clearTimeout(n,t)},i);return n._timers.push(t),t};h.clearTimeout=function(n,a){var i=n._timers;if(h.typeOf(i)==="Array"){for(var t=0;t<i.length;t++)if(i[t]===a){i.splice(t,1),clearTimeout(a);break}}else clearTimeout(a)};h.clearAllTimers=function(n){var a=n._timers;h.typeOf(a)==="Array"&&(a.map(function(i){clearTimeout(i)}),n._timerIds=[])};h.createImgBtn=function(n,a,i,t){var e=h.createDom("xg-".concat(n),"",{},"xgplayer-".concat(n,"-img"));if(e.style.backgroundImage='url("'.concat(a,'")'),i&&t){var r,s,o;["px","rem","em","pt","dp","vw","vh","vm","%"].every(function(u){return i.indexOf(u)>-1&&t.indexOf(u)>-1?(r=parseFloat(i.slice(0,i.indexOf(u)).trim()),s=parseFloat(t.slice(0,t.indexOf(u)).trim()),o=u,!1):!0}),e.style.width="".concat(r).concat(o),e.style.height="".concat(s).concat(o),e.style.backgroundSize="".concat(r).concat(o," ").concat(s).concat(o),n==="start"?e.style.margin="-".concat(s/2).concat(o," auto auto -").concat(r/2).concat(o):e.style.margin="auto 5px auto 5px"}return e};h.Hex2RGBA=function(n,a){var i=[];if(/^\#[0-9A-F]{3}$/i.test(n)){var t="#";n.replace(/[0-9A-F]/ig,function(e){t+=e+e}),n=t}return/^#[0-9A-F]{6}$/i.test(n)?(n.replace(/[0-9A-F]{2}/ig,function(e){i.push(parseInt(e,16))}),"rgba(".concat(i.join(","),", ").concat(a,")")):"rgba(255, 255, 255, 0.1)"};h.getFullScreenEl=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement};h.checkIsFunction=function(n){return n&&typeof n=="function"};h.checkIsObject=function(n){return n!==null&&Q(n)==="object"};h.hide=function(n){n.style.display="none"};h.show=function(n,a){n.style.display=a||"block"};h.isUndefined=function(n){if(typeof n>"u"||n===null)return!0};h.setStyleFromCsstext=function(n,a){if(a)if(h.typeOf(a)==="String"){var i=a.replace(/\s+/g,"").split(";");i.map(function(t){if(t){var e=t.split(":");e.length>1&&(n.style[e[0]]=e[1])}})}else Object.keys(a).map(function(t){n.style[t]=a[t]})};function Vv(n,a){for(var i=0,t=a.length;i<t;i++)if(n.indexOf(a[i])>-1)return!0;return!1}h.filterStyleFromText=function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["width","height","top","left","bottom","right","position","z-index","padding","margin","transform"],i=n.style.cssText;if(!i)return{};var t=i.replace(/\s+/g,"").split(";"),e={},r={};return t.map(function(s){if(s){var o=s.split(":");o.length>1&&(Vv(o[0],a)?e[o[0]]=o[1]:r[o[0]]=o[1])}}),n.setAttribute("style",""),Object.keys(r).map(function(s){n.style[s]=r[s]}),e};h.getStyleFromCsstext=function(n){var a=n.style.cssText;if(!a)return{};var i=a.replace(/\s+/g,"").split(";"),t={};return i.map(function(e){if(e){var r=e.split(":");r.length>1&&(t[r[0]]=r[1])}}),t};h.preloadImg=function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){};if(n){var t=new window.Image;t.onload=function(e){t=null,a&&a(e)},t.onerror=function(e){t=null,i&&i(e)},t.src=n}};h.stopPropagation=function(n){n&&(n.stopPropagation(),n.cancelable&&n.preventDefault())};h.scrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0};h.scrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0};h.checkTouchSupport=function(){return"ontouchstart"in window};h.getBuffered2=function(n){for(var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5,i=[],t=0;t<n.length;t++)i.push({start:n.start(t)<.5?0:n.start(t),end:n.end(t)});i.sort(function(u,l){var c=u.start-l.start;return c||l.end-u.end});var e=[];if(a)for(var r=0;r<i.length;r++){var s=e.length;if(s){var o=e[s-1].end;i[r].start-o<a?i[r].end>o&&(e[s-1].end=i[r].end):e.push(i[r])}else e.push(i[r])}else e=i;return new Gv(e)};h.getEventPos=function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return n.touches&&n.touches.length>0&&(n=n.touches[0]),{x:n.x/a,y:n.y/a,clientX:n.clientX/a,clientY:n.clientY/a,offsetX:n.offsetX/a,offsetY:n.offsetY/a,pageX:n.pageX/a,pageY:n.pageY/a}};h.requestAnimationFrame=function(n){var a=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(a)return a(n)};h.getHostFromUrl=function(n){if(h.typeOf(n)!=="String")return"";var a=n.split("/"),i="";return a.length>3&&a[2]&&(i=a[2]),i};h.cancelAnimationFrame=function(n){var a=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.cancelRequestAnimationFrame;a&&a(n)};h.isMSE=function(n){return!n||!(n instanceof HTMLMediaElement)?!1:/^blob/.test(n.currentSrc)||/^blob/.test(n.src)};h.generateSessionId=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,a=new Date().getTime();try{n=parseInt(n)}catch{n=0}a+=n,window.performance&&typeof window.performance.now=="function"&&(a+=parseInt(window.performance.now()));var i="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=(a+Math.random()*16)%16|0;return a=Math.floor(a/16),(t==="x"?e:e&3|8).toString(16)});return i};h.createEvent=function(n){var a;return typeof window.Event=="function"?a=new Event(n):(a=document.createEvent("Event"),a.initEvent(n,!0,!0)),a};h.adjustTimeByDuration=function(n,a,i){return!a||!n?n:n>a||i&&n<a?a:n};h.createPositionBar=function(n,a){var i=h.createDom("xg-bar","",{"data-index":-1},n);return a.appendChild(i),i};function Wc(n){var a=Q(n);return n!==null&&(a==="object"||a==="function")}function Wv(n,a,i){var t,e,r,s,o,u,l=0,c=!1,f=!1,v=!0,d=!a&&a!==0&&typeof window.requestAnimationFrame=="function";if(typeof n!="function")throw new TypeError("Expected a function");a=+a||0,Wc(i)&&(c=!!i.leading,f="maxWait"in i,r=f?Math.max(+i.maxWait||0,a):r,v="trailing"in i?!!i.trailing:v);function g(N){var re=t,ye=e;return t=e=void 0,l=N,s=n.apply(ye,re),s}function m(N,re){return d?(window.cancelAnimationFrame(o),window.requestAnimationFrame(N)):setTimeout(N,re)}function p(N){if(d)return window.cancelAnimationFrame(N);clearTimeout(N)}function b(N){return l=N,o=m($,a),c?g(N):s}function T(N){var re=N-u,ye=N-l,_e=a-re;return f?Math.min(_e,r-ye):_e}function S(N){var re=N-u,ye=N-l;return u===void 0||re>=a||re<0||f&&ye>=r}function $(){var N=Date.now();if(S(N))return L(N);o=m($,T(N))}function L(N){return o=void 0,v&&t?g(N):(t=e=void 0,s)}function oe(){o!==void 0&&p(o),l=0,t=u=e=o=void 0}function H(){return o===void 0?s:L(Date.now())}function me(){return o!==void 0}function xe(){for(var N=Date.now(),re=S(N),ye=arguments.length,_e=new Array(ye),rt=0;rt<ye;rt++)_e[rt]=arguments[rt];if(t=_e,e=this,u=N,re){if(o===void 0)return b(u);if(f)return o=m($,a),g(u)}return o===void 0&&(o=m($,a)),s}return xe.cancel=oe,xe.flush=H,xe.pending=me,xe}function zv(n,a,i){var t=!0,e=!0;if(typeof n!="function")throw new TypeError("Expected a function");return Wc(i)&&(t="leading"in i?!!i.leading:t,e="trailing"in i?!!i.trailing:e),Wv(n,a,{leading:t,trailing:e,maxWait:a})}function Kv(){var n=(document.documentElement.getAttribute("lang")||navigator.language||"zh-cn").toLocaleLowerCase();return n==="zh-cn"&&(n="zh"),n}function Yv(n,a,i){if(n){var t=n.getAttribute(i);return!!(t&&t===a&&(n.tagName==="VIDEO"||n.tagName==="AUDIO"))}}var Oo={android:/(Android)\s([\d.]+)/,ios:/(Version)\/([\d.]+)/},Xv=["avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","avc1.42E01E","mp4v.20.8","avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","mp4v.20.8, mp4a.40.2","mp4v.20.240, mp4a.40.2"],R={get device(){var n=R.os;return n.isPc?"pc":"mobile"},get browser(){if(typeof navigator>"u")return"";var n=navigator.userAgent.toLowerCase(),a={ie:/rv:([\d.]+)\) like gecko/,firefox:/firefox\/([\d.]+)/,chrome:/chrome\/([\d.]+)/,opera:/opera.([\d.]+)/,safari:/version\/([\d.]+).*safari/};return[].concat(Object.keys(a).filter(function(i){return a[i].test(n)}))[0]},get os(){if(typeof navigator>"u")return{};var n=navigator.userAgent,a=/(?:Windows Phone)/.test(n),i=/(?:SymbianOS)/.test(n)||a,t=/(?:Android)/.test(n),e=/(?:Firefox)/.test(n),r=/(?:iPad|PlayBook)/.test(n)||t&&!/(?:Mobile)/.test(n)||e&&/(?:Tablet)/.test(n),s=/(?:iPhone)/.test(n)&&!r,o=!s&&!t&&!i&&!r,u=/(?:iPad|PlayBook)/.test(n);return{isTablet:r,isPhone:s,isIpad:u,isIos:s||u,isAndroid:t,isPc:o,isSymbian:i,isWindowsPhone:a,isFireFox:e}},get osVersion(){if(typeof navigator>"u")return 0;var n=navigator.userAgent,a="";/(?:iPhone)|(?:iPad|PlayBook)/.test(n)?a=Oo.ios:a=Oo.android;var i=a?a.exec(n):[];if(i&&i.length>=3){var t=i[2].split(".");return t.length>0?parseInt(t[0]):0}return 0},get isWeixin(){if(typeof navigator>"u")return!1;var n=/(micromessenger)\/([\d.]+)/,a=n.exec(navigator.userAgent.toLocaleLowerCase());return!!a},isSupportMP4:function(){var a={isSupport:!1,mime:""};if(typeof document>"u")return a;if(this.supportResult)return this.supportResult;var i=document.createElement("video");return typeof i.canPlayType=="function"&&Xv.map(function(t){i.canPlayType('video/mp4; codecs="'.concat(t,'"'))==="probably"&&(a.isSupport=!0,a.mime+="||".concat(t))}),this.supportResult=a,i=null,a},isHevcSupported:function(){return typeof MediaSource>"u"||!MediaSource.isTypeSupported?!1:MediaSource.isTypeSupported('video/mp4;codecs="hev1.1.6.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.2.4.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.3.E.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.4.10.L120.90"')},probeConfigSupported:function(a){var i={supported:!1,smooth:!1,powerEfficient:!1};if(!a||typeof navigator>"u")return Promise.resolve(i);if(navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo)return navigator.mediaCapabilities.decodingInfo(a);var t=a.video||{},e=a.audio||{};try{var r=MediaSource.isTypeSupported(t.contentType),s=MediaSource.isTypeSupported(e.contentType);return Promise.resolve({supported:r&&s,smooth:!1,powerEfficient:!1})}catch{return Promise.resolve(i)}}},Ia="3.0.0-next.55-8",qv={1:"network",2:"network",3:"decoder",4:"format"},cs=k(function n(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{errorType:"",errorCode:0,errorMessage:"",originError:"",ext:{},mediaError:null};E(this,n);var t=a&&a.i18n?a.i18n.ERROR_TYPES:null;if(a.media){var e=i.mediaError?i.mediaError:a.media.error||{},r=a.duration,s=a.currentTime,o=a.ended,u=a.src,l=a.currentSrc,c=a.media,f=c.readyState,v=c.networkState,d={playerVersion:Ia,currentTime:s,duration:r,ended:o,readyState:f,networkState:v,src:u||l,errorType:i.errorType,errorCode:i.errorCode||e.code,message:i.errorMessage||e.message,mediaError:e,originError:i.originError?i.originError.stack:"",host:h.getHostFromUrl(u||l)};return i.ext&&Object.keys(i.ext).map(function(b){d[b]=i.ext[b]}),d}else if(arguments.length>1){for(var g={playerVersion:Ia,domain:document.domain},m=["errorType","currentTime","duration","networkState","readyState","src","currentSrc","ended","errd","errorCode","mediaError"],p=0;p<arguments.length;p++)g[m[p]]=arguments[p];return g.ex=t?(t[arguments[0]]||{}).msg:"",g}}),de="play",fs="playing",qe="ended",Wt="pause",Er="error",hs="seeking",br="seeked",ve="timeupdate",kr="waiting",Ce="canplay",Jv="canplaythrough",Je="durationchange",zc="volumechange",ft="loadeddata",Kc="ratechange",Yc="progress",vs="loadstart",wr="emptied",Zv="stalled",Qv="suspend",ed="abort",td="bufferedChange",ds="focus",Xc="blur",gs="ready",qc="urlNull",lt="autoplay_started",ps="autoplay_was_prevented",Bi="complete",ms="replay",ys="destroy",Ui="urlchange",Jc="download_speed_change",je="fullscreen_change",mi="cssFullscreen_change",yi="mini_state_change",_s="definition_change",rd="before_definition_change",xa="after_definition_change",id="SEI_PARSED",nd="retry",Ut="video_resize",Pa="pip_change",Zc="rotate",Qc="screenShot",_i="playnext",ef="shortcut",tf="xglog",bi="user_action",bs="reset",ad="switch_subtitle",rf=["play","playing","ended","pause","error","seeking","seeked","timeupdate","waiting","canplay","canplaythrough","durationchange","volumechange","loadeddata","ratechange","progress","loadstart","emptied","stalled","suspend","abort","lowdecode"],nf={STATS_INFO:"stats_info",STATS_DOWNLOAD:"stats_download",STATS_RESET:"stats_reset"},af="fps_stuck";const sd=Object.freeze(Object.defineProperty({__proto__:null,ABORT:ed,AFTER_DEFINITION_CHANGE:xa,AUTOPLAY_PREVENTED:ps,AUTOPLAY_STARTED:lt,BEFORE_DEFINITION_CHANGE:rd,BUFFER_CHANGE:td,CANPLAY:Ce,CANPLAY_THROUGH:Jv,COMPLETE:Bi,CSS_FULLSCREEN_CHANGE:mi,DEFINITION_CHANGE:_s,DESTROY:ys,DOWNLOAD_SPEED_CHANGE:Jc,DURATION_CHANGE:Je,EMPTIED:wr,ENDED:qe,ERROR:Er,FPS_STUCK:af,FULLSCREEN_CHANGE:je,LOADED_DATA:ft,LOAD_START:vs,MINI_STATE_CHANGE:yi,PAUSE:Wt,PIP_CHANGE:Pa,PLAY:de,PLAYER_BLUR:Xc,PLAYER_FOCUS:ds,PLAYING:fs,PLAYNEXT:_i,PROGRESS:Yc,RATE_CHANGE:Kc,READY:gs,REPLAY:ms,RESET:bs,RETRY:nd,ROTATE:Zc,SCREEN_SHOT:Qc,SEEKED:br,SEEKING:hs,SEI_PARSED:id,SHORTCUT:ef,STALLED:Zv,STATS_EVENTS:nf,SUSPEND:Qv,SWITCH_SUBTITLE:ad,TIME_UPDATE:ve,URL_CHANGE:Ui,URL_NULL:qc,USER_ACTION:bi,VIDEO_EVENTS:rf,VIDEO_RESIZE:Ut,VOLUME_CHANGE:zc,WAITING:kr,XGLOG:tf},Symbol.toStringTag,{value:"Module"}));function sn(n,a){!this||!this.emit||(n==="error"?this.errorHandler(n,a.error):this.emit(n,a))}function od(n,a){return function(i,t){var e={player:a,eventName:n,originalEvent:i,detail:i.detail||{},timeStamp:i.timeStamp,currentTime:a.currentTime,duration:a.duration,paused:a.paused,ended:a.ended,isInternalOp:!!a._internalOp[i.type],muted:a.muted,volume:a.volume,host:h.getHostFromUrl(a.currentSrc),vtype:a.vtype};if(a.removeInnerOP(i.type),n==="timeupdate"&&(a._currentTime=a.media&&a.media.currentTime),n==="ratechange"){var r=a.media?a.media.playbackRate:0;if(r&&a._rate===r)return;a._rate=a.media&&a.media.playbackRate}if(n==="durationchange"&&(a._duration=a.media.duration),n==="volumechange"&&(e.isMutedChange=a._lastMuted!==a.muted,a._lastMuted=a.muted),n==="error"&&(e.error=t||a.video.error),a.mediaEventMiddleware[n]){var s=sn.bind(a,n,e);try{a.mediaEventMiddleware[n].call(a,e,s)}catch(o){throw sn.call(a,n,e),o}}else sn.call(a,n,e)}}var ud=function(n){x(i,n);var a=P(i);function i(t){var e;E(this,i),e=a.call(this,t),e._hasStart=!1,e._currentTime=0,e._duration=0,e._internalOp={},e._lastMuted=!1,e.vtype="MP4",e._rate=-1,e.mediaConfig=Object.assign({},{controls:!1,autoplay:t.autoplay,playsinline:t.playsinline,"x5-playsinline":t.playsinline,"webkit-playsinline":t.playsinline,"x5-video-player-fullscreen":t["x5-video-player-fullscreen"]||t.x5VideoPlayerFullscreen,"x5-video-orientation":t["x5-video-orientation"]||t.x5VideoOrientation,airplay:t.airplay,"webkit-airplay":t.airplay,tabindex:t.tabindex|0,mediaType:t.mediaType||"video"},t.videoConfig,t.videoAttributes);var r=t["x5-video-player-type"]||t.x5VideoPlayerType;return R.isWeixin&&R.os.isAndroid&&r&&(e.mediaConfig["x5-video-player-type"]=r,delete e.mediaConfig.playsinline,delete e.mediaConfig["webkit-playsinline"],delete e.mediaConfig["x5-playsinline"]),t.loop&&(e.mediaConfig.loop="loop"),e.media=h.createDom(e.mediaConfig.mediaType,"",e.mediaConfig,""),t.defaultPlaybackRate&&(e.media.defaultPlaybackRate=e.media.playbackRate=t.defaultPlaybackRate),h.typeOf(t.volume)==="Number"&&(e.volume=t.volume),t.autoplayMuted&&(e.media.muted=!0,e._lastMuted=!0),t.autoplay&&(e.media.autoplay=!0),e._interval={},e.mediaEventMiddleware={},e.attachVideoEvents(),e}return k(i,[{key:"setEventsMiddleware",value:function(e){var r=this;Object.keys(e).map(function(s){r.mediaEventMiddleware[s]=e[s]})}},{key:"removeEventsMiddleware",value:function(e){var r=this;Object.keys(e).map(function(s){delete r.mediaEventMiddleware[s]})}},{key:"attachVideoEvents",value:function(){var e=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.media;this._evHandlers||(this._evHandlers=rf.map(function(s){var o="on".concat(s.charAt(0).toUpperCase()).concat(s.slice(1));return typeof e[o]=="function"&&e.on(s,e[o]),_({},s,od(s,e))})),this._evHandlers.forEach(function(s){var o=Object.keys(s)[0];r.addEventListener(o,s[o],!1)})}},{key:"detachVideoEvents",value:function(){var e=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.media;this._evHandlers.forEach(function(s){var o=Object.keys(s)[0];r.removeEventListener(o,s[o],!1)}),this._evHandlers.forEach(function(s){var o=Object.keys(s)[0],u="on".concat(o.charAt(0).toUpperCase()).concat(o.slice(1));typeof e[u]=="function"&&e.off(o,e[u])}),this._evHandlers=null}},{key:"_attachSourceEvents",value:function(e,r){var s=this;e.removeAttribute("src"),e.load(),r.forEach(function(f){s.media.appendChild(h.createDom("source","",{src:"".concat(f.src),type:"".concat(f.type||"")}))});var o=e.children;if(o){this._videoSourceCount=o.length;for(var u=null,l=0;l<this._evHandlers.length;l++)if(Object.keys(this._evHandlers[l])[0]==="error"){u=this._evHandlers[l];break}!this._sourceError&&(this._sourceError=function(f){if(s._videoSourceCount--,s._videoSourceCount===0){var v={code:4,message:"sources load error"};u?u.error(f,v):s.errorHandler("error",v)}});for(var c=0;c<o.length;c++)o[c].addEventListener("error",this._sourceError)}}},{key:"_detachSourceEvents",value:function(e){var r=e.children;if(!(!r||r.length===0||!this._sourceError)){for(var s=0;s<r.length;s++)r[s].removeEventListener("error",this._sourceError);for(;r.length>0;)e.removeChild(r[0])}}},{key:"errorHandler",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.media&&(this.media.error||r)){var s=this.media.error||r,o=s.code?qv[s.code]:"other",u=s.message;this.media.currentSrc||(u="empty_src",s={code:6,message:u}),this.emit(e,new cs(this,{errorType:o,errorCode:s.code,errorMessage:s.message||"",mediaError:s}))}}},{key:"destroy",value:function(){this.media&&(this.media.pause&&(this.media.pause(),this.media.muted=!0),this.media.removeAttribute("src"),this.media.load()),this._currentTime=0,this._duration=0,this.mediaConfig=null;for(var e in this._interval)Object.prototype.hasOwnProperty.call(this._interval,e)&&(clearInterval(this._interval[e]),this._interval[e]=null);this.detachVideoEvents(),this.media=null,this.mediaEventMiddleware={},this.removeAllListeners()}},{key:"video",get:function(){return this.media}},{key:"play",value:function(){var e=this.media?this.media.play():null;return e}},{key:"pause",value:function(){this.media&&this.media.pause()}},{key:"load",value:function(){this.media&&this.media.load()}},{key:"canPlayType",value:function(e){return this.media?this.media.canPlayType(e):!1}},{key:"getBufferedRange",value:function(e){var r=[0,0];if(!this.media)return r;e||(e=this.media.buffered);var s=this.media.currentTime;if(e)for(var o=0,u=e.length;o<u&&(r[0]=e.start(o),r[1]=e.end(o),!(r[0]<=s&&s<=r[1]));o++);return r[0]-s<=0&&s-r[1]<=0?r:[0,0]}},{key:"autoplay",get:function(){return this.media?this.media.autoplay:!1},set:function(e){this.media&&(this.media.autoplay=e)}},{key:"buffered",get:function(){return this.media?this.media.buffered:null}},{key:"buffered2",get:function(){return this.media&&this.media.buffered?h.getBuffered2(this.media.buffered):null}},{key:"bufferedPoint",get:function(){var e={start:0,end:0};if(!this.media)return e;var r=this.media.buffered;if(!r||r.length===0)return e;for(var s=0;s<r.length;s++)if((r.start(s)<=this.currentTime||r.start(s)<.1)&&r.end(s)>=this.currentTime)return{start:r.start(s),end:r.end(s)};return e}},{key:"crossOrigin",get:function(){return this.media?this.media.crossOrigin:""},set:function(e){this.media&&(this.media.crossOrigin=e)}},{key:"currentSrc",get:function(){return this.media?this.media.currentSrc:""},set:function(e){this.media&&(this.media.currentSrc=e)}},{key:"currentTime",get:function(){return this.media?this.media.currentTime!==void 0?this.media.currentTime:this._currentTime:0},set:function(e){this.media&&(this.media.currentTime=e)}},{key:"defaultMuted",get:function(){return this.media?this.media.defaultMuted:!1},set:function(e){this.media&&(this.media.defaultMuted=e)}},{key:"duration",get:function(){return this._duration}},{key:"ended",get:function(){return this.media?this.media.ended:!1}},{key:"error",get:function(){return this.media.error}},{key:"errorNote",get:function(){var e=this.media.error;if(!e)return"";var r=["MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED"];return r[this.media.error.code-1]}},{key:"loop",get:function(){return this.media?this.media.loop:!1},set:function(e){this.media&&(this.media.loop=e)}},{key:"muted",get:function(){return this.media?this.media.muted:!1},set:function(e){!this.media||this.media.muted===e||(this._lastMuted=this.media.muted,this.media.muted=e)}},{key:"networkState",get:function(){return this.media.networkStat}},{key:"paused",get:function(){return this.media?this.media.paused:!0}},{key:"playbackRate",get:function(){return this.media?this.media.playbackRate:0},set:function(e){!this.media||e===1/0||(this.media.defaultPlaybackRate=e,this.media.playbackRate=e)}},{key:"played",get:function(){return this.media?this.media.played:null}},{key:"preload",get:function(){return this.media?this.media.preload:!1},set:function(e){this.media&&(this.media.preload=e)}},{key:"readyState",get:function(){return this.media.readyState}},{key:"seekable",get:function(){return this.media?this.media.seekable:!1}},{key:"seeking",get:function(){return this.media?this.media.seeking:!1}},{key:"src",get:function(){return this.media?this.media.src:""},set:function(e){if(this.media){if(this.emit(Ui,e),this.emit(kr),this._currentTime=0,this._duration=0,/^blob/.test(this.media.currentSrc)||/^blob/.test(this.media.src)){this.onWaiting();return}this._detachSourceEvents(this.media),h.typeOf(e)==="Array"?this._attachSourceEvents(this.media,e):e?this.media.src=e:this.media.removeAttribute("src"),this.load()}}},{key:"volume",get:function(){return this.media?this.media.volume:0},set:function(e){e===1/0||!this.media||(this.media.volume=e)}},{key:"addInnerOP",value:function(e){this._internalOp[e]=!0}},{key:"removeInnerOP",value:function(e){delete this._internalOp[e]}},{key:"emit",value:function(e,r){for(var s,o=arguments.length,u=new Array(o>2?o-2:0),l=2;l<o;l++)u[l-2]=arguments[l];(s=I(w(i.prototype),"emit",this)).call.apply(s,[this,e,r].concat(u))}},{key:"on",value:function(e,r){for(var s,o=arguments.length,u=new Array(o>2?o-2:0),l=2;l<o;l++)u[l-2]=arguments[l];(s=I(w(i.prototype),"on",this)).call.apply(s,[this,e,r].concat(u))}},{key:"once",value:function(e,r){for(var s,o=arguments.length,u=new Array(o>2?o-2:0),l=2;l<o;l++)u[l-2]=arguments[l];(s=I(w(i.prototype),"once",this)).call.apply(s,[this,e,r].concat(u))}},{key:"off",value:function(e,r){for(var s,o=arguments.length,u=new Array(o>2?o-2:0),l=2;l<o;l++)u[l-2]=arguments[l];(s=I(w(i.prototype),"off",this)).call.apply(s,[this,e,r].concat(u))}},{key:"offAll",value:function(){I(w(i.prototype),"removeAllListeners",this).call(this)}}]),i}(Vc),ld=function(){function n(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{name:"xgplayer",version:1,db:null,ojstore:{name:"xg-m4a",keypath:"vid"}};E(this,n),this.indexedDB=window.indexedDB||window.webkitindexedDB,this.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange,this.myDB=a}return k(n,[{key:"openDB",value:function(i){var t=this,e=this,r=this.myDB.version||1,s=e.indexedDB.open(e.myDB.name,r);s.onerror=function(o){},s.onsuccess=function(o){t.myDB.db=o.target.result,i.call(e)},s.onupgradeneeded=function(o){var u=o.target.result;o.target.transaction,u.objectStoreNames.contains(e.myDB.ojstore.name)||u.createObjectStore(e.myDB.ojstore.name,{keyPath:e.myDB.ojstore.keypath})}}},{key:"deletedb",value:function(){var i=this;i.indexedDB.deleteDatabase(this.myDB.name)}},{key:"closeDB",value:function(){this.myDB.db.close()}},{key:"addData",value:function(i,t){for(var e=this.myDB.db.transaction(i,"readwrite").objectStore(i),r,s=0;s<t.length;s++)r=e.add(t[s]),r.onerror=function(){},r.onsuccess=function(){}}},{key:"putData",value:function(i,t){for(var e=this.myDB.db.transaction(i,"readwrite").objectStore(i),r,s=0;s<t.length;s++)r=e.put(t[s]),r.onerror=function(){},r.onsuccess=function(){}}},{key:"getDataByKey",value:function(i,t,e){var r=this,s=this.myDB.db.transaction(i,"readwrite").objectStore(i),o=s.get(t);o.onerror=function(){e.call(r,null)},o.onsuccess=function(u){var l=u.target.result;e.call(r,l)}}},{key:"deleteData",value:function(i,t){var e=this.myDB.db.transaction(i,"readwrite").objectStore(i);e.delete(t)}},{key:"clearData",value:function(i){var t=this.myDB.db.transaction(i,"readwrite").objectStore(i);t.clear()}}]),n}(),Ro=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],Ao=["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"],Lo=["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"],ot="data-xgplayerid";function Ur(n,a,i){for(var t=arguments.length,e=new Array(t>3?t-3:0),r=3;r<t;r++)e[r-3]=arguments[r];var s=a.call.apply(a,[n].concat(e));!i||typeof i!="function"||(s&&s.then?s.then(function(){for(var o=arguments.length,u=new Array(o),l=0;l<o;l++)u[l]=arguments[l];i.call.apply(i,[n].concat(u))}):i.call.apply(i,[n].concat(e)))}function Ci(n,a){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{pre:null,next:null};return this.__hooks||(this.__hooks={}),!this.__hooks[n]&&(this.__hooks[n]=null),(function(){var t=arguments,e=this;if(i.pre)try{var r;(r=i.pre).call.apply(r,[this].concat(Array.prototype.slice.call(arguments)))}catch(u){throw u.message="[pluginName: ".concat(this.pluginName,":").concat(n,":pre error] >> ").concat(u.message),u}if(this.__hooks&&this.__hooks[n])try{var s,o=(s=this.__hooks[n]).call.apply(s,[this,this].concat(Array.prototype.slice.call(arguments)));o?o.then?o.then(function(u){u!==!1&&Ur.apply(void 0,[e,a,i.next].concat(We(t)))}).catch(function(u){throw u}):Ur.apply(void 0,[this,a,i.next].concat(Array.prototype.slice.call(arguments))):o===void 0&&Ur.apply(void 0,[this,a,i.next].concat(Array.prototype.slice.call(arguments)))}catch(u){throw u.message="[pluginName: ".concat(this.pluginName,":").concat(n,"] >> ").concat(u.message),u}else Ur.apply(void 0,[this,a,i.next].concat(Array.prototype.slice.call(arguments)))}).bind(this)}function Ti(n,a){var i=this.__hooks;if(i)return i.hasOwnProperty(n)?(i&&(i[n]=a),!0):(console.warn("has no supported hook which name [".concat(n,"]")),!1)}function Si(n,a){var i=this.__hooks;i&&delete i[n]}function Do(n){if(!(!this.plugins||!this.plugins[n.toLowerCase()])){for(var a=this.plugins[n.toLowerCase()],i=arguments.length,t=new Array(i>1?i-1:0),e=1;e<i;e++)t[e-1]=arguments[e];return a.useHooks&&a.useHooks.apply(a,t)}}function $o(n){if(!(!this.plugins||!this.plugins[n.toLowerCase()])){var a=this.plugins[n.toLowerCase()];if(a){for(var i=arguments.length,t=new Array(i>1?i-1:0),e=1;e<i;e++)t[e-1]=arguments[e];return a.removeHooks&&a.removeHooks.apply(a,t)}}}function sf(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];n.__hooks={},a&&a.map(function(i){n.__hooks[i]=null}),Object.defineProperty(n,"hooks",{get:function(){return n.__hooks&&Object.keys(n.__hooks).map(function(t){if(n.__hooks[t])return t})}})}function of(n){n.__hooks=null}function Lt(n,a,i){for(var t=arguments.length,e=new Array(t>3?t-3:0),r=3;r<t;r++)e[r-3]=arguments[r];if(n.__hooks&&n.__hooks[a]){var s,o=(s=n.__hooks[a]).call.apply(s,[n,n].concat(e));if(o&&o.then)o.then(function(u){return u===!1?null:i.call.apply(i,[n,n].concat(e))}).catch(function(u){console.warn("[runHooks]".concat(a," reject"),u.message)});else if(o!==!1)return i.call.apply(i,[n,n].concat(e))}else return i.call.apply(i,[n,n].concat(e))}function on(n,a){A.logError("[".concat(n,"] event or callback cant be undefined or null when call ").concat(a))}var Ye=function(){function n(a){E(this,n),h.checkIsFunction(this.beforeCreate)&&this.beforeCreate(a),sf(this),this.__args=a,this.__events={},this.__onceEvents={},this.config=a.config||{},this.player=null,this.playerConfig={},this.pluginName="",this.__init(a)}return k(n,[{key:"beforeCreate",value:function(i){}},{key:"afterCreate",value:function(){}},{key:"beforePlayerInit",value:function(){}},{key:"onPluginsReady",value:function(){}},{key:"afterPlayerInit",value:function(){}},{key:"destroy",value:function(){}},{key:"__init",value:function(i){this.player=i.player,this.playerConfig=i.player&&i.player.config,this.pluginName=i.pluginName?i.pluginName.toLowerCase():this.constructor.pluginName.toLowerCase(),this.logger=i.player&&i.player.logger}},{key:"updateLang",value:function(i){i||(i=this.lang)}},{key:"lang",get:function(){return this.player.lang}},{key:"i18n",get:function(){return this.player.i18n}},{key:"i18nKeys",get:function(){return this.player.i18nKeys}},{key:"domEventType",get:function(){var i=h.checkTouchSupport()?"touch":"mouse";return this.playerConfig&&(this.playerConfig.domEventType==="touch"||this.playerConfig.domEventType==="mouse")&&(i=this.playerConfig.domEventType),i}},{key:"on",value:function(i,t){var e=this;if(!i||!t||!this.player){on(this.pluginName,"plugin.on(event, callback)");return}typeof i=="string"?(this.__events[i]=t,this.player.on(i,t)):Array.isArray(i)&&i.forEach(function(r){e.__events[r]=t,e.player.on(r,t)})}},{key:"once",value:function(i,t){var e=this;if(!i||!t||!this.player){on(this.pluginName,"plugin.once(event, callback)");return}typeof i=="string"?(this.__onceEvents[i]=t,this.player.once(i,t)):Array.isArray(i)&&i.forEach(function(r){e.__onceEvents[r]=t,e.player.once(i,t)})}},{key:"off",value:function(i,t){var e=this;if(!i||!t||!this.player){on(this.pluginName,"plugin.off(event, callback)");return}typeof i=="string"?(delete this.__events[i],this.player.off(i,t)):Array.isArray(i)&&i.forEach(function(r){delete e.__events[i],e.player.off(r,t)})}},{key:"offAll",value:function(){var i=this;["__events","__onceEvents"].forEach(function(t){Object.keys(i[t]).forEach(function(e){i[t][e]&&i.off(e,i[t][e]),e&&delete i[t][e]})}),this.__events={},this.__onceEvents={}}},{key:"emit",value:function(i){var t;if(this.player){for(var e=arguments.length,r=new Array(e>1?e-1:0),s=1;s<e;s++)r[s-1]=arguments[s];(t=this.player).emit.apply(t,[i].concat(r))}}},{key:"emitUserAction",value:function(i,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.player){var r=V(V({},e),{},{pluginName:this.pluginName});this.player.emitUserAction(i,t,r)}}},{key:"hook",value:function(i,t){return Ci.call.apply(Ci,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(i,t){for(var e=arguments.length,r=new Array(e>2?e-2:0),s=2;s<e;s++)r[s-2]=arguments[s];return Ti.call.apply(Ti,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removeHooks",value:function(i,t){for(var e=arguments.length,r=new Array(e>2?e-2:0),s=2;s<e;s++)r[s-2]=arguments[s];return Si.call.apply(Si,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"registerPlugin",value:function(i){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";if(this.player)return e&&(t.pluginName=e),this.player.registerPlugin({plugin:i,options:t})}},{key:"getPlugin",value:function(i){return this.player?this.player.getPlugin(i):null}},{key:"__destroy",value:function(){var i=this,t=this.player,e=this.pluginName;this.offAll(),h.clearAllTimers(this),h.checkIsFunction(this.destroy)&&this.destroy(),["player","playerConfig","pluginName","logger","__args","__hooks"].map(function(r){i[r]=null}),t.unRegisterPlugin(e),of(this)}}],[{key:"defineGetterOrSetter",value:function(i,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&Object.defineProperty(i,e,t[e])}},{key:"defaultConfig",get:function(){return{}}},{key:"pluginName",get:function(){return"pluginName"}}]),n}(),cd=9;if(typeof Element<"u"&&!Element.prototype.matches){var _t=Element.prototype;_t.matches=_t.matchesSelector||_t.mozMatchesSelector||_t.msMatchesSelector||_t.oMatchesSelector||_t.webkitMatchesSelector}function fd(n,a){for(;n&&n.nodeType!==cd;){if(typeof n.matches=="function"&&n.matches(a))return n;n=n.parentNode}}var hd=fd,vd=hd;function un(n,a,i,t,e){var r=gd.apply(this,arguments);return n.addEventListener(i,r,e),{destroy:function(){n.removeEventListener(i,r,e)}}}function dd(n,a,i,t,e){return typeof n.addEventListener=="function"?un.apply(null,arguments):typeof i=="function"?un.bind(null,document).apply(null,arguments):(typeof n=="string"&&(n=document.querySelectorAll(n)),Array.prototype.map.call(n,function(r){return un(r,a,i,t,e)}))}function gd(n,a,i,t){return function(e){e.delegateTarget=vd(e.target,a),e.delegateTarget&&t.call(n,e)}}var pd=dd;const No=us(pd);var md={CONTROLS:"controls",ROOT:"root"},B={ROOT:"root",ROOT_LEFT:"rootLeft",ROOT_RIGHT:"rootRight",ROOT_TOP:"rootTop",CONTROLS_LEFT:"controlsLeft",CONTROLS_RIGTH:"controlsRight",CONTROLS_RIGHT:"controlsRight",CONTROLS_CENTER:"controlsCenter",CONTROLS:"controls"};function ln(n){return n?n.indexOf&&/^(?:http|data:|\/)/.test(n):!1}function yd(n,a){return Q(n)==="object"&&n.class&&typeof n.class=="string"?"".concat(a," ").concat(n.class):a}function _d(n,a){return Q(n)==="object"&&n.attr&&Q(n.attr)==="object"&&Object.keys(n.attr).map(function(i){a[i]=n.attr[i]}),a}function Mo(n,a){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},e=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",r=null;if(n instanceof window.Element)return h.addClass(n,i),Object.keys(t).map(function(s){n.setAttribute(s,t[s])}),n;if(ln(n)||ln(n.url))return t.src=ln(n)?n:n.url||"",r=h.createDom(n.tag||"img","",t,"xg-img ".concat(i)),r;if(typeof n=="function")try{return r=n(),r instanceof window.Element?(h.addClass(r,i),Object.keys(t).map(function(s){r.setAttribute(s,t[s])}),r):(A.logWarn("warn>>icons.".concat(a," in config of plugin named [").concat(e,"] is a function mast return an Element Object")),null)}catch(s){return A.logError("Plugin named [".concat(e,"]:createIcon"),s),null}return typeof n=="string"?h.createDomFromHtml(n,t,i):(A.logWarn("warn>>icons.".concat(a," in config of plugin named [").concat(e,"] is invalid")),null)}function bd(n,a){var i=a.config.icons||a.playerConfig.icons;Object.keys(n).map(function(t){var e=n[t],r=e&&e.class?e.class:"",s=e&&e.attr?e.attr:{},o=null;i&&i[t]&&(r=yd(i[t],r),s=_d(i[t],s),o=Mo(i[t],t,r,s,a.pluginName)),!o&&e&&(o=Mo(e.icon?e.icon:e,s,r,{},a.pluginName)),a.icons[t]=o})}function Cd(n,a){Object.keys(n).map(function(i){Object.defineProperty(a.langText,i,{get:function(){var e=a.lang,r=a.i18n;return r[i]?r[i]:n[i]&&n[i][e]||""}})})}var O=function(n){x(i,n);var a=P(i);function i(){var t,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return E(this,i),t=a.call(this,e),t.__delegates=[],t}return k(i,[{key:"__init",value:function(e){if(I(w(i.prototype),"__init",this).call(this,e),!!e.root){var r=e.root,s=null;this.icons={},this.root=null,this.parent=null;var o=this.registerIcons()||{};bd(o,this),this.langText={};var u=this.registerLanguageTexts()||{};Cd(u,this);var l="";try{l=this.render()}catch(v){throw A.logError("Plugin:".concat(this.pluginName,":render"),v),new Error("Plugin:".concat(this.pluginName,":render:").concat(v.message))}if(l)s=i.insert(l,r,e.index),s.setAttribute("data-index",e.index);else if(e.tag)s=h.createDom(e.tag,"",e.attr,e.name),s.setAttribute("data-index",e.index),r.appendChild(s);else return;this.root=s,this.parent=r;var c=this.config.attr||{},f=this.config.style||{};this.setAttr(c),this.setStyle(f),this.config.index&&this.root.setAttribute("data-index",this.config.index),this.__registerChildren()}}},{key:"__registerChildren",value:function(){var e=this;if(this.root){this._children=[];var r=this.children();r&&Q(r)==="object"&&Object.keys(r).length>0&&Object.keys(r).map(function(s){var o=s,u=r[o],l={root:e.root},c,f;typeof u=="function"?(c=e.config[o]||{},f=u):Q(u)==="object"&&typeof u.plugin=="function"&&(c=u.options?h.deepCopy(e.config[o]||{},u.options):e.config[o]||{},f=u.plugin),l.config=c,c.index!==void 0&&(l.index=c.index),c.root&&(l.root=c.root),e.registerPlugin(f,l,o)})}}},{key:"updateLang",value:function(e){e||(e=this.lang);function r(l,c){for(var f=0;f<l.children.length;f++)l.children[f].children.length>0?r(l.children[f],c):c(l.children[f])}var s=this.root,o=this.i18n,u=this.langText;s&&r(s,function(l){var c=l.getAttribute&&l.getAttribute("lang-key");if(c){var f=o[c.toUpperCase()]||u[c];f&&(l.innerHTML=typeof f=="function"?f(e):f)}})}},{key:"lang",get:function(){return this.player.lang}},{key:"changeLangTextKey",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",s=this.i18n||{},o=this.langText;e.setAttribute&&e.setAttribute("lang-key",r);var u=s[r]||o[r]||"";u&&(e.innerHTML=u)}},{key:"plugins",value:function(){return this._children}},{key:"children",value:function(){return{}}},{key:"registerPlugin",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";r.root=r.root||this.root;var o=I(w(i.prototype),"registerPlugin",this).call(this,e,r,s);return this._children.push(o),o}},{key:"registerIcons",value:function(){return{}}},{key:"registerLanguageTexts",value:function(){return{}}},{key:"find",value:function(e){if(this.root)return this.root.querySelector(e)}},{key:"bind",value:function(e,r,s){var o=this;if(arguments.length<3&&typeof r=="function")Array.isArray(e)?e.forEach(function(l){o.bindEL(l,r)}):this.bindEL(e,r);else{var u=i.delegate.call(this,this.root,e,r,s);this.__delegates=this.__delegates.concat(u)}}},{key:"unbind",value:function(e,r){var s=this;if(arguments.length<3&&typeof r=="function")Array.isArray(e)?e.forEach(function(l){s.unbindEL(l,r)}):this.unbindEL(e,r);else for(var o="".concat(e,"_").concat(r),u=0;u<this.__delegates.length;u++)if(this.__delegates[u].key===o){this.__delegates[u].destroy(),this.__delegates.splice(u,1);break}}},{key:"setStyle",value:function(e,r){var s=this;if(this.root){if(h.typeOf(e)==="String")return this.root.style[e]=r;h.typeOf(e)==="Object"&&Object.keys(e).map(function(o){s.root.style[o]=e[o]})}}},{key:"setAttr",value:function(e,r){var s=this;if(this.root){if(h.typeOf(e)==="String")return this.root.setAttribute(e,r);h.typeOf(e)==="Object"&&Object.keys(e).map(function(o){s.root.setAttribute(o,e[o])})}}},{key:"setHtml",value:function(e,r){this.root&&(this.root.innerHTML=e,typeof r=="function"&&r())}},{key:"bindEL",value:function(e,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.root&&"on".concat(e)in this.root&&typeof r=="function"&&this.root.addEventListener(e,r,s)}},{key:"unbindEL",value:function(e,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.root&&"on".concat(e)in this.root&&typeof r=="function"&&this.root.removeEventListener(e,r,s)}},{key:"show",value:function(e){if(this.root){this.root.style.display=e!==void 0?e:"block";var r=window.getComputedStyle(this.root,null),s=r.getPropertyValue("display");if(s==="none")return this.root.style.display="block"}}},{key:"hide",value:function(){this.root&&(this.root.style.display="none")}},{key:"appendChild",value:function(e,r){if(!this.root)return null;if(arguments.length<2&&arguments[0]instanceof window.Element)return this.root.appendChild(arguments[0]);if(!r||!(r instanceof window.Element))return null;try{return typeof e=="string"?this.find(e).appendChild(r):e.appendChild(r)}catch(s){return A.logError("Plugin:appendChild",s),null}}},{key:"render",value:function(){return""}},{key:"destroy",value:function(){}},{key:"__destroy",value:function(){var e=this,r=this.player;this.__delegates.map(function(s){s.destroy()}),this.__delegates=[],this._children instanceof Array&&(this._children.map(function(s){r.unRegisterPlugin(s.pluginName)}),this._children=null),this.root&&(this.root.hasOwnProperty("remove")?this.root.remove():this.root.parentNode&&this.root.parentNode.removeChild(this.root)),I(w(i.prototype),"__destroy",this).call(this),this.icons={},["root","parent"].map(function(s){e[s]=null})}}],[{key:"insert",value:function(e,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=r.children.length,u=Number(s),l=e instanceof window.Node;if(o){for(var c=0,f=null,v="";c<o;c++){f=r.children[c];var d=Number(f.getAttribute("data-index"));if(d>=u){v="beforebegin";break}else d<u&&(v="afterend")}return l?v==="afterend"?r.appendChild(e):r.insertBefore(e,f):f.insertAdjacentHTML(v,e),v==="afterend"?r.children[r.children.length-1]:r.children[c]}else return l?r.appendChild(e):r.insertAdjacentHTML("beforeend",e),r.children[r.children.length-1]}},{key:"defaultConfig",get:function(){return{}}},{key:"delegate",value:function(e,r,s,o){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,l=[];if(e instanceof window.Node&&typeof o=="function")if(Array.isArray(s))s.forEach(function(f){var v=No(e,r,f,o,u);v.key="".concat(r,"_").concat(f),l.push(v)});else{var c=No(e,r,s,o,u);c.key="".concat(r,"_").concat(s),l.push(c)}return l}},{key:"ROOT_TYPES",get:function(){return md}},{key:"POSITIONS",get:function(){return B}}]),i}(Ye),Td=function(){function n(){var a=this;if(E(this,n),_(this,"__trigger",function(i){var t=new Date().getTime();a.timeStamp=t;for(var e=0;e<i.length;e++)a.__runHandler(i[e].target)}),this.__handlers=[],this.timeStamp=0,this.observer=null,!!window.ResizeObserver)try{this.observer=new window.ResizeObserver(zv(this.__trigger,100,{trailing:!0})),this.timeStamp=new Date().getTime()}catch(i){console.error(i)}}return k(n,[{key:"addObserver",value:function(i,t){if(this.observer){this.observer&&this.observer.observe(i);for(var e=i.getAttribute(ot),r=this.__handlers,s=-1,o=0;o<r.length;o++)r[o]&&i===r[o].target&&(s=o);s>-1?this.__handlers[s].handler=t:this.__handlers.push({target:i,handler:t,playerId:e})}}},{key:"unObserver",value:function(i){var t=-1;this.__handlers.map(function(e,r){i===e.target&&(t=r)});try{this.observer&&this.observer.unobserve(i)}catch{}this.observer&&this.observer.unobserve(i),t>-1&&this.__handlers.splice(t,1)}},{key:"destroyObserver",value:function(){this.observer&&this.observer.disconnect(),this.observer=null,this.__handlers=null}},{key:"__runHandler",value:function(i){for(var t=this.__handlers,e=0;e<t.length;e++)if(t[e]&&i===t[e].target){try{t[e].handler(i)}catch(r){console.error(r)}return!0}return!1}}]),n}(),cr=null;function Sd(n,a){return cr||(cr=new Td),cr.addObserver(n,a),cr}function Ed(n,a){cr.unObserver(n,a)}var W={pluginGroup:{},init:function(a){var i=a._pluginInfoId;i||(i=new Date().getTime(),a._pluginInfoId=i),!a.config.closeResizeObserver&&Sd(a.root,function(){a.resize()}),Object.keys(this.pluginGroup).length===0&&(a.isUserActive=!0),this.pluginGroup[i]={_player:a,_originalOptions:a.config||{},_plugins:{}}},checkPlayerRoot:function(a){if(this.pluginGroup){for(var i=Object.keys(this.pluginGroup),t=0;t<i.length;t++){var e=this.pluginGroup[i[t]]._player;if(e.root===a)return e}return null}return null},formatPluginInfo:function(a,i){var t=null,e=null;return a.plugin&&typeof a.plugin=="function"?(t=a.plugin,e=a.options):(t=a,e={}),i&&(e.config=i||{}),{PLUFGIN:t,options:e}},checkPluginIfExits:function(a,i){for(var t=0;t<i.length;t++)if(a.toLowerCase()===i[t].pluginName.toLowerCase())return!0;return!1},getRootByConfig:function(a,i){for(var t=Object.keys(i),e=null,r=0;r<t.length;r++)if(a.toLowerCase()===t[r].toLowerCase()){e=i[t[r]];break}return h.typeOf(e)==="Object"?{root:e.root,position:e.position}:{}},lazyRegister:function(a,i){var t=this,e=i.timeout||1500;return Promise.race([i.loader().then(function(r){var s;r&&r.__esModule?s=r.default:s=r,t.register(a,s,r.options)}),new Promise(function(r,s){setTimeout(function(){s(new Error("timeout"))},e)})])},register:function(a,i){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!(!a||!i||typeof i!="function"||i.prototype===void 0)){var e=a._pluginInfoId;if(!(!e||!this.pluginGroup[e])){this.pluginGroup[e]._plugins||(this.pluginGroup[e]._plugins={});var r=this.pluginGroup[e]._plugins,s=this.pluginGroup[e]._originalOptions;t.player=this.pluginGroup[e]._player;var o=t.pluginName||i.pluginName;if(!o)throw new Error("The property pluginName is necessary");if(i.isSupported&&!i.isSupported(a.config.mediaType,a.config.codecType)){console.warn("not supported plugin [".concat(o,"]"));return}t.config||(t.config={});for(var u=Object.keys(s),l=0;l<u.length;l++)if(o.toLowerCase()===u[l].toLowerCase()){var c=s[u[l]];h.typeOf(c)==="Object"?t.config=Object.assign({},t.config,s[u[l]]):h.typeOf(c)==="Boolean"&&(t.config.disable=!c);break}i.defaultConfig&&Object.keys(i.defaultConfig).forEach(function(v){typeof t.config[v]>"u"&&(t.config[v]=i.defaultConfig[v])}),t.root?typeof t.root=="string"&&(t.root=a[t.root]):t.root=a.root,t.index=t.config.index||0;try{r[o.toLowerCase()]&&(this.unRegister(e,o.toLowerCase()),console.warn("the is one plugin with same pluginName [".concat(o,"] exist, destroy the old instance")));var f=new i(t);return r[o.toLowerCase()]=f,r[o.toLowerCase()].func=i,f&&typeof f.afterCreate=="function"&&f.afterCreate(),f}catch(v){throw console.error(v),v}}}},unRegister:function(a,i){a._pluginInfoId&&(a=a._pluginInfoId),i=i.toLowerCase();try{var t=this.pluginGroup[a]._plugins[i];t&&(t.pluginName&&t.__destroy(),delete this.pluginGroup[a]._plugins[i])}catch(e){console.error("[unRegister:".concat(i,"] cgid:[").concat(a,"] error"),e)}},deletePlugin:function(a,i){var t=a._pluginInfoId;t&&this.pluginGroup[t]&&this.pluginGroup[t]._plugins&&delete this.pluginGroup[t]._plugins[i]},getPlugins:function(a){var i=a._pluginInfoId;return i&&this.pluginGroup[i]?this.pluginGroup[i]._plugins:{}},findPlugin:function(a,i){var t=a._pluginInfoId;if(!t||!this.pluginGroup[t])return null;var e=i.toLowerCase();return this.pluginGroup[t]._plugins[e]},beforeInit:function(a){var i=this;function t(e){return!e||!e.then?new Promise(function(r){r()}):e}return new Promise(function(e){if(i.pluginGroup){var r;return a._loadingPlugins&&a._loadingPlugins.length?r=Promise.all(a._loadingPlugins):r=Promise.resolve(),r.then(function(){var s=a._pluginInfoId;if(!i.pluginGroup[s]){e();return}var o=i.pluginGroup[s]._plugins,u=[];Object.keys(o).forEach(function(l){if(o[l]&&o[l].beforePlayerInit)try{var c=o[l].beforePlayerInit();u.push(t(c))}catch(f){throw u.push(t(null)),f}}),Promise.all([].concat(u)).then(function(){e()}).catch(function(l){console.error(l),e()})})}})},afterInit:function(a){var i=a._pluginInfoId;if(!(!i||!this.pluginGroup[i])){var t=this.pluginGroup[i]._plugins;Object.keys(t).forEach(function(e){t[e]&&t[e].afterPlayerInit&&t[e].afterPlayerInit()})}},setLang:function(a,i){var t=i._pluginInfoId;if(!(!t||!this.pluginGroup[t])){var e=this.pluginGroup[t]._plugins;Object.keys(e).forEach(function(r){if(e[r].updateLang)e[r].updateLang(a);else try{e[r].lang=a}catch{console.warn("".concat(r," setLang"))}})}},reRender:function(a){var i=this,t=a._pluginInfoId;if(!(!t||!this.pluginGroup[t])){var e=[],r=this.pluginGroup[t]._plugins;Object.keys(r).forEach(function(s){s!=="controls"&&r[s]&&(e.push({plugin:r[s].func,options:r[s].__args}),i.unRegister(t,s))}),e.forEach(function(s){i.register(a,s.plugin,s.options)})}},onPluginsReady:function(a){var i=a._pluginInfoId;if(!(!i||!this.pluginGroup[i])){var t=this.pluginGroup[i]._plugins||{};Object.keys(t).forEach(function(e){t[e].onPluginsReady&&typeof t[e].onPluginsReady=="function"&&t[e].onPluginsReady()})}},setCurrentUserActive:function(a,i){if(this.pluginGroup[a]){if(!i)return this.pluginGroup[a]._player.isUserActive=i,a;for(var t=Object.keys(this.pluginGroup),e=0;e<t.length;e++){var r=this.pluginGroup[t[e]];r&&r._player&&(this.pluginGroup[t[e]]._player.isUserActive=!1)}return this.pluginGroup[a]._player.isUserActive=i,a}},getCurrentUseActiveId:function(){if(this.pluginGroup){for(var a=Object.keys(this.pluginGroup),i=0;i<a.length;i++){var t=this.pluginGroup[a[i]];if(t&&t._player&&t._player.isUserActive)return a[i]}return null}},destroy:function(a){var i=a._pluginInfoId;if(this.pluginGroup[i]){Ed(a.root);for(var t=this.pluginGroup[i]._plugins,e=0,r=Object.keys(t);e<r.length;e++){var s=r[e];this.unRegister(i,s)}var o=a.isUseActive;if(delete this.pluginGroup[i],delete a._pluginInfoId,o){var u=Object.keys(this.pluginGroup);u.length>0&&this.setCurrentUserActive(u[u.length-1],!0)}}}},C={DEFAULT:"xgplayer",DEFAULT_SKIN:"xgplayer-skin-default",ENTER:"xgplayer-is-enter",PAUSED:"xgplayer-pause",PLAYING:"xgplayer-playing",ENDED:"xgplayer-ended",CANPLAY:"xgplayer-canplay",LOADING:"xgplayer-isloading",ERROR:"xgplayer-is-error",REPLAY:"xgplayer-replay",NO_START:"xgplayer-nostart",ACTIVE:"xgplayer-active",INACTIVE:"xgplayer-inactive",FULLSCREEN:"xgplayer-is-fullscreen",CSS_FULLSCREEN:"xgplayer-is-cssfullscreen",ROTATE_FULLSCREEN:"xgplayer-rotate-fullscreen",PARENT_ROTATE_FULLSCREEN:"xgplayer-rotate-parent",PARENT_FULLSCREEN:"xgplayer-fullscreen-parent",INNER_FULLSCREEN:"xgplayer-fullscreen-inner",NO_CONTROLS:"no-controls",FLEX_CONTROLS:"flex-controls",CONTROLS_FOLLOW:"controls-follow",CONTROLS_AUTOHIDE:"controls-autohide",TOP_BAR_AUTOHIDE:"top-bar-autohide",NOT_ALLOW_AUTOPLAY:"not-allow-autoplay",SEEKING:"seeking",PC:"xgplayer-pc",MOBILE:"xgplayer-mobile",MINI:"xgplayer-mini"};function Fo(){return{id:"",el:null,url:"",domEventType:"default",nullUrlStart:!1,width:600,height:337.5,fluid:!1,fitVideoSize:"fixed",videoFillMode:"auto",volume:.6,autoplay:!1,autoplayMuted:!1,loop:!1,isLive:!1,zoom:1,videoInit:!0,poster:"",isMobileSimulateMode:!1,defaultPlaybackRate:1,execBeforePluginsCall:null,allowSeekAfterEnded:!0,enableContextmenu:!0,closeVideoClick:!1,closeVideoDblclick:!1,closePlayerBlur:!1,closeDelayBlur:!1,leavePlayerTime:3e3,closePlayVideoFocus:!1,closePauseVideoFocus:!1,closeFocusVideoFocus:!0,closeControlsBlur:!0,topBarAutoHide:!0,videoAttributes:{},startTime:0,seekedStatus:"play",miniprogress:!1,disableSwipeHandler:function(){},enableSwipeHandler:function(){},ignores:[],whitelist:[],inactive:3e3,lang:Kv(),controls:!0,marginControls:!1,fullscreenTarget:null,screenShot:!1,rotate:!1,pip:!1,download:!1,mini:!1,cssFullscreen:!0,keyShortcut:!0,presets:[],plugins:[],playbackRate:1,definition:{list:[]},playsinline:!0,customDuration:0,timeOffset:0,icons:{},i18n:[],tabindex:0,thumbnail:null,videoConfig:{},isHideTips:!1,commonStyle:{progressColor:"",playedColor:"",cachedColor:"",sliderBtnStyle:{},volumeColor:""}}}var kd=function(a,i){var t,e,r;i.preset&&i.options?r=new i.preset(i.options,a.config):r=new i({},a.config);var s=r,o=s.plugins,u=o===void 0?[]:o,l=s.ignores,c=l===void 0?[]:l,f=s.icons,v=f===void 0?{}:f,d=s.i18n,g=d===void 0?[]:d;a.config.plugins||(a.config.plugins=[]),a.config.ignores||(a.config.ignores=[]),(t=a.config.plugins).push.apply(t,We(u)),(e=a.config.ignores).push.apply(e,We(c)),Object.keys(v).map(function(p){a.config.icons[p]||(a.config.icons[p]=v[p])});var m=a.config.i18n||[];g.push.apply(g,We(m)),a.config.i18n=g},wd=function(n){x(i,n);var a=P(i);function i(){var t;E(this,i);for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return t=a.call.apply(a,[this].concat(r)),_(y(t),"onMouseEnter",function(o){var u=y(t),l=u.player,c=u.playerConfig;c.closeControlsBlur&&l.focus({autoHide:!1})}),_(y(t),"onMouseLeave",function(){var o=y(t),u=o.player;u.focus()}),t}return k(i,[{key:"beforeCreate",value:function(e){!e.config.mode&&R.device==="mobile"&&(e.config.mode="flex"),e.player.config.marginControls&&(e.config.autoHide=!1)}},{key:"afterCreate",value:function(){var e=this,r=this.config,s=r.disable,o=r.height,u=r.mode;if(!s){u==="flex"&&this.player.addClass(C.FLEX_CONTROLS);var l={height:"".concat(o,"px")};Object.keys(l).map(function(f){e.root.style[f]=l[f]}),this.left=this.find("xg-left-grid"),this.center=this.find("xg-center-grid"),this.right=this.find("xg-right-grid"),this.innerRoot=this.find("xg-inner-controls"),this.on(yi,function(f){f?h.addClass(e.root,"mini-controls"):h.removeClass(e.root,"mini-controls")});var c=this.playerConfig.isMobileSimulateMode;R.device!=="mobile"&&c!=="mobile"&&(this.bind("mouseenter",this.onMouseEnter),this.bind("mouseleave",this.onMouseLeave))}}},{key:"focus",value:function(){this.player.focus({autoHide:!1})}},{key:"focusAwhile",value:function(){this.player.focus({autoHide:!0})}},{key:"blur",value:function(){this.player.blur({ignorePaused:!0})}},{key:"recoverAutoHide",value:function(){this.config.autoHide&&h.addClass(this.root,C.CONTROLS_AUTOHIDE)}},{key:"pauseAutoHide",value:function(){h.removeClass(this.root,C.CONTROLS_AUTOHIDE)}},{key:"show",value:function(){h.addClass(this.root,"show")}},{key:"hide",value:function(){h.removeClass(this.root,"show")}},{key:"mode",get:function(){return this.config.mode}},{key:"registerPlugin",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;if(this.root){var o=e.defaultConfig||{};if(!r.root){var u=r.position?r.position:r.config&&r.config.position?r.config.position:o.position;switch(u){case B.CONTROLS_LEFT:r.root=this.left;break;case B.CONTROLS_RIGHT:r.root=this.right;break;case B.CONTROLS_CENTER:r.root=this.center;break;case B.CONTROLS:r.root=this.root;break;default:r.root=this.left}return I(w(i.prototype),"registerPlugin",this).call(this,e,r,s)}}}},{key:"destroy",value:function(){R.device!=="mobile"&&(this.unbind("mouseenter",this.onMouseEnter),this.unbind("mouseleave",this.onMouseLeave))}},{key:"render",value:function(){var e=this.config,r=e.mode,s=e.autoHide,o=e.initShow,u=e.disable;if(!u){var l=h.classNames({"xgplayer-controls":!0},{"flex-controls":r==="flex"},{"bottom-controls":r==="bottom"},_({},C.CONTROLS_AUTOHIDE,s),{"xgplayer-controls-initshow":o||!s});return'<xg-controls class="'.concat(l,`" unselectable="on" onselectstart="return false">
    <xg-inner-controls class="xg-inner-controls xg-pos">
      <xg-left-grid class="xg-left-grid">
      </xg-left-grid>
      <xg-center-grid class="xg-center-grid"></xg-center-grid>
      <xg-right-grid class="xg-right-grid">
      </xg-right-grid>
    </xg-inner-controls>
    </xg-controls>`)}}}],[{key:"pluginName",get:function(){return"controls"}},{key:"defaultConfig",get:function(){return{disable:!1,autoHide:!0,mode:"",initShow:!1}}}]),i}(O),Id={LANG:"en",TEXT:{ERROR_TYPES:{network:{code:1,msg:"video download error"},mse:{code:2,msg:"stream append error"},parse:{code:3,msg:"parsing error"},format:{code:4,msg:"wrong format"},decoder:{code:5,msg:"decoding error"},runtime:{code:6,msg:"grammatical errors"},timeout:{code:7,msg:"play timeout"},other:{code:8,msg:"other errors"}},HAVE_NOTHING:"There is no information on whether audio/video is ready",HAVE_METADATA:"Audio/video metadata is ready ",HAVE_CURRENT_DATA:"Data about the current play location is available, but there is not enough data to play the next frame/millisecond",HAVE_FUTURE_DATA:"Current and at least one frame of data is available",HAVE_ENOUGH_DATA:"The available data is sufficient to start playing",NETWORK_EMPTY:"Audio/video has not been initialized",NETWORK_IDLE:"Audio/video is active and has been selected for resources, but no network is used",NETWORK_LOADING:"The browser is downloading the data",NETWORK_NO_SOURCE:"No audio/video source was found",MEDIA_ERR_ABORTED:"The fetch process is aborted by the user",MEDIA_ERR_NETWORK:"An error occurred while downloading",MEDIA_ERR_DECODE:"An error occurred while decoding",MEDIA_ERR_SRC_NOT_SUPPORTED:"Audio/video is not supported",REPLAY:"Replay",ERROR:"Network is offline",PLAY_TIPS:"Play",PAUSE_TIPS:"Pause",PLAYNEXT_TIPS:"Play next",DOWNLOAD_TIPS:"Download",ROTATE_TIPS:"Rotate",RELOAD_TIPS:"Reload",FULLSCREEN_TIPS:"Fullscreen",EXITFULLSCREEN_TIPS:"Exit fullscreen",CSSFULLSCREEN_TIPS:"Cssfullscreen",EXITCSSFULLSCREEN_TIPS:"Exit cssfullscreen",TEXTTRACK:"Caption",PIP:"PIP",SCREENSHOT:"Screenshot",LIVE:"LIVE",OFF:"Off",OPEN:"Open",MINI_DRAG:"Click and hold to drag",MINISCREEN:"Miniscreen",REFRESH_TIPS:"Please Try",REFRESH:"Refresh",FORWARD:"forward",LIVE_TIP:"Live"}},ne={lang:{},langKeys:[],textKeys:[]};function Cr(n,a){return Object.keys(a).forEach(function(i){var t=h.typeOf(a[i]),e=h.typeOf(n[i]);if(t==="Array"){var r;e!=="Array"&&(n[i]=[]),(r=n[i]).push.apply(r,We(a[i]))}else t==="Object"?(e!=="Object"&&(n[i]={}),Cr(n[i],a[i])):n[i]=a[i]}),n}function uf(){Object.keys(ne.lang.en).map(function(n){ne.textKeys[n]=n})}function xd(n,a){var i=[];if(a||(a=ne),!!a.lang){h.typeOf(n)!=="Array"?i=Object.keys(n).map(function(r){var s=r==="zh"?"zh-cn":r;return{LANG:s,TEXT:n[r]}}):i=n;var t=a,e=t.lang;i.map(function(r){r.LANG==="zh"&&(r.LANG="zh-cn"),e[r.LANG]?Cr(e[r.LANG]||{},r.TEXT||{}):Cs(r,a)}),uf()}}function Cs(n,a){var i=n.LANG;if(a||(a=ne),!!a.lang){var t=n.TEXT||{};i==="zh"&&(i="zh-cn"),a.lang[i]?Cr(a.lang[i],t):(a.langKeys.push(i),a.lang[i]=t),uf()}}function Pd(n){var a,i={lang:{},langKeys:[],textKeys:{},pId:n};return Cr(i.lang,ne.lang),(a=i.langKeys).push.apply(a,We(ne.langKeys)),Cr(i.textKeys,ne.textKeys),i}Cs(Id);var Dt={get textKeys(){return ne.textKeys},get langKeys(){return ne.langKeys},get lang(){var n={};return ne.langKeys.map(function(a){n[a]=ne.lang[a]}),ne.lang["zh-cn"]&&(n.zh=ne.lang["zh-cn"]||{}),n},extend:xd,use:Cs,init:Pd},D={INITIAL:1,READY:2,ATTACHING:3,ATTACHED:4,NOTALLOW:5,RUNNING:6,ENDED:7,DESTROYED:8},Bo=["ERROR","INITIAL","READY","ATTACHING","ATTACHED","NOTALLOW","RUNNING","ENDED","DESTROYED"],Od=["play","pause","replay","retry"],Uo=0,Ho=0,Ts=function(n){x(i,n);var a=P(i);function i(t){var e;E(this,i);var r=h.deepMerge(Fo(),t);e=a.call(this,r),_(y(e),"canPlayFunc",function(){if(e.config){var g=e.config,m=g.autoplay,p=g.startTime,b=g.defaultPlaybackRate;A.logInfo("player","canPlayFunc, startTime",p),p&&(e.currentTime=p>e.duration?e.duration:p,e.config.startTime=0),e.playbackRate=b,(m||e._useAutoplay)&&e.mediaPlay(),e.off(Ce,e.canPlayFunc),e.removeClass(C.ENTER)}}),_(y(e),"onFullscreenChange",function(g,m){var p=function(){h.setTimeout(y(e),function(){e.resize()},100)},b=h.getFullScreenEl();e._fullActionFrom?e._fullActionFrom="":e.emit(bi,{eventType:"system",action:"switch_fullscreen",pluginName:"player",currentTime:e.currentTime,duration:e.duration,props:[{prop:"fullscreen",from:!0,to:!1}]});var T=Yv(b,e.playerId,ot);if(m||b&&(b===e._fullscreenEl||T))p(),!e.config.closeFocusVideoFocus&&e.media.focus(),e.fullscreen=!0,e.changeFullStyle(e.root,b,C.FULLSCREEN),e.emit(je,!0,e._fullScreenOffset),e.cssfullscreen&&e.exitCssFullscreen();else if(e.fullscreen){p();var S=y(e),$=S._fullScreenOffset,L=S.config;L.needFullscreenScroll?(window.scrollTo($.left,$.top),h.setTimeout(y(e),function(){e.fullscreen=!1,e._fullScreenOffset=null},100)):(!e.config.closeFocusVideoFocus&&e.media.focus(),e.fullscreen=!1,e._fullScreenOffset=null),e.cssfullscreen?e.removeClass(C.FULLSCREEN):e.recoverFullStyle(e.root,e._fullscreenEl,C.FULLSCREEN),e._fullscreenEl=null,e.emit(je,!1)}}),_(y(e),"_onWebkitbeginfullscreen",function(g){e._fullscreenEl=e.media,e.onFullscreenChange(g,!0)}),_(y(e),"_onWebkitendfullscreen",function(g){e.onFullscreenChange(g,!1)}),sf(y(e),Od),e.config=r,e._pluginInfoId=h.generateSessionId(),jv(y(e));var s=e.constructor.defaultPreset;if(e.config.presets.length){var o=e.config.presets.indexOf("default");o>=0&&s&&(e.config.presets[o]=s)}else s&&e.config.presets.push(s);e.userTimer=null,e.waitTimer=null,e._state=D.INITIAL,e.isError=!1,e._hasStart=!1,e.isSeeking=!1,e.isCanplay=!1,e._useAutoplay=!1,e.rotateDeg=0,e.isActive=!1,e.fullscreen=!1,e.cssfullscreen=!1,e.isRotateFullscreen=!1,e._fullscreenEl=null,e._cssfullscreenEl=null,e.curDefinition=null,e._orgCss="",e._fullScreenOffset=null,e._videoHeight=0,e._videoWidth=0,e._accPlayed={t:0,acc:0,loopAcc:0},e.innerContainer=null,e.controls=null,e.topBar=null,e.root=null,e.__i18n=Dt.init(e._pluginInfoId),R.os.isAndroid&&R.osVersion>0&&R.osVersion<6&&(e.config.autoplay=!1),e.database=new ld,e.isUserActive=!1;var u=e._initDOM();if(!u)return console.error(new Error("can't find the dom which id is ".concat(e.config.id," or this.config.el does not exist"))),ls(e);var l=e.config,c=l.definition,f=c===void 0?{}:c,v=l.url;if(!v&&f.list&&f.list.length>0){var d=f.list.find(function(g){return g.definition&&g.definition===f.defaultDefinition});d||(f.defaultDefinition=f.list[0].definition,d=f.list[0]),e.config.url=d.url,e.curDefinition=d}return e._bindEvents(),e._registerPresets(),e._registerPlugins(),W.onPluginsReady(y(e)),e.getInitDefinition(),e.setState(D.READY),h.setTimeout(y(e),function(){e.emit(gs)},0),e.onReady&&e.onReady(),(e.config.videoInit||e.config.autoplay)&&(!e.hasStart||e.state<D.ATTACHED)&&e.start(),e}return k(i,[{key:"_initDOM",value:function(){var e=this;if(this.root=this.config.id?document.getElementById(this.config.id):null,!this.root){var r=this.config.el;if(r&&r.nodeType===1)this.root=r;else return this.emit(Er,new cs("use",this.config.vid,{line:32,handle:"Constructor",msg:"container id can't be empty"})),console.error("this.confg.id or this.config.el can't be empty"),!1}var s=W.checkPlayerRoot(this.root);s&&(A.logWarn("The is an Player instance already exists in this.root, destroy it and reinitialize"),s.destroy()),this.root.setAttribute(ot,this.playerId),W.init(this),this._initBaseDoms();var o=this.constructor.XgVideoProxy;if(o&&this.mediaConfig.mediaType===o.mediaType){var u=this.innerContainer||this.root;this.detachVideoEvents(this.media);var l=new o(u,this.config,this.mediaConfig);this.attachVideoEvents(l),this.media=l}if(this.media.setAttribute(ot,this.playerId),this.config.controls){var c=this.config.controls.root||null,f=W.register(this,wd,{root:c});this.controls=f}var v=this.config.isMobileSimulateMode==="mobile"?"mobile":R.device;if(this.addClass("".concat(C.DEFAULT," ").concat(C.INACTIVE," xgplayer-").concat(v," ").concat(this.config.controls?"":C.NO_CONTROLS)),this.config.autoplay?this.addClass(C.ENTER):this.addClass(C.NO_START),this.config.fluid){var d=this.config,g=d.width,m=d.height;(typeof g!="number"||typeof m!="number")&&(g=600,m=337.5);var p={width:"100%",height:"0","max-width":"100%","padding-top":"".concat(m*100/g,"%")};Object.keys(p).forEach(function(b){e.root.style[b]=p[b]})}else["width","height"].forEach(function(b){e.config[b]&&(typeof e.config[b]!="number"?e.root.style[b]=e.config[b]:e.root.style[b]="".concat(e.config[b],"px"))});return!0}},{key:"_initBaseDoms",value:function(){this.topBar=null,this.leftBar=null,this.rightBar=null,this.config.marginControls&&(this.innerContainer=h.createDom("xg-video-container","",{"data-index":-1},"xg-video-container"),this.root.appendChild(this.innerContainer))}},{key:"_bindEvents",value:function(){var e=this;["focus","blur"].forEach(function(r){e.on(r,e["on"+r.charAt(0).toUpperCase()+r.slice(1)])}),Ro.forEach(function(r){document&&document.addEventListener(r,e.onFullscreenChange)}),R.os.isIos&&(this.media.addEventListener("webkitbeginfullscreen",this._onWebkitbeginfullscreen),this.media.addEventListener("webkitendfullscreen",this._onWebkitendfullscreen)),this.once(ft,this.resize),this.playFunc=function(){e.config.closeFocusVideoFocus||e.media.focus()},this.once(de,this.playFunc)}},{key:"_unbindEvents",value:function(){var e=this;this.root.removeEventListener("mousemove",this.mousemoveFunc),Ro.forEach(function(r){document.removeEventListener(r,e.onFullscreenChange)}),this.playFunc&&this.off(de,this.playFunc),this.off(Ce,this.canPlayFunc),this.media.removeEventListener("webkitbeginfullscreen",this._onWebkitbeginfullscreen),this.media.removeEventListener("webkitendfullscreen",this._onWebkitendfullscreen)}},{key:"_startInit",value:function(e){var r=this;if(this.media&&!((!e||e===""||h.typeOf(e)==="Array"&&e.length===0)&&(e="",this.emit(qc),A.logWarn("config.url is null, please get url and run player._startInit(url)"),this.config.nullUrlStart))){this._detachSourceEvents(this.media),h.typeOf(e)==="Array"&&e.length>0?this._attachSourceEvents(this.media,e):!this.media.src||this.media.src!==e?this.media.src=e:e||this.media.removeAttribute("src"),h.typeOf(this.config.volume)==="Number"&&(this.volume=this.config.volume);var s=this.innerContainer?this.innerContainer:this.root;this.media instanceof window.Element&&!s.contains(this.media)&&s.insertBefore(this.media,s.firstChild);var o=this.media.readyState;A.logInfo("_startInit readyState",o),this.config.autoplay&&(!(/^blob/.test(this.media.currentSrc)||/^blob/.test(this.media.src))&&this.load(),(R.os.isIpad||R.os.isPhone)&&this.mediaPlay()),o>=2?this.canPlayFunc():this.once(Ce,this.canPlayFunc),(!this.hasStart||this.state<D.ATTACHED)&&W.afterInit(this),this.hasStart=!0,this.setState(D.ATTACHED),h.setTimeout(this,function(){r.emit(Bi)},0)}}},{key:"_registerPlugins",value:function(){var e=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this._loadingPlugins=[];var s=this.config.ignores||[],o=this.config.plugins||[],u=this.config.i18n||[];r&&Dt.extend(u,this.__i18n);var l=s.join("||").toLowerCase().split("||"),c=this.plugins;o.forEach(function(f){try{var v=f.plugin?f.plugin.pluginName:f.pluginName;if(v&&l.indexOf(v.toLowerCase())>-1)return null;if(!r&&c[v.toLowerCase()])return;if(f.lazy&&f.loader){var d=W.lazyRegister(e,f);f.forceBeforeInit&&(d.then(function(){e._loadingPlugins.splice(e._loadingPlugins.indexOf(d),1)}).catch(function(g){A.logError("_registerPlugins:loadingPlugin",g),e._loadingPlugins.splice(e._loadingPlugins.indexOf(d),1)}),e._loadingPlugins.push(d));return}return e.registerPlugin(f)}catch(g){A.logError("_registerPlugins:",g)}})}},{key:"_registerPresets",value:function(){var e=this;this.config.presets.forEach(function(r){kd(e,r)})}},{key:"_getRootByPosition",value:function(e){var r=null;switch(e){case B.ROOT_RIGHT:this.rightBar||(this.rightBar=h.createPositionBar("xg-right-bar",this.root)),r=this.rightBar;break;case B.ROOT_LEFT:this.leftBar||(this.leftBar=h.createPositionBar("xg-left-bar",this.root)),r=this.leftBar;break;case B.ROOT_TOP:this.topBar||(this.topBar=h.createPositionBar("xg-top-bar",this.root),this.config.topBarAutoHide&&h.addClass(this.topBar,C.TOP_BAR_AUTOHIDE)),r=this.topBar;break;default:r=this.innerContainer||this.root;break}return r}},{key:"registerPlugin",value:function(e,r){var s=W.formatPluginInfo(e,r),o=s.PLUFGIN,u=s.options,l=this.config.plugins,c=W.checkPluginIfExits(o.pluginName,l);!c&&l.push(o);var f=W.getRootByConfig(o.pluginName,this.config);f.root&&(u.root=f.root),f.position&&(u.position=f.position);var v=u.position?u.position:u.config&&u.config.position||o.defaultConfig&&o.defaultConfig.position;return!u.root&&typeof v=="string"&&v.indexOf("controls")>-1?this.controls&&this.controls.registerPlugin(o,u,o.pluginName):(u.root||(u.root=this._getRootByPosition(v)),W.register(this,o,u))}},{key:"deregister",value:function(e){typeof e=="string"?W.unRegister(this,e):e instanceof Ye&&W.unRegister(this,e.pluginName)}},{key:"unRegisterPlugin",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this.deregister(e),r&&this.removePluginFromConfig(e)}},{key:"removePluginFromConfig",value:function(e){var r;if(typeof e=="string"?r=e:e instanceof Ye&&(r=e.pluginName),!!r)for(var s=this.config.plugins.length-1;s>-1;s--){var o=this.config.plugins[s];if(o.pluginName.toLowerCase()===r.toLowerCase()){this.config.plugins.splice(s,1);break}}}},{key:"plugins",get:function(){return W.getPlugins(this)}},{key:"getPlugin",value:function(e){var r=W.findPlugin(this,e);return r&&r.pluginName?r:null}},{key:"addClass",value:function(e){this.root&&(h.hasClass(this.root,e)||h.addClass(this.root,e))}},{key:"removeClass",value:function(e){this.root&&h.removeClass(this.root,e)}},{key:"hasClass",value:function(e){if(this.root)return h.hasClass(this.root,e)}},{key:"setAttribute",value:function(e,r){this.root&&this.root.setAttribute(e,r)}},{key:"removeAttribute",value:function(e,r){this.root&&this.root.removeAttribute(e,r)}},{key:"start",value:function(e){var r=this;if(!(this.state>D.ATTACHING))return!e&&!this.config.url&&this.getInitDefinition(),this.hasStart=!0,this.setState(D.ATTACHING),this._registerPlugins(!1),W.beforeInit(this).then(function(){if(r.config){e||(e=r.url||r.config.url);var s=r._startInit(e);return s}}).catch(function(s){throw s.fileName="player",s.lineNumber="236",A.logError("start:beforeInit:",s),s})}},{key:"switchURL",value:function(e,r){var s=this,o=e;h.typeOf(e)==="Object"&&(o=e.url);var u=this.currentTime,l=this.paused&&!this.isError;return this.src=o,new Promise(function(c,f){var v=function(m){s.off("timeupdate",d),s.off("canplay",d),f(m)},d=function(){s.currentTime=u,l&&s.once("canplay",function(){s.pause()}),s.off("error",v),c(!0)};if(s.once("error",v),!o){s.errorHandler("error",{code:6,message:"empty_src"});return}R.os.isAndroid?s.once("timeupdate",d):s.once("canplay",d),s.play()})}},{key:"videoPlay",value:function(){this.mediaPlay()}},{key:"mediaPlay",value:function(){var e=this;if(!this.hasStart&&this.state<D.ATTACHED){this.removeClass(C.NO_START),this.addClass(C.ENTER),this.start(),this._useAutoplay=!0;return}this.state<D.RUNNING&&(this.removeClass(C.NO_START),!this.isCanplay&&this.addClass(C.ENTER));var r=I(w(i.prototype),"play",this).call(this);return r!==void 0&&r&&r.then?r.then(function(){e.removeClass(C.NOT_ALLOW_AUTOPLAY),e.addClass(C.PLAYING),e.state<D.RUNNING&&(A.logInfo(">>>>playPromise.then"),e.setState(D.RUNNING),e.emit(lt))}).catch(function(s){if(A.logWarn(">>>>playPromise.catch",s.name),e.media&&e.media.error){e.onError(),e.removeClass(C.ENTER);return}s.name==="NotAllowedError"&&(e._errorTimer=h.setTimeout(e,function(){e._errorTimer=null,e.emit(ps),e.addClass(C.NOT_ALLOW_AUTOPLAY),e.removeClass(C.ENTER),e.pause(),e.setState(D.NOTALLOW)},0))}):(A.logWarn("video.play not return promise"),this.state<D.RUNNING&&(this.setState(D.RUNNING),this.removeClass(C.NOT_ALLOW_AUTOPLAY),this.removeClass(C.NO_START),this.removeClass(C.ENTER),this.addClass(C.PLAYING),this.emit(lt))),r}},{key:"mediaPause",value:function(){I(w(i.prototype),"pause",this).call(this)}},{key:"videoPause",value:function(){I(w(i.prototype),"pause",this).call(this)}},{key:"play",value:function(){var e=this;this.removeClass(C.PAUSED),Lt(this,"play",function(){e.mediaPlay()})}},{key:"pause",value:function(){var e=this;Lt(this,"pause",function(){I(w(i.prototype),"pause",e).call(e)})}},{key:"seek",value:function(e,r){var s=this;if(!(!this.media||Number.isNaN(Number(e)||!this.hasStart))){var o=this.config,u=o.isSeekedPlay,l=o.seekedStatus,c=r||(u?"play":l);e=e<0?0:e>this.duration?parseInt(this.duration,10):e,this.once(Ce,function(){switch(s.removeClass(C.ENTER),s.isSeeking=!1,c){case"play":s.play();break;case"pause":s.pause();break;default:!s.paused&&s.play()}}),this.state<D.RUNNING?(this.removeClass(C.NO_START),this.addClass(C.ENTER),this.currentTime=e,c==="play"&&this.play()):this.currentTime=e}}},{key:"getInitDefinition",value:function(){var e=this,r=this.config,s=r.definition,o=r.url;!o&&s&&s.list&&s.list.length>0&&s.defaultDefinition&&s.list.map(function(u){u.definition===s.defaultDefinition&&(e.config.url=u.url,e.curDefinition=u)})}},{key:"changeDefinition",value:function(e,r){var s=this,o=this.config.definition;if(Array.isArray(o==null?void 0:o.list)&&o.list.forEach(function(l){(e==null?void 0:e.definition)===l.definition&&(s.curDefinition=l)}),e!=null&&e.bitrate&&typeof e.bitrate!="number"&&(e.bitrate=parseInt(e.bitrate,10)||0),this.emit(_s,{from:r,to:e}),!this.hasStart){this.config.url=e.url;return}var u=this.switchURL(e.url,V({seamless:o.seamless!==!1&&typeof MediaSource<"u"&&typeof MediaSource.isTypeSupported=="function"},e));u&&u.then?u.then(function(){s.emit(xa,{from:r,to:e})}):this.emit(xa,{from:r,to:e})}},{key:"reload",value:function(){this.load(),this.reloadFunc=function(){this.play()},this.once(ft,this.reloadFunc)}},{key:"resetState",value:function(){var e=this,r=C.NOT_ALLOW_AUTOPLAY,s=C.PLAYING,o=C.NO_START,u=C.PAUSED,l=C.REPLAY,c=C.ENTER,f=C.ENDED,v=C.ERROR,d=C.LOADING,g=[r,s,o,u,l,c,f,v,d];this.hasStart=!1,this.isError=!1,this._useAutoplay=!1,this.mediaPause(),this._accPlayed.acc=0,this._accPlayed.t=0,this._accPlayed.loopAcc=0,g.forEach(function(m){e.removeClass(m)}),this.addClass(C.ENTER),this.emit(bs)}},{key:"reset",value:function(){var e=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],s=arguments.length>1?arguments[1]:void 0;this.resetState();var o=this.plugins;if(o&&(r.map(function(l){e.deregister(l)}),s)){var u=Fo();Object.keys(this.config).keys(function(l){e.config[l]!=="undefined"&&(l==="plugins"||l==="presets"||l==="el"||l==="id")&&(e.config[l]=u[l])})}}},{key:"destroy",value:function(){var e=this,r=this.innerContainer,s=this.root,o=this.media;if(!(!s||!o)){if(this.hasStart=!1,this._useAutoplay=!1,s.removeAttribute(ot),this.updateAcc("destroy"),this._unbindEvents(),this._detachSourceEvents(this.media),h.clearAllTimers(this),this.emit(ys),W.destroy(this),of(this),I(w(i.prototype),"destroy",this).call(this),this.fullscreen&&this._fullscreenEl===this.root&&this.exitFullscreen(),r)for(var u=r.children,l=0;l<u.length;l++)r.removeChild(u[l]);!r&&o instanceof window.Node&&s.contains(o)&&s.removeChild(o),["topBar","leftBar","rightBar","innerContainer"].map(function(f){e[f]&&s.removeChild(e[f]),e[f]=null});var c=s.className.split(" ");c.length>0?s.className=c.filter(function(f){return f.indexOf("xgplayer")<0}).join(" "):s.className="",this.removeAttribute("data-xgfill"),["isSeeking","isCanplay","isActive","cssfullscreen","fullscreen"].forEach(function(f){e[f]=!1})}}},{key:"replay",value:function(){var e=this;this.removeClass(C.ENDED),this.currentTime=0,this.isSeeking=!1,Lt(this,"replay",function(){e.once(Ce,function(){var r=e.mediaPlay();r&&r.catch&&r.catch(function(s){console.log(s)})}),e.play(),e.emit(ms),e.onPlay()})}},{key:"retry",value:function(){var e=this;this.removeClass(C.ERROR),this.addClass(C.LOADING),Lt(this,"retry",function(){var r=e.currentTime;e.src=e.config.url,!e.config.isLive&&(e.currentTime=r),e.once(Ce,function(){e.mediaPlay()})})}},{key:"changeFullStyle",value:function(e,r,s,o){e&&(o||(o=C.PARENT_FULLSCREEN),this._orgCss||(this._orgCss=h.filterStyleFromText(e)),h.addClass(e,s),r&&r!==e&&!this._orgPCss&&(this._orgPCss=h.filterStyleFromText(r),h.addClass(r,o),r.setAttribute(ot,this.playerId)))}},{key:"recoverFullStyle",value:function(e,r,s,o){o||(o=C.PARENT_FULLSCREEN),this._orgCss&&(h.setStyleFromCsstext(e,this._orgCss),this._orgCss=""),h.removeClass(e,s),r&&r!==e&&this._orgPCss&&(h.setStyleFromCsstext(r,this._orgPCss),this._orgPCss="",h.removeClass(r,o),r.removeAttribute(ot))}},{key:"getFullscreen",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.config.fullscreenTarget,r=this.root,s=this.media;e||(e=r),this._fullScreenOffset={top:h.scrollTop(),left:h.scrollLeft()},this._fullscreenEl=e,this._fullActionFrom="get";var o=h.getFullScreenEl();if(o===this._fullscreenEl){this.onFullscreenChange();return}try{for(var u=0;u<Ao.length;u++){var l=Ao[u];if(e[l]){var c=l==="webkitRequestFullscreen"?e.webkitRequestFullscreen(window.Element.ALLOW_KEYBOARD_INPUT):e[l]();return c&&c.then?c:Promise.resolve()}}return s.fullscreenEnabled||s.webkitSupportsFullscreen?(s.webkitEnterFullscreen(),Promise.resolve()):Promise.reject(new Error("call getFullscreen fail"))}catch{return Promise.reject(new Error("call getFullscreen fail"))}}},{key:"exitFullscreen",value:function(e){if(this.isRotateFullscreen&&this.exitRotateFullscreen(),!(!this._fullscreenEl&&!h.getFullScreenEl())){this.root;var r=this.media;this._fullActionFrom="exit";try{for(var s=0;s<Lo.length;s++){var o=Lo[s];if(document[o]){var u=document[o]();return u&&u.then?u:Promise.resolve()}}return r&&r.webkitSupportsFullscreen?(r.webkitExitFullScreen(),Promise.resolve()):Promise.reject(new Error("call exitFullscreen fail"))}catch{return Promise.reject(new Error("call exitFullscreen fail"))}}}},{key:"getCssFullscreen",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.config.fullscreenTarget;this.isRotateFullscreen?this.exitRotateFullscreen():this.fullscreen&&this.exitFullscreen();var r=e?"".concat(C.INNER_FULLSCREEN," ").concat(C.CSS_FULLSCREEN):C.CSS_FULLSCREEN;this.changeFullStyle(this.root,e,r);var s=this.config.fullscreen,o=s===void 0?{}:s,u=o.useCssFullscreen===!0||typeof o.useCssFullscreen=="function"&&o.useCssFullscreen();u&&(this.fullscreen=!0,this.emit(je,!0)),this._cssfullscreenEl=e,this.cssfullscreen=!0,this.emit(mi,!0)}},{key:"exitCssFullscreen",value:function(){var e=this._cssfullscreenEl?"".concat(C.INNER_FULLSCREEN," ").concat(C.CSS_FULLSCREEN):C.CSS_FULLSCREEN;if(!this.fullscreen)this.recoverFullStyle(this.root,this._cssfullscreenEl,e);else{var r=this.config.fullscreen,s=r===void 0?{}:r,o=s.useCssFullscreen===!0||typeof s.useCssFullscreen=="function"&&s.useCssFullscreen();o?(this.recoverFullStyle(this.root,this._cssfullscreenEl,e),this.fullscreen=!1,this.emit(je,!1)):this.removeClass(e)}this._cssfullscreenEl=null,this.cssfullscreen=!1,this.emit(mi,!1)}},{key:"getRotateFullscreen",value:function(e){this.cssfullscreen&&this.exitCssFullscreen(e);var r=e?"".concat(C.INNER_FULLSCREEN," ").concat(C.ROTATE_FULLSCREEN):C.ROTATE_FULLSCREEN;this._fullscreenEl=e||this.root,this.changeFullStyle(this.root,e,r,C.PARENT_ROTATE_FULLSCREEN),this.isRotateFullscreen=!0,this.fullscreen=!0,this.setRotateDeg(90),this.emit(je,!0)}},{key:"exitRotateFullscreen",value:function(e){var r=this._fullscreenEl!==this.root?"".concat(C.INNER_FULLSCREEN," ").concat(C.ROTATE_FULLSCREEN):C.ROTATE_FULLSCREEN;this.recoverFullStyle(this.root,this._fullscreenEl,r,C.PARENT_ROTATE_FULLSCREEN),this.isRotateFullscreen=!1,this.fullscreen=!1,this.setRotateDeg(0),this.emit(je,!1)}},{key:"setRotateDeg",value:function(e){window.orientation===90||window.orientation===-90?this.rotateDeg=0:this.rotateDeg=e}},{key:"focus",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{autoHide:!this.config.closeDelayBlur,delay:this.config.inactive};if(this.isActive){this.onFocus(e);return}this.emit(ds,V({paused:this.paused,ended:this.ended},e))}},{key:"blur",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{ignorePaused:!1};if(!this.isActive){this.onBlur(e);return}this.emit(Xc,V({paused:this.paused,ended:this.ended},e))}},{key:"onFocus",value:function(){var e=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=r.autoHide,o=s===void 0?!this.config.closePlayerBlur:s,u=r.delay,l=u===void 0?this.config.inactive:u;if(this.isActive=!0,this.removeClass(C.INACTIVE),this.userTimer&&(h.clearTimeout(this,this.userTimer),this.userTimer=null),!o){this.userTimer&&(h.clearTimeout(this,this.userTimer),this.userTimer=null);return}this.userTimer=h.setTimeout(this,function(){e.userTimer=null,e.blur()},l)}},{key:"onBlur",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.ignorePaused,s=r===void 0?!1:r;if(this.isActive){var o=this.config.closePauseVideoFocus;this.isActive=!1,(s||o||!this.paused&&!this.ended)&&this.addClass(C.INACTIVE)}}},{key:"onEmptied",value:function(){this.updateAcc("emptied")}},{key:"onCanplay",value:function(){this.removeClass(C.ENTER),this.removeClass(C.ERROR),this.removeClass(C.LOADING),this.isCanplay=!0,this.waitTimer&&h.clearTimeout(this,this.waitTimer)}},{key:"onLoadeddata",value:function(){this.isError=!1}},{key:"onLoadstart",value:function(){this.removeClass(C.ERROR)}},{key:"onPlay",value:function(){this.state===D.ENDED&&this.setState(D.RUNNING),this.removeClass(C.PAUSED),this.ended&&this.removeClass(C.ENDED),!this.config.closePlayVideoFocus&&this.focus()}},{key:"onPause",value:function(){this.addClass(C.PAUSED),this.updateAcc("pause"),this.config.closePauseVideoFocus||(this.userTimer&&(h.clearTimeout(this,this.userTimer),this.userTimer=null),this.focus())}},{key:"onEnded",value:function(){this.updateAcc("ended"),this.addClass(C.ENDED),this.setState(D.ENDED)}},{key:"onError",value:function(){this.isError=!0,this.updateAcc("error"),this.removeClass(C.NOT_ALLOW_AUTOPLAY),this.removeClass(C.NO_START),this.removeClass(C.ENTER),this.removeClass(C.LOADING),this.addClass(C.ERROR)}},{key:"onSeeking",value:function(){this.isSeeking||this.updateAcc("seeking"),this.isSeeking=!0,this.addClass(C.SEEKING)}},{key:"onSeeked",value:function(){this.isSeeking=!1,this.waitTimer&&h.clearTimeout(this,this.waitTimer),this.removeClass(C.LOADING),this.removeClass(C.SEEKING)}},{key:"onWaiting",value:function(){var e=this;this.waitTimer&&h.clearTimeout(this,this.waitTimer),this.updateAcc("waiting"),this.waitTimer=h.setTimeout(this,function(){e.addClass(C.LOADING),h.clearTimeout(e,e.waitTimer),e.waitTimer=null},200)}},{key:"onPlaying",value:function(){var e=this;this.isError=!1;var r=C.NO_START,s=C.PAUSED,o=C.ENDED,u=C.ERROR,l=C.REPLAY,c=C.LOADING,f=[r,s,o,u,l,c];f.forEach(function(v){e.removeClass(v)})}},{key:"onTimeupdate",value:function(){!this._videoHeight&&this.resize(),(this.waitTimer||this.hasClass(C.LOADING))&&this.media.readyState>2&&(this.removeClass(C.LOADING),h.clearTimeout(this,this.waitTimer),this.waitTimer=null),!this.paused&&this.state<D.RUNNING&&this.duration&&(this.setState(D.RUNNING),this.emit(lt)),!this._accPlayed.t&&!this.paused&&!this.ended&&(this._accPlayed.t=new Date().getTime())}},{key:"onVolumechange",value:function(){h.typeOf(this.config.volume)==="Number"&&(this.config.volume=this.volume)}},{key:"onRatechange",value:function(){this.config.defaultPlaybackRate=this.playbackRate}},{key:"emitUserAction",value:function(e,r,s){if(!(!this.media||!r||!e)){var o=h.typeOf(e)==="String"?e:e.type||"";s.props&&h.typeOf(s.props)!=="Array"&&(s.props=[s.props]),this.emit(bi,V({eventType:o,action:r,currentTime:this.currentTime,duration:this.duration,ended:this.ended,event:e},s))}}},{key:"updateAcc",value:function(e){if(this._accPlayed.t){var r=new Date().getTime()-this._accPlayed.t;this._accPlayed.acc+=r,this._accPlayed.t=0,(e==="ended"||this.ended)&&(this._accPlayed.loopAcc=this._accPlayed.acc)}}},{key:"checkBuffer",value:function(e){var r=this.media.buffered;if(!r||r.length===0||!this.duration)return!0;for(var s=e||this.media.currentTime||.2,o=r.length,u=0;u<o;u++)if(r.start(u)<=s&&r.end(u)>s)return!0;return!1}},{key:"position",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{h:0,y:0,x:0,w:0};if(!(!this.media||!e||!e.h)){var r=1/e.h,s=r!==1?"scale(".concat(r,")"):"",o=0,u=0;e.y&&(u=(100-e.h*100)/2-e.y*100),e.w&&e.x&&(o=(100-e.w*100)/2-e.x*100),s+=" translate(".concat(o,"%, ").concat(u,"%)"),this.media.style.transform=s,this.media.style.webkitTransform=s}}},{key:"setConfig",value:function(e){var r=this;e&&Object.keys(e).map(function(s){if(s!=="plugins"){r.config[s]=e[s];var o=r.plugins[s.toLowerCase()];o&&h.typeOf(o.setConfig)==="Function"&&o.setConfig(e[s])}})}},{key:"playNext",value:function(e){this.resetState(),this.setConfig(e),this._currentTime=0,this._duration=0,this.play(),this.emit(_i,e)}},{key:"resize",value:function(){var e=this;if(this.media){var r=this.media,s=r.videoWidth,o=r.videoHeight,u=this.config,l=u.fitVideoSize,c=u.videoFillMode;if((c==="fill"||c==="cover")&&this.setAttribute("data-xgfill",c),!(!o||!s)){this._videoHeight=o,this._videoWidth=s;var f=this.root.getBoundingClientRect(),v=this.controls&&this.innerContainer?this.controls.root.getBoundingClientRect().height:0,d=f.width,g=f.height-v,m=parseInt(s/o*1e3,10),p=parseInt(d/g*1e3,10),b=d,T=g,S={};l==="auto"&&p>m||l==="fixWidth"?(T=d/m*1e3,this.config.fluid?S.paddingTop="".concat(T*100/b,"%"):S.height="".concat(T+v,"px")):(l==="auto"&&p<m||l==="fixHeight")&&(b=m*g/1e3,S.width="".concat(b,"px")),!this.fullscreen&&!this.cssfullscreen&&Object.keys(S).forEach(function(L){e.root.style[L]=S[L]}),(c==="fillHeight"&&p<m||c==="fillWidth"&&p>m)&&this.setAttribute("data-xgfill","cover");var $={videoScale:m,vWidth:b,vHeight:T,cWidth:b,cHeight:T+v};this.emit(Ut,$)}}}},{key:"updateObjectPosition",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(this.media.updateObjectPosition){this.media.updateObjectPosition(e,r);return}this.media.style.objectPosition="".concat(e*100,"% ").concat(r*100,"%")}},{key:"setState",value:function(e){A.logInfo("setState","state from:".concat(Bo[this.state]," to:").concat(Bo[e])),this._state=e}},{key:"state",get:function(){return this._state}},{key:"isFullscreen",get:function(){return this.fullscreen}},{key:"isCssfullScreen",get:function(){return this.cssfullscreen}},{key:"hasStart",get:function(){return this._hasStart},set:function(e){typeof e=="boolean"&&(this._hasStart=e,e===!1&&this.setState(D.READY),this.emit("hasstart"))}},{key:"isPlaying",get:function(){return this._state===D.RUNNING||this._state===D.ENDED},set:function(e){e?this.setState(D.RUNNING):this._state>=D.RUNNING&&this.setState(D.ATTACHED)}},{key:"definitionList",get:function(){return!this.config||!this.config.definition?[]:this.config.definition.list||[]},set:function(e){var r=this,s=this.config.definition,o=null,u=null;s.list=e,this.emit("resourceReady",e),e.forEach(function(l){var c;((c=r.curDefinition)===null||c===void 0?void 0:c.definition)===l.definition&&(o=l),s.defaultDefinition===l.definition&&(u=l)}),!u&&e.length>0&&(u=e[0]),o?this.changeDefinition(o):u&&this.changeDefinition(u)}},{key:"videoFrameInfo",get:function(){var e={total:0,dropped:0,corrupted:0,droppedRate:0,droppedDuration:0};if(!this.media||!this.media.getVideoPlaybackQuality)return e;var r=this.media.getVideoPlaybackQuality();return e.dropped=r.droppedVideoFrames||0,e.total=r.totalVideoFrames||0,e.corrupted=r.corruptedVideoFrames||0,e.total>0&&(e.droppedRate=e.dropped/e.total*100,e.droppedDuration=parseInt(this.cumulateTime/e.total*e.dropped,0)),e}},{key:"lang",get:function(){return this.config.lang},set:function(e){var r=Dt.langKeys.filter(function(s){return s===e});if(r.length===0&&e!=="zh"){console.error("Sorry, set lang fail, because the language [".concat(e,"] is not supported now, list of all supported languages is [").concat(Dt.langKeys.join(),"] "));return}this.config.lang=e,W.setLang(e,this)}},{key:"i18n",get:function(){var e=this.config.lang;return e==="zh"&&(e="zh-cn"),this.__i18n.lang[e]||this.__i18n.lang.en}},{key:"i18nKeys",get:function(){return this.__i18n.textKeys||{}}},{key:"version",get:function(){return Ia}},{key:"playerId",get:function(){return this._pluginInfoId}},{key:"url",get:function(){return this.__url||this.config.url},set:function(e){this.__url=e}},{key:"poster",get:function(){return this.plugins.poster?this.plugins.poster.config.poster:this.config.poster},set:function(e){this.plugins.poster&&this.plugins.poster.update(e)}},{key:"readyState",get:function(){return I(w(i.prototype),"readyState",this)}},{key:"error",get:function(){var e=I(w(i.prototype),"error",this);return this.i18n[e]||e}},{key:"networkState",get:function(){return I(w(i.prototype),"networkState",this)}},{key:"fullscreenChanging",get:function(){return this._fullScreenOffset!==null}},{key:"cumulateTime",get:function(){var e=this._accPlayed;return this.updateAcc("get"),e.acc}},{key:"zoom",get:function(){return this.config.zoom},set:function(e){this.config.zoom=e}},{key:"avgSpeed",get:function(){return Ho},set:function(e){Ho=e}},{key:"realTimeSpeed",get:function(){return Uo},set:function(e){Uo=e}},{key:"hook",value:function(e,r){return Ci.call.apply(Ci,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(e,r){return Ti.call.apply(Ti,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removeHooks",value:function(e,r){return Si.call.apply(Si,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"usePluginHooks",value:function(e,r,s){for(var o=arguments.length,u=new Array(o>3?o-3:0),l=3;l<o;l++)u[l-3]=arguments[l];return Do.call.apply(Do,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removePluginHooks",value:function(e,r,s){for(var o=arguments.length,u=new Array(o>3?o-3:0),l=3;l<o;l++)u[l-3]=arguments[l];return $o.call.apply($o,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"setUserActive",value:function(e,r){typeof r=="boolean"&&r!==this.muted&&(this.addInnerOP("volumechange"),this.muted=r),W.setCurrentUserActive(this.playerId,e)}}],[{key:"debugger",get:function(){return A.config.debug},set:function(e){A.config.debug=e}},{key:"getCurrentUserActivePlayerId",value:function(){return W.getCurrentUseActiveId()}},{key:"setCurrentUserActive",value:function(e,r){W.setCurrentUserActive(e,r)}},{key:"isHevcSupported",value:function(){return R.isHevcSupported()}},{key:"probeConfigSupported",value:function(e){return R.probeConfigSupported(e)}},{key:"install",value:function(e,r){i.plugins||(i.plugins={}),i.plugins[e]||(i.plugins[e]=r)}},{key:"use",value:function(e,r){i.plugins||(i.plugins={}),i.plugins[e]=r}}]),i}(ud);_(Ts,"defaultPreset",null);_(Ts,"XgVideoProxy",null);function q(){return new Date().getTime()}var Fe={LOAD_START:"loadstart",LOADED_DATA:"loadeddata",FIRST_FRAME:"firstFrame",WAIT_START:"waitingStart",WAIT_END:"waitingEnd",SEEK_START:"seekStart",SEEK_END:"seekEnd"},Rd=function(n){x(i,n);var a=P(i);function i(){var t;E(this,i);for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return t=a.call.apply(a,[this].concat(r)),_(y(t),"_onTimeupdate",function(){t._state.isTimeUpdate=!0,t._state.autoplayStart&&(A.logInfo("[xgLogger]".concat(t.player.playerId," _onTimeupdate")),t._sendFF("onTimeupdate"))}),_(y(t),"_onAutoplayStart",function(){A.logInfo("[xgLogger]".concat(t.player.playerId," _onAutoplayStart")),t._state.autoplayStart=!0,t.vt&&t._sendFF("onAutoplayStart")}),_(y(t),"_onReset",function(){t._state={autoplayStart:!1,isFFLoading:!1,isTimeUpdate:!1,isFFSend:!1,isLs:!1},t.vt=0,t.pt=0,t.fvt=0,t.newPointTime=q(),t.loadedCostTime=0,t.startCostTime=0,t._isSeeking=!1,t.seekingStart=0,t.waitingStart=0,t.fixedWaitingStart=0,t._isWaiting=!1,t._waitTimer&&h.clearTimeout(y(t),t._waitTimer),t._waittTimer&&h.clearTimeout(y(t),t._waittTimer),t._waitTimer=null,t._waittTimer=null,t._waitType=0}),_(y(t),"_onSeeking",function(){t.seekingStart||(t.suspendWaitingStatus("seek"),t.seekingStart=q(),t.emitLog(Fe.SEEK_START,{start:q()}))}),_(y(t),"_onSeeked",function(){t.suspendSeekingStatus("seeked")}),_(y(t),"_onWaitingLoadStart",function(){t._isWaiting||t.vt||(t._isWaiting=!0,t.waitingStart=q(),t.fixedWaitingStart=q(),t._waitType=1,t.emitLog(Fe.WAIT_START,{fixedStart:t.fixedWaitingStart,start:t.waitingStart,type:1,endType:"loadstart"}))}),_(y(t),"_onWaiting",function(){t._isWaiting||!t.vt||(t._isWaiting=!0,t.vt?t.seekingStart?t._waitType=2:t._waitType=0:t._waitType=1,t.fixedWaitingStart=q(),t._waitTimer=h.setTimeout(y(t),function(){t._isWaiting&&(t.waitingStart=q(),h.clearTimeout(y(t),t._waitTimer),t._waitTimer=null,t._startWaitTimeout(),t.emitLog(Fe.WAIT_START,{fixedStart:t.fixedWaitingStart,start:t.waitingStart,type:t._waitType,endType:t._waitType===2?"seek":"playing"}))},200))}),_(y(t),"_onError",function(){t.suspendSeekingStatus("error"),t.suspendWaitingStatus("error")}),_(y(t),"_onPlaying",function(){t._isWaiting&&t.suspendWaitingStatus("playing")}),t}return k(i,[{key:"afterCreate",value:function(){var e=this;this._onReset(),this._waitType="firstFrame",this._initOnceEvents(),this.newPointTime=q(),this.loadedCostTime=0,this.startCostTime=0,this.on(vs,function(){var r=e._state,s=r.autoplayStart,o=r.isFFSend;e.startCostTime=q()-e.newPointTime,A.logInfo("[xgLogger]".concat(e.player.playerId," LOAD_START"),"autoplayStart:".concat(s," isFFSend:").concat(o," startCostTime:").concat(e.startCostTime," newPointTime").concat(e.newPointTime)),!o&&(!r.isLs&&e.emitLog(Fe.LOAD_START,{}),r.isLs=!0,r.isTimeUpdate=!1,r.isFFLoading=!0,e.pt=q(),e.vt=0,e.fvt=0,e._initOnceEvents(),e._onWaitingLoadStart())}),this.on(ft,function(){e.vt=q(),e.fvt=e.vt-e.pt,e.loadedCostTime=e.vt-e.newPointTime;var r=e._state,s=r.isTimeUpdate,o=r.isFFSend,u=r.autoplayStart;A.logInfo("[xgLogger]".concat(e.player.playerId," LOADED_DATA"),"fvt:".concat(e.fvt," isTimeUpdate:").concat(e._state.isTimeUpdate," loadedCostTime:").concat(e.loadedCostTime)),s&&u&&e._sendFF("loadedData"),o||e.emitLog(Fe.LOADED_DATA,{}),e.suspendWaitingStatus("loadeddata")}),this.on(hs,this._onSeeking),this.on(br,this._onSeeked),this.on(ys,function(){e.endState("destroy")}),this.on(Ui,function(){e.endState("urlChange"),A.logInfo("[xgLogger]".concat(e.player.playerId," URL_CHANGE")),e._state.isFFSend&&e._onReset()}),this.on([fs,Ce],this._onPlaying),this.on(kr,this._onWaiting),this.on(Er,this._onError),this.on(bs,function(){A.logInfo("[xgLogger]".concat(e.player.playerId," RESET")),e.endState("reset"),e._initOnceEvents(),e._onReset()})}},{key:"_initOnceEvents",value:function(){this.off(lt,this._onAutoplayStart),this.off(ve,this._onTimeupdate),this.once(lt,this._onAutoplayStart),this.once(ve,this._onTimeupdate)}},{key:"_sendFF",value:function(e){this.s=q();var r=this._state,s=r.isFFLoading,o=r.isFFSend;A.logInfo("[xgLogger]".concat(this.player.playerId," _sendFF"),"".concat(e," fvt:").concat(this.fvt," isFFLoading:").concat(s," !isFFSend:").concat(!o)),this.vt>0&&s&&!o&&(A.logInfo("[xgLogger]".concat(this.player.playerId," emitLog_firstFrame"),e),this._state.isFFLoading=!1,this._state.isFFSend=!0,this.emitLog(Fe.FIRST_FRAME,{fvt:this.fvt,costTime:this.fvt,vt:this.vt,startCostTime:this.startCostTime,loadedCostTime:this.loadedCostTime}))}},{key:"_startWaitTimeout",value:function(){var e=this;this._waittTimer&&h.clearTimeout(this,this._waittTimer),this._waittTimer=h.setTimeout(this,function(){e.suspendWaitingStatus("timeout"),h.clearTimeout(e,e._waittTimer),e._waittTimer=null},this.config.waitTimeout)}},{key:"endState",value:function(e){this.suspendWaitingStatus(e),this.suspendSeekingStatus(e)}},{key:"suspendSeekingStatus",value:function(e){if(this.seekingStart){var r=q(),s=r-this.seekingStart;this.seekingStart=0,this.emitLog(Fe.SEEK_END,{end:r,costTime:s,endType:e})}}},{key:"suspendWaitingStatus",value:function(e){if(this._waitTimer&&(h.clearTimeout(this,this._waitTimer),this._waitTimer=null),this._waittTimer&&(h.clearTimeout(this,this._waittTimer),this._waittTimer=null),this._isWaiting=!1,!!this.waitingStart){var r=q(),s=r-this.waitingStart,o=r-this.fixedWaitingStart,u=this.config.waitTimeout;this._isWaiting=!1,this.waitingStart=0,this.fixedWaitingStart=0,this.emitLog(Fe.WAIT_END,{fixedCostTime:o>u?u:o,costTime:s>u?u:s,type:e==="loadeddata"?1:this._waitType,endType:this._waitType===2?"seek":e})}}},{key:"emitLog",value:function(e,r){var s=this.player;this.emit(tf,V({t:q(),host:h.getHostFromUrl(s.currentSrc),vtype:s.vtype,eventType:e,currentTime:this.player.currentTime,readyState:s.video.readyState,networkState:s.video.networkState},r))}}],[{key:"pluginName",get:function(){return"xgLogger"}},{key:"defaultConfig",get:function(){return{waitTimeout:1e4}}}]),i}(O);function Ad(){return new DOMParser().parseFromString(`<svg class="xgplayer-replay-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 78 78" width="78" height="78">
  <path fill="#fff" transform="translate(20, 20)" d="M8.22708362,13.8757234 L11.2677371,12.6472196 C11.7798067,12.4403301 12.3626381,12.6877273 12.5695276,13.1997969 L12.9441342,14.1269807 C13.1510237,14.6390502 12.9036264,15.2218816 12.3915569,15.4287712 L6.8284538,17.6764107 L5.90126995,18.0510173 C5.38920044,18.2579068 4.80636901,18.0105096 4.5994795,17.49844 L1.97723335,11.0081531 C1.77034384,10.4960836 2.0177411,9.91325213 2.52981061,9.70636262 L3.45699446,9.33175602 C3.96906396,9.12486652 4.5518954,9.37226378 4.75878491,9.88433329 L5.67885163,12.1615783 C7.99551726,6.6766934 13.3983951,3 19.5,3 C27.7842712,3 34.5,9.71572875 34.5,18 C34.5,26.2842712 27.7842712,33 19.5,33 C15.4573596,33 11.6658607,31.3912946 8.87004692,28.5831991 C8.28554571,27.9961303 8.28762719,27.0463851 8.87469603,26.4618839 C9.46176488,25.8773827 10.4115101,25.8794641 10.9960113,26.466533 C13.2344327,28.7147875 16.263503,30 19.5,30 C26.127417,30 31.5,24.627417 31.5,18 C31.5,11.372583 26.127417,6 19.5,6 C14.4183772,6 9.94214483,9.18783811 8.22708362,13.8757234 Z"></path>
</svg>
`,"image/svg+xml").firstChild}var Ld=function(n){x(i,n);var a=P(i);function i(){return E(this,i),a.apply(this,arguments)}return k(i,[{key:"registerIcons",value:function(){return{replay:Ad}}},{key:"afterCreate",value:function(){var e=this;O.insert(this.icons.replay,this.root,0),this.__handleReplay=this.hook("replayClick",function(){e.player.replay()},{pre:function(s){s.preventDefault(),s.stopPropagation()}}),this.bind(".xgplayer-replay",["click","touchend"],this.__handleReplay),this.on(qe,function(){if(e.playerConfig.loop||h.addClass(e.player.root,"replay"),!e.config.disable){e.show();var r=e.root.querySelector("path");if(r){var s=window.getComputedStyle(r).getPropertyValue("transform");if(typeof s=="string"&&s.indexOf("none")>-1)return null;r.setAttribute("transform",s)}}}),this.on(de,function(){e.hide()})}},{key:"handleReplay",value:function(e){e.preventDefault(),e.stopPropagation(),this.player.replay(),h.removeClass(this.player.root,"replay")}},{key:"show",value:function(){this.config.disable||(this.root.style.display="flex")}},{key:"enable",value:function(){this.config.disable=!1}},{key:"disable",value:function(){this.config.disable=!0,this.hide()}},{key:"destroy",value:function(){this.unbind(".xgplayer-replay",["click","touchend"],this.__handleReplay)}},{key:"render",value:function(){return`<xg-replay class="xgplayer-replay">
      <xg-replay-txt class="xgplayer-replay-txt" lang-key="`.concat(this.i18nKeys.REPLAY,'">').concat(this.i18n.REPLAY,`</xg-replay-txt>
    </xg-replay>`)}}],[{key:"pluginName",get:function(){return"replay"}},{key:"defaultConfig",get:function(){return{disable:!1}}}]),i}(O),Dd=function(n){x(i,n);var a=P(i);function i(){return E(this,i),a.apply(this,arguments)}return k(i,[{key:"isEndedShow",get:function(){return this.config.isEndedShow},set:function(e){this.config.isEndedShow=e}},{key:"hide",value:function(){h.addClass(this.root,"hide")}},{key:"show",value:function(){h.removeClass(this.root,"hide")}},{key:"beforeCreate",value:function(e){typeof e.player.config.poster=="string"&&(e.config.poster=e.player.config.poster)}},{key:"afterCreate",value:function(){var e=this;this.on(qe,function(){e.isEndedShow&&h.removeClass(e.root,"hide")}),this.config.hideCanplay?(this.once(ve,function(){e.onTimeUpdate()}),this.on(Ui,function(){h.removeClass(e.root,"hide"),h.addClass(e.root,"xg-showplay"),e.once(ve,function(){e.onTimeUpdate()})})):this.on(de,function(){h.addClass(e.root,"hide")})}},{key:"onTimeUpdate",value:function(){var e=this;this.player.currentTime?h.removeClass(this.root,"xg-showplay"):this.once(ve,function(){e.onTimeUpdate()})}},{key:"update",value:function(e){e&&(this.config.poster=e,this.root.style.backgroundImage="url(".concat(e,")"))}},{key:"render",value:function(){var e=this.config,r=e.poster,s=e.hideCanplay,o=r?"background-image:url(".concat(r,");"):"";return'<xg-poster class="xgplayer-poster '.concat(s?"xg-showplay":"",'" style="').concat(o,`">
    </xg-poster>`)}}],[{key:"pluginName",get:function(){return"poster"}},{key:"defaultConfig",get:function(){return{isEndedShow:!0,hideCanplay:!1,poster:""}}}]),i}(O);function Ss(){return new DOMParser().parseFromString(`<svg class="play" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40">
  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M576,363L810,512L576,661zM342,214L576,363L576,661L342,810z"></path>
</svg>
`,"image/svg+xml").firstChild}function Es(){return new DOMParser().parseFromString(`<svg class="pause" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40">
  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M598,214h170v596h-170v-596zM256 810v-596h170v596h-170z"></path>
</svg>
`,"image/svg+xml").firstChild}var $e={};function $d(n,a){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{start:null,end:null};$e[n]&&window.clearTimeout($e[n].id),$e[n]={},i.start&&i.start(),$e[n].id=window.setTimeout(function(){i.end&&i.end(),window.clearTimeout($e[n].id),delete $e[n]},a)}function Nd(){Object.keys($e).map(function(n){window.clearTimeout($e[n].id),delete $e[n]})}var Md=function(n){x(i,n);var a=P(i);function i(t){var e;return E(this,i),e=a.call(this,t),_(y(e),"onAutoplayStart",function(){if(!e.autoPlayStart){var r=e.config.mode==="auto"?"auto-hide":"hide";h.addClass(e.root,r),e.autoPlayStart=!0,e.onPlayPause("play")}}),e.autoPlayStart=!1,e}return k(i,[{key:"afterCreate",value:function(){var e=this,r=this.player,s=this.playerConfig;this.initIcons(),this.once(gs,function(){s&&(s.lang&&s.lang==="en"?h.addClass(r.root,"lang-is-en"):s.lang==="jp"&&h.addClass(r.root,"lang-is-jp"))}),this.on(lt,this.onAutoplayStart),s.autoplay||this.show(),this.on(ps,function(){var o=e.config.mode==="auto"?"auto-hide":"hide";e.setAttr("data-state","play"),h.removeClass(e.root,o),e.show()}),this.on(de,function(){e.onPlayPause("play")}),this.on(Wt,function(){e.onPlayPause("pause")}),this.clickHandler=this.hook("startClick",this.switchPausePlay,{pre:function(u){u.cancelable&&u.preventDefault(),u.stopPropagation();var l=e.player.paused;e.emitUserAction(u,"switch_play_pause",{props:"paused",from:l,to:!l})}}),this.bind(["click","touchend"],this.clickHandler)}},{key:"registerIcons",value:function(){return{startPlay:{icon:Ss,class:"xg-icon-play"},startPause:{icon:Es,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild("xg-start-inner",e.startPlay),this.appendChild("xg-start-inner",e.startPause)}},{key:"hide",value:function(){h.addClass(this.root,"hide")}},{key:"show",value:function(){h.removeClass(this.root,"hide")}},{key:"focusHide",value:function(){h.addClass(this.root,"focus-hide")}},{key:"recover",value:function(){h.removeClass(this.root,"focus-hide")}},{key:"switchStatus",value:function(e){e?this.setAttr("data-state",this.player.paused?"pause":"play"):this.setAttr("data-state",this.player.paused?"play":"pause")}},{key:"animate",value:function(e){var r=this;$d("pauseplay",400,{start:function(){h.addClass(r.root,"interact"),r.show(),r.switchStatus(!0)},end:function(){h.removeClass(r.root,"interact"),!e&&r.hide()}})}},{key:"switchPausePlay",value:function(e){var r=this.player;if(e.cancelable&&e.preventDefault(),e.stopPropagation(),!(r.state<D.READY)){var s=this.player.paused;!s&&r.state===D.RUNNING?r.pause():r.play()}}},{key:"onPlayPause",value:function(e){var r=this.config,s=this.player;if(!(s.state<D.RUNNING||!this.autoPlayStart)){if(r.mode==="show"){this.switchStatus(),this.show();return}if(r.mode==="auto"){this.switchStatus();return}if(r.isShowPause&&s.paused&&!s.ended||r.isShowEnd&&s.ended){this.switchStatus(),this.show();return}if(r.disableAnimate){this.switchStatus(),this.hide();return}if(e==="play")this.autoPlayStart?this.animate():this.hide();else{if(!this.autoPlayStart||s.ended)return;this.animate()}}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.clickHandler),Nd()}},{key:"render",value:function(){var e=this.playerConfig.autoplay?this.config.mode==="auto"?"auto-hide":"hide":"";return`
    <xg-start class="xgplayer-start `.concat(e,`">
    <xg-start-inner></xg-start-inner>
    </xg-start>`)}}],[{key:"pluginName",get:function(){return"start"}},{key:"defaultConfig",get:function(){return{isShowPause:!1,isShowEnd:!1,disableAnimate:!1,mode:"hide"}}}]),i}(O),Fd=function(n){x(i,n);var a=P(i);function i(){return E(this,i),a.apply(this,arguments)}return k(i,[{key:"render",value:function(){var e=this.config.innerHtml,r=h.createDom("xg-enter","",{},"xgplayer-enter");if(e&&e instanceof window.HTMLElement)r.appendChild(e);else if(e&&typeof e=="string")r.innerHTML=e;else{for(var s="",o=1;o<=12;o++)s+='<div class="xgplayer-enter-bar'.concat(o,'"></div>');r.innerHTML='<div class="xgplayer-enter-spinner">'.concat(s,"</div>")}return r}}],[{key:"pluginName",get:function(){return"enter"}},{key:"defaultConfig",get:function(){return{innerHtml:"",logo:""}}}]),i}(O);function Ze(n,a,i){try{return' <div class="xg-tips '.concat(i?"hide":" ",'" lang-key="').concat(n.i18nKeys[a],`">
    `).concat(n.i18n[a],`
    </div>`)}catch{return'<div class="xg-tips hide"></div>'}}var jo=function(n){x(i,n);var a=P(i);function i(){return E(this,i),a.apply(this,arguments)}return k(i,[{key:"afterCreate",value:function(){this.getMini=this.getMini.bind(this),this.exitMini=this.exitMini.bind(this),this.bind("click",this.getMini)}},{key:"getMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"exitMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.getMini)}},{key:"render",value:function(){var e="MINISCREEN";return`
      <xg-icon class="xgplayer-miniicon">
      <div class="xgplayer-icon btn-text"><span class="icon-text" lang-key="`.concat(this.i18nKeys[e],'">').concat(this.i18n[e],`</span></div>
      </xg-icon>`)}}],[{key:"pluginName",get:function(){return"miniscreenIcon"}},{key:"defaultConfig",get:function(){return{position:B.CONTROLS_RIGHT,index:10}}}]),i}(O);function Go(n){var a=parseFloat(n),i=n.indexOf("%")===-1&&!Number.isNaN(a);return i&&a}var ks=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],lf=ks.length;function Bd(){for(var n={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},a=0;a<lf;a++){var i=ks[a];n[i]=0}return n}function Ud(n){var a=window.getComputedStyle(n);return a}function Vo(n){if(typeof n=="string"&&(n=document.querySelector(n)),!(!n||Q(n)!=="object"||!n.nodeType)){var a=Ud(n);if(a.display==="none")return Bd();var i={};i.width=n.offsetWidth,i.height=n.offsetHeight;for(var t=i.isBorderBox=a.boxSizing==="border-box",e=0;e<lf;e++){var r=ks[e],s=a[r],o=parseFloat(s);i[r]=Number.isNaN(o)?0:o}var u=i.paddingLeft+i.paddingRight,l=i.paddingTop+i.paddingBottom,c=i.marginLeft+i.marginRight,f=i.marginTop+i.marginBottom,v=i.borderLeftWidth+i.borderRightWidth,d=i.borderTopWidth+i.borderBottomWidth,g=t,m=Go(a.width);m!==!1&&(i.width=m+(g?0:u+v));var p=Go(a.height);return p!==!1&&(i.height=p+(g?0:l+d)),i.innerWidth=i.width-(u+v),i.innerHeight=i.height-(l+d),i.outerWidth=i.width+c,i.outerHeight=i.height+f,i}}function cn(n,a){for(var i=0;i<n.length;i++){var t=n[i];if(t.identifier===a)return t}}var fn={START:"dragStart",MOVE:"dragMove",ENDED:"dragEnded"},Wo={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]},Hd=function(n){x(i,n);var a=P(i);function i(t){var e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return E(this,i),e=a.call(this),e.isEnabled=!0,e.isDragging=!1,e.isDown=!1,e.position={},e.downPoint={},e.dragPoint={x:0,y:0},e.startPos={x:0,y:0},e._root=t instanceof Element?t:document.querySelector(t),e._handlerDom=r.handle instanceof Element?r.handle:document.querySelector(r.handle),!e._root||!e._handlerDom?ls(e):(e._bindStartEvent(),e)}return k(i,[{key:"_bindStartEvent",value:function(){var e=this;"ontouchstart"in window?this._startKey="touchstart":this._startKey="mousedown",this["on".concat(this._startKey)]=this["on".concat(this._startKey)].bind(this),this._handlerDom.addEventListener(this._startKey,this["on".concat(this._startKey)]),Wo[this._startKey].map(function(r){e["on".concat(r)]=e["on".concat(r)].bind(e)})}},{key:"_unbindStartEvent",value:function(){this._handlerDom.removeEventListener(this._startKey,this["on".concat(this._startKey)])}},{key:"_bindPostStartEvents",value:function(e){var r=this;if(e){var s=Wo[this._startKey];s.map(function(o){window.addEventListener(o,r["on".concat(o)])}),this._boundPointerEvents=s}}},{key:"_unbindPostStartEvents",value:function(){var e=this;this._boundPointerEvents&&(this._boundPointerEvents.map(function(r){window.removeEventListener(r,e["on".concat(r)])}),delete this._boundPointerEvents)}},{key:"enable",value:function(){this.isEnabled=!0}},{key:"disable",value:function(){this.isEnabled=!1,this.isDragging&&this.onUp()}},{key:"onDocUp",value:function(e){this.onUp()}},{key:"animate",value:function(){var e=this;this.isDragging&&(this.positionDrag(),window.requestAnimationFrame(function(){e.animate()}))}},{key:"positionDrag",value:function(){var e="translate3d(".concat(this.dragPoint.x,"px, ").concat(this.dragPoint.y,"px, 0)");this._root.style.transform=e,this._root.style.webKitTransform=e}},{key:"setLeftTop",value:function(){this._root.style.left=this.position.x+"px",this._root.style.top=this.position.y+"px"}},{key:"onmousedown",value:function(e){this.dragStart(e,e)}},{key:"onmousemove",value:function(e){this.dragMove(e,e)}},{key:"onmouseup",value:function(e){this.dragEnd(e,e)}},{key:"ontouchstart",value:function(e){var r=e.changedTouches[0];this.dragStart(e,r),this.touchIdentifier=r.pointerId!==void 0?r.pointerId:r.identifier,e.preventDefault()}},{key:"ontouchmove",value:function(e){var r=cn(e.changedTouches,this.touchIdentifier);r&&this.dragMove(e,r)}},{key:"ontouchend",value:function(e){var r=cn(e.changedTouches,this.touchIdentifier);r&&this.dragEnd(e,r),e.preventDefault()}},{key:"ontouchcancel",value:function(e){var r=cn(e.changedTouches,this.touchIdentifier);r&&this.dragCancel(e,r)}},{key:"dragStart",value:function(e,r){if(!(!this._root||this.isDown||!this.isEnabled)){this.downPoint=r,this.dragPoint.x=0,this.dragPoint.y=0,this._getPosition();var s=Vo(this._root);this.startPos.x=this.position.x,this.startPos.y=this.position.y,this.startPos.maxY=window.innerHeight-s.height,this.startPos.maxX=window.innerWidth-s.width,this.setLeftTop(),this.isDown=!0,this._bindPostStartEvents(e)}}},{key:"dragRealStart",value:function(e,r){this.isDragging=!0,this.animate(),this.emit(fn.START,this.startPos)}},{key:"dragEnd",value:function(e,r){this._root&&(this._unbindPostStartEvents(),this.isDragging&&(this._root.style.transform="",this.setLeftTop(),this.emit(fn.ENDED)),this.presetInfo())}},{key:"_dragPointerMove",value:function(e,r){var s={x:r.pageX-this.downPoint.pageX,y:r.pageY-this.downPoint.pageY};return!this.isDragging&&this.hasDragStarted(s)&&this.dragRealStart(e,r),s}},{key:"dragMove",value:function(e,r){if(e=e||window.event,!!this.isDown){var s=this.startPos,o=s.x,u=s.y,l=this._dragPointerMove(e,r),c=l.x,f=l.y;c=this.checkContain("x",c,o),f=this.checkContain("y",f,u),this.position.x=o+c,this.position.y=u+f,this.dragPoint.x=c,this.dragPoint.y=f,this.emit(fn.MOVE,this.position)}}},{key:"dragCancel",value:function(e,r){this.dragEnd(e,r)}},{key:"presetInfo",value:function(){this.isDragging=!1,this.startPos={x:0,y:0},this.dragPoint={x:0,y:0},this.isDown=!1}},{key:"destroy",value:function(){this._unbindStartEvent(),this._unbindPostStartEvents(),this.isDragging&&this.dragEnd(),this.removeAllListeners(),this._handlerDom=null}},{key:"hasDragStarted",value:function(e){return Math.abs(e.x)>3||Math.abs(e.y)>3}},{key:"checkContain",value:function(e,r,s){return r+s<0?0-s:e==="x"&&r+s>this.startPos.maxX?this.startPos.maxX-s:e==="y"&&r+s>this.startPos.maxY?this.startPos.maxY-s:r}},{key:"_getPosition",value:function(){var e=window.getComputedStyle(this._root),r=this._getPositionCoord(e.left,"width"),s=this._getPositionCoord(e.top,"height");this.position.x=Number.isNaN(r)?0:r,this.position.y=Number.isNaN(s)?0:s,this._addTransformPosition(e)}},{key:"_addTransformPosition",value:function(e){var r=e.transform;if(r.indexOf("matrix")===0){var s=r.split(","),o=r.indexOf("matrix3d")===0?12:4,u=parseInt(s[o],10),l=parseInt(s[o+1],10);this.position.x+=u,this.position.y+=l}}},{key:"_getPositionCoord",value:function(e,r){if(e.indexOf("%")!==-1){var s=Vo(this._root.parentNode);return s?parseFloat(e)/100*s[r]:0}return parseInt(e,10)}}]),i}(Vc),jd=function(n){x(i,n);var a=P(i);function i(t){var e;E(this,i),e=a.call(this,t),_(y(e),"onCancelClick",function(o){e.exitMini(),e.isClose=!0}),_(y(e),"onCenterClick",function(o){var u=y(e),l=u.player;l.paused?l.play():l.pause()}),_(y(e),"onScroll",function(o){if(!(!window.scrollY&&window.scrollY!==0||Math.abs(window.scrollY-e.pos.scrollY)<50)){var u=parseInt(h.getCss(e.player.root,"height"));u+=e.config.scrollTop,e.pos.scrollY=window.scrollY,window.scrollY>u+5?!e.isMini&&!e.isClose&&e.getMini():window.scrollY<=u&&(e.isMini&&e.exitMini(),e.isClose=!1)}}),e.isMini=!1,e.isClose=!1;var r=y(e),s=r.config;return e.pos={left:s.left<0?window.innerWidth-s.width-20:s.left,top:s.top<0?window.innerHeight-s.height-20:s.top,height:e.config.height,width:e.config.width,scrollY:window.scrollY||0},e.lastStyle=null,e}return k(i,[{key:"beforeCreate",value:function(e){typeof e.player.config.mini=="boolean"&&(e.config.isShowIcon=e.player.config.mini)}},{key:"afterCreate",value:function(){var e=this;this.initIcons(),this.on(Wt,function(){e.setAttr("data-state","pause")}),this.on(de,function(){e.setAttr("data-state","play")})}},{key:"onPluginsReady",value:function(){var e=this,r=this.player,s=this.config;if(!s.disable){if(this.config.isShowIcon){var o={config:{onClick:function(){e.getMini()}}};r.controls.registerPlugin(jo,o,jo.pluginName)}var u=h.checkTouchSupport()?"touchend":"click";this.bind(".mini-cancel-btn",u,this.onCancelClick),this.bind(".play-icon",u,this.onCenterClick),this.config.disableDrag||(this._draggabilly=new Hd(this.player.root,{handle:this.root})),this.config.isScrollSwitch&&window.addEventListener("scroll",this.onScroll)}}},{key:"registerIcons",value:function(){return{play:{icon:Ss,class:"xg-icon-play"},pause:{icon:Es,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".play-icon",e.play),this.appendChild(".play-icon",e.pause)}},{key:"getMini",value:function(){var e=this;if(!this.isMini){var r=this.player,s=this.playerConfig,o=this.config.target||this.player.root;this.lastStyle={},h.addClass(r.root,"xgplayer-mini"),["width","height","top","left"].map(function(u){e.lastStyle[u]=o.style[u],o.style[u]="".concat(e.pos[u],"px")}),s.fluid&&(o.style["padding-top"]=""),this.emit(yi,!0),r.isMini=this.isMini=!0}}},{key:"exitMini",value:function(){var e=this;if(!this.isMini)return!1;var r=this.player,s=this.playerConfig,o=this.config.target||this.player.root;h.removeClass(r.root,"xgplayer-mini"),this.lastStyle&&Object.keys(this.lastStyle).map(function(u){o.style[u]=e.lastStyle[u]}),this.lastStyle=null,s.fluid&&(r.root.style.width="100%",r.root.style.height="0",r.root.style["padding-top"]="".concat(s.height*100/s.width,"%")),this.emit(yi,!1),this.isMini=r.isMini=!1}},{key:"destroy",value:function(){window.removeEventListener("scroll",this.onScroll);var e=h.checkTouchSupport()?"touchend":"click";this.unbind(".mini-cancel-btn",e,this.onCancelClick),this.unbind(".play-icon",e,this.onCenterClick),this._draggabilly&&this._draggabilly.destroy(),this._draggabilly=null,this.exitMini()}},{key:"render",value:function(){if(!this.config.disable)return`
      <xg-mini-layer class="xg-mini-layer">
      <xg-mini-header class="xgplayer-mini-header">
      `.concat(Ze(this,"MINI_DRAG",this.playerConfig.isHideTips),`
      </xg-mini-header>
      <div class="mini-cancel-btn">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">
          <path fill="#fff" fill-rule="evenodd" d="M3.99 3.49a1 1 0 0 1 1.414 0L10 8.085l4.596-4.595a1 1 0 1 1 1.414 1.414L11.414 9.5l4.596 4.596a1 1 0 0 1 .084 1.32l-.084.094a1 1 0 0 1-1.414 0L10 10.914 5.404 15.51a1 1 0 0 1-1.414-1.414L8.585 9.5 3.99 4.904a1 1 0 0 1-.084-1.32z"></path>
        </svg>
      </div>
      <div class="play-icon">
      </div>
      </xg-mini-layer>`)}}],[{key:"pluginName",get:function(){return"miniscreen"}},{key:"defaultConfig",get:function(){return{index:10,disable:!1,width:320,height:180,left:-1,top:-1,isShowIcon:!1,isScrollSwitch:!1,scrollTop:0,disableDrag:!1}}}]),i}(O),Hr={mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousemove:"onMouseMove"},hn=["videoClick","videoDbClick"],vn=function(n){x(i,n);var a=P(i);function i(){var t;E(this,i);for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return t=a.call.apply(a,[this].concat(r)),_(y(t),"onMouseMove",function(o){var u=y(t),l=u.player,c=u.playerConfig;l.isActive||(l.focus({autoHide:!c.closeDelayBlur}),!c.closeFocusVideoFocus&&l.media.focus())}),_(y(t),"onMouseEnter",function(o){var u=y(t),l=u.playerConfig,c=u.player;!l.closeFocusVideoFocus&&c.media.focus(),l.closeDelayBlur?c.focus({autoHide:!1}):c.focus()}),_(y(t),"onMouseLeave",function(o){var u=t.playerConfig,l=u.closePlayerBlur,c=u.leavePlayerTime,f=u.closeDelayBlur;!l&&!f&&(c?t.player.focus({autoHide:!0,delay:c}):t.player.blur())}),_(y(t),"onVideoClick",function(o){var u=y(t),l=u.player,c=u.playerConfig;o.target&&c.closeVideoClick||(o.target===l.root||o.target===l.media||o.target===l.innerContainer||o.target===l.media.__canvas)&&(o.preventDefault(),c.closeVideoStopPropagation||o.stopPropagation(),t._clickCount++,t.clickTimer&&(clearTimeout(t.clickTimer),t.clickTimer=null),t.clickTimer=setTimeout(function(){t._clickCount&&(t._clickCount--,Lt(y(t),hn[0],function(f,v){t.switchPlayPause(v.e)},{e:o,paused:l.paused}),clearTimeout(t.clickTimer),t.clickTimer=null)},300))}),_(y(t),"onVideoDblClick",function(o){var u=y(t),l=u.player,c=u.playerConfig;if(!(c.closeVideoDblclick||!o.target||o.target!==l.media&&o.target!==l.media.__canvas)){if(t._clickCount<2){t._clickCount=0;return}t._clickCount=0,t.clickTimer&&(clearTimeout(t.clickTimer),t.clickTimer=null),o.preventDefault(),o.stopPropagation(),Lt(y(t),hn[1],function(f,v){t.emitUserAction(v.e,"switch_fullscreen",{props:"fullscreen",from:l.fullscreen,to:!l.fullscreen}),l.fullscreen?l.exitFullscreen():l.getFullscreen()},{e:o,fullscreen:l.fullscreen})}}),t}return k(i,[{key:"afterCreate",value:function(){var e=this;this._clickCount=0,hn.map(function(s){e.__hooks[s]=null});var r=this.playerConfig.isMobileSimulateMode;r==="mobile"||R.device==="mobile"&&!R.os.isIpad||this.initEvents()}},{key:"initEvents",value:function(){var e=this,r=this.player,s=r.video,o=r.root,u=this.playerConfig.enableContextmenu;o&&o.addEventListener("click",this.onVideoClick,!1),o&&o.addEventListener("dblclick",this.onVideoDblClick,!1),Object.keys(Hr).map(function(l){o.addEventListener(l,e[Hr[l]],!1)}),u&&s&&s.addEventListener("contextmenu",this.onContextmenu,!1)}},{key:"switchPlayPause",value:function(e){var r=this.player;this.emitUserAction(e,"switch_play_pause",{props:"paused",from:r.paused,to:!r.paused}),r.ended?r.duration!==1/0&&r.duration>0&&r.replay():r.paused?r.play():r.pause()}},{key:"onContextmenu",value:function(e){e=e||window.event,e.preventDefault&&e.preventDefault(),e.stopPropagation?e.stopPropagation():(e.returnValue=!1,e.cancelBubble=!0)}},{key:"destroy",value:function(){var e=this,r=this.player,s=r.video,o=r.root;this.clickTimer&&clearTimeout(this.clickTimer),o.removeEventListener("click",this.onVideoClick,!1),o.removeEventListener("dblclick",this.onVideoDblClick,!1),s.removeEventListener("contextmenu",this.onContextmenu,!1),Object.keys(Hr).map(function(u){o.removeEventListener(u,e[Hr[u]],!1)})}}],[{key:"pluginName",get:function(){return"pc"}},{key:"defaultConfig",get:function(){return{}}}]),i}(Ye),Be={PRESS:"press",PRESS_END:"pressend",DOUBlE_CLICK:"doubleclick",CLICK:"click",TOUCH_MOVE:"touchmove",TOUCH_START:"touchstart",TOUCH_END:"touchend"},Gd={start:"touchstart",end:"touchend",move:"touchmove",cancel:"touchcancel"},Vd={start:"mousedown",end:"mouseup",move:"mousemove",cancel:"mouseleave"};function zo(n){return n&&n.length>0?n[n.length-1]:null}function Ko(n){var a=navigator.userAgent;/(?:iPhone|iPad)/.test(a)&&n.cancelable&&n.preventDefault()}function Wd(){return{pressDelay:600,dbClickDelay:200,disablePress:!1,disableDbClick:!1,miniStep:2,needPreventDefault:!0}}var zd=function(){function n(a){var i=this,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{eventType:"touch"};E(this,n),this._pos={moving:!1,start:!1,x:0,y:0},this.config=Wd(),Object.keys(t).map(function(e){i.config[e]=t[e]}),this.root=a,this.events=t.eventType==="mouse"?Vd:Gd,this.pressIntrvalId=null,this.dbIntrvalId=null,this.__handlers={},this._initEvent()}return k(n,[{key:"_initEvent",value:function(){this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onTouchCancel=this.onTouchCancel.bind(this),this.root.addEventListener(this.events.start,this.onTouchStart)}},{key:"__setPress",value:function(i){var t=this,e=this.config;this.pressIntrvalId&&this.__clearPress(),this.pressIntrvalId=setTimeout(function(){t.trigger(Be.PRESS,i),t._pos.press=!0,t.__clearPress()},e.pressDelay)}},{key:"__clearPress",value:function(){window.clearTimeout(this.pressIntrvalId),this.pressIntrvalId=null}},{key:"__setDb",value:function(i){var t=this,e=this.config;if(this.dbIntrvalId){this.__clearDb(),this.trigger(Be.DOUBlE_CLICK,i);return}this.dbIntrvalId=setTimeout(function(){t.__clearDb(),!t._pos.start&&!t._pos.press&&!t._pos.moving&&t.trigger(Be.CLICK,i)},e.dbClickDelay)}},{key:"__clearDb",value:function(){clearTimeout(this.dbIntrvalId),this.dbIntrvalId=null}},{key:"on",value:function(i,t){this.__handlers[i]||(this.__handlers[i]=[]),this.__handlers[i].push(t)}},{key:"off",value:function(i,t){if(this.__handlers[i]){for(var e=this.__handlers[i],r=-1,s=0;s<e.length;s++)if(e[s]===t){r=s;break}r>=0&&this.__handlers[i].splice(r,1)}}},{key:"trigger",value:function(i,t){this.__handlers[i]&&this.__handlers[i].map(function(e){try{e(t)}catch(r){console.error("trigger>>:".concat(i),r)}})}},{key:"onTouchStart",value:function(i){var t=this._pos,e=this.root,r=this.config;r.needPreventDefault&&Ko(i);var s=zo(i.touches);t.x=s?parseInt(s.pageX,10):i.pageX,t.y=s?parseInt(s.pageX,10):i.pageX,t.start=!0,this.__setPress(i),e.addEventListener(this.events.end,this.onTouchEnd),e.addEventListener(this.events.cancel,this.onTouchCancel),e.addEventListener(this.events.move,this.onTouchMove),this.trigger(Be.TOUCH_START,i)}},{key:"onTouchCancel",value:function(i){this.onTouchEnd(i)}},{key:"onTouchEnd",value:function(i){var t=this._pos,e=this.root,r=this.config;r.needPreventDefault&&Ko(i),this.__clearPress(),e.removeEventListener(this.events.cancel,this.onTouchCancel),e.removeEventListener(this.events.end,this.onTouchEnd),e.removeEventListener(this.events.move,this.onTouchMove),i.moving=t.moving,i.press=t.press,t.press&&this.trigger(Be.PRESS_END,i),this.trigger(Be.TOUCH_END,i),!t.press&&!t.moving&&this.__setDb(i),t.press=!1,t.start=!1,t.moving=!1}},{key:"onTouchMove",value:function(i){var t=this._pos,e=this.config,r=zo(i.touches),s=r?parseInt(r.pageX,10):i.pageX,o=r?parseInt(r.pageY,10):i.pageX,u=s-t.x,l=o-t.y;Math.abs(l)<e.miniStep&&Math.abs(u)<e.miniStep||(this.__clearPress(),t.press&&this.trigger(Be.PRESS_END,i),t.press=!1,t.moving=!0,this.trigger(Be.TOUCH_MOVE,i))}},{key:"destroy",value:function(){var i=this,t={touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"};Object.keys(t).map(function(e){i.root.removeEventListener("touchend",i[t[e]])})}}]),n}();function Kd(){return new DOMParser().parseFromString(`<svg width="20" height="9" viewBox="0 0 8 9" fill="none" xmlns="http://www.w3.org/2000/svg"
  xmlns:xlink="http://www.w3.org/1999/xlink">
  <path opacity="0.54"
    d="M7.5 3.63397C8.16667 4.01887 8.16667 4.98113 7.5 5.36603L1.5 8.83013C0.833334 9.21503 0 8.7339 0 7.9641L0 1.0359C0 0.266098 0.833333 -0.215027 1.5 0.169873L7.5 3.63397Z"
    fill="white" />
  <path transform="translate(5 0)" d="M7.5 3.63397C8.16667 4.01887 8.16667 4.98113 7.5 5.36603L1.5 8.83013C0.833334 9.21503 0 8.7339 0 7.9641L0 1.0359C0 0.266098 0.833333 -0.215027 1.5 0.169873L7.5 3.63397Z" fill="white"/>
</svg>`,"image/svg+xml").firstChild}var bt={AUTO:"auto",SEEKING:"seeking",PLAYBACK:"playbackrate",LIGHT:""},Yd=function(n){x(i,n);var a=P(i);function i(t){var e;return E(this,i),e=a.call(this,t),_(y(e),"onTouchStart",function(r){var s=y(e),o=s.player,u=s.config,l=s.pos,c=s.playerConfig,f=e.getTouche(r);if(f&&!u.disableGesture&&e.duration>0&&!o.ended){l.isStart=!0,h.checkIsFunction(c.disableSwipeHandler)&&c.disableSwipeHandler(),e.find(".xg-dur").innerHTML=h.format(e.duration);var v=e.root.getBoundingClientRect();o.rotateDeg===90?(l.top=v.left,l.left=v.top,l.width=v.height,l.height=v.width):(l.top=v.top,l.left=v.left,l.width=v.width,l.height=v.height);var d=parseInt(f.pageX-l.left,10),g=parseInt(f.pageY-l.top,10);l.x=o.rotateDeg===90?g:d,l.y=o.rotateDeg===90?d:g,l.scopeL=u.scopeL*l.width,l.scopeR=(1-u.scopeR)*l.width,l.scopeM1=l.width*(1-u.scopeM)/2,l.scopeM2=l.width-l.scopeM1}}),_(y(e),"onTouchMove",function(r){var s=e.getTouche(r),o=y(e),u=o.pos,l=o.config,c=o.player;if(!(!s||l.disableGesture||!e.duration||!u.isStart)){var f=l.miniMoveStep,v=l.hideControlsActive,d=parseInt(s.pageX-u.left,10),g=parseInt(s.pageY-u.top,10),m=c.rotateDeg===90?g:d,p=c.rotateDeg===90?d:g;if(Math.abs(m-u.x)>f||Math.abs(p-u.y)>f){var b=m-u.x,T=p-u.y,S=u.scope;if(S===-1&&(S=e.checkScope(m,p,b,T,u),S===0&&(v?c.blur():c.focus({autoHide:!1}),!u.time&&(u.time=parseInt(c.currentTime*1e3,10)+e.timeOffset*1e3)),u.scope=S),S===-1||S>0&&!l.gestureY||S===0&&!l.gestureX)return;r.cancelable&&r.preventDefault(),e.executeMove(b,T,S,u.width,u.height),u.x=m,u.y=p}}}),_(y(e),"onTouchEnd",function(r){var s=y(e),o=s.player,u=s.pos,l=s.playerConfig;if(u.isStart){u.scope>-1&&r.cancelable&&r.preventDefault();var c=e.config,f=c.disableGesture,v=c.gestureX;!f&&v?(e.endLastMove(u.scope),setTimeout(function(){o.getPlugin("progress")&&o.getPlugin("progress").resetSeekState()},10)):u.time=0,u.scope=-1,e.resetPos(),h.checkIsFunction(l.enableSwipeHandler)&&l.enableSwipeHandler(),e.changeAction(bt.AUTO)}}),_(y(e),"onRootTouchMove",function(r){e.config.disableGesture||!e.config.gestureX||e.checkIsRootTarget(r)&&(r.stopPropagation(),e.pos.isStart?e.onTouchMove(r):e.onTouchStart(r))}),_(y(e),"onRootTouchEnd",function(r){e.pos.isStart&&e.checkIsRootTarget(r)&&(r.stopPropagation(),e.onTouchEnd(r))}),e.pos={isStart:!1,x:0,y:0,time:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1},e.timer=null,e}return k(i,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"registerIcons",value:function(){return{seekTipIcon:{icon:Kd,class:"xg-seek-pre"}}}},{key:"afterCreate",value:function(){var e=this,r=this.playerConfig,s=this.config,o=this.player;r.closeVideoDblclick===!0&&(s.closedbClick=!0),this.resetPos(),h.isUndefined(r.disableGesture)||(s.disableGesture=!!r.disableGesture),this.appendChild(".xg-seek-icon",this.icons.seekTipIcon),this.xgMask=h.createDom("xg-mask","",{},"xgmask"),o.root.appendChild(this.xgMask),this.initCustomStyle(),this.registerThumbnail();var u=this.domEventType;this.touch=new zd(this.root,{eventType:u,needPreventDefault:!this.config.disableGesture}),this.root.addEventListener("contextmenu",function(f){f.preventDefault()}),o.root.addEventListener("touchmove",this.onRootTouchMove,!0),o.root.addEventListener("touchend",this.onRootTouchEnd,!0),this.on(Je,function(){var f=e.player,v=e.config;f.duration*1e3<v.moveDuration&&(v.moveDuration=f.duration*1e3)}),this.on([Ce,qe],function(){var f=e.pos,v=f.time,d=f.isStart;!d&&v>0&&(e.pos.time=0)});var l={touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",press:"onPress",pressend:"onPressEnd",click:"onClick",doubleclick:"onDbClick"};if(Object.keys(l).map(function(f){e.touch.on(f,function(v){e[l[f]](v)})}),!s.disableActive){var c=o.plugins.progress;c&&(c.addCallBack("dragmove",function(f){e.activeSeekNote(f.currentTime,f.forward)}),c.addCallBack("dragend",function(){e.changeAction(bt.AUTO)}))}}},{key:"registerThumbnail",value:function(){var e=this.player,r=e.plugins.thumbnail;if(r&&r.usable){this.thumbnail=r.createThumbnail(null,"mobile-thumbnail");var s=this.find(".time-preview");s.insertBefore(this.thumbnail,s.children[0])}}},{key:"initCustomStyle",value:function(){var e=this.playerConfig||{},r=e.commonStyle,s=r.playedColor,o=r.progressColor;s&&(this.find(".xg-curbar").style.backgroundColor=s,this.find(".xg-cur").style.color=s),o&&(this.find(".xg-bar").style.backgroundColor=o,this.find(".time-preview").style.color=o),this.config.disableTimeProgress&&h.addClass(this.find(".xg-timebar"),"hide")}},{key:"resetPos",value:function(){var e=this;this.pos?(this.pos.isStart=!1,this.pos.scope=-1,["x","y","width","height","scopeL","scopeR","scopeM1","scopeM2"].map(function(r){e.pos[r]=0})):this.pos={isStart:!1,x:0,y:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1,time:0}}},{key:"changeAction",value:function(e){var r=this.player,s=this.root;s.setAttribute("data-xg-action",e);var o=r.plugins.start;o&&o.recover()}},{key:"getTouche",value:function(e){var r=this.player.rotateDeg,s=e.touches&&e.touches.length>0?e.touches[e.touches.length-1]:e;return r===0?{pageX:s.pageX,pageY:s.pageY}:{pageX:s.pageX,pageY:s.pageY}}},{key:"checkScope",value:function(e,r,s,o,u){var l=u.width,c=-1;if(e<0||e>l)return c;var f=Math.abs(o===0?s:s/o);return Math.abs(s)>0&&f>=1.73&&e>u.scopeM1&&e<u.scopeM2?c=0:(Math.abs(s)===0||f<=.57)&&(c=e<u.scopeL?1:e>u.scopeR?2:3),c}},{key:"executeMove",value:function(e,r,s,o,u){switch(s){case 0:this.updateTime(e/o*this.config.scopeM);break;case 1:this.updateBrightness(r/u);break;case 2:R.os.isIos||this.updateVolume(r/u);break}}},{key:"endLastMove",value:function(e){var r=this,s=this.pos,o=this.player,u=this.config,l=(s.time-this.timeOffset)/1e3;switch(e){case 0:o.seek(Number(l).toFixed(1)),u.hideControlsEnd?o.blur():o.focus(),this.timer=setTimeout(function(){r.pos.time=0},500);break}this.changeAction(bt.AUTO)}},{key:"checkIsRootTarget",value:function(e){var r=this.player.plugins||{};return r.progress&&r.progress.root.contains(e.target)?!1:r.start&&r.start.root.contains(e.target)||r.controls&&r.controls.root.contains(e.target)}},{key:"sendUseAction",value:function(e){var r=this.player.paused;this.emitUserAction(e,"switch_play_pause",{prop:"paused",from:r,to:!r})}},{key:"onClick",value:function(e){var r=this.player,s=this.config,o=this.playerConfig;if(r.state<D.RUNNING){o.closeVideoClick||(this.sendUseAction(h.createEvent("click")),r.play());return}!s.closedbClick||o.closeVideoClick?r.isActive?r.blur():r.focus():o.closeVideoClick||((r.isActive||s.focusVideoClick)&&(this.emitUserAction("click","switch_play_pause"),this.switchPlayPause()),r.focus())}},{key:"onDbClick",value:function(e){var r=this.config,s=this.player;!r.closedbClick&&s.state>=D.RUNNING&&(this.sendUseAction(h.createEvent("dblclick")),this.switchPlayPause())}},{key:"onPress",value:function(e){var r=this.pos,s=this.config,o=this.player;s.disablePress||(r.rate=this.player.playbackRate,this.emitUserAction("press","change_rate",{prop:"playbackRate",from:o.playbackRate,to:s.pressRate}),o.playbackRate=s.pressRate,this.changeAction(bt.PLAYBACK))}},{key:"onPressEnd",value:function(e){var r=this.pos,s=this.config,o=this.player;s.disablePress||(this.emitUserAction("pressend","change_rate",{prop:"playbackRate",from:o.playbackRate,to:r.rate}),o.playbackRate=r.rate,r.rate=1,this.changeAction(bt.AUTO))}},{key:"updateTime",value:function(e){var r=this.player,s=this.config,o=this.player.duration;e=Number(e.toFixed(4));var u=parseInt(e*s.moveDuration,10)+this.timeOffset;u+=this.pos.time,u=u<0?0:u>o*1e3?o*1e3-200:u,r.getPlugin("time")&&r.getPlugin("time").updateTime(u/1e3),r.getPlugin("progress")&&r.getPlugin("progress").updatePercent(u/1e3/this.duration,!0),this.activeSeekNote(u/1e3,e>0),s.isTouchingSeek&&r.seek(Number((u-this.timeOffset)/1e3).toFixed(1)),this.pos.time=u}},{key:"updateVolume",value:function(e){this.player.rotateDeg&&(e=-e);var r=this.player,s=this.pos;if(e=parseInt(e*100,10),s.volume+=e,!(Math.abs(s.volume)<10)){var o=parseInt(r.volume*10,10)-parseInt(s.volume/10,10);o=o>10?10:o<1?0:o,r.volume=o/10,s.volume=0}}},{key:"updateBrightness",value:function(e){this.player.rotateDeg&&(e=-e);var r=this.pos,s=this.config,o=this.xgMask,u=r.light+.8*e;u=u>s.maxDarkness?s.maxDarkness:u<0?0:u,o&&(o.style.backgroundColor="rgba(0,0,0,".concat(u,")")),r.light=u}},{key:"activeSeekNote",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,s=this.player,o=this.config,u=!(this.duration!==1/0&&this.duration>0);if(!(!e||typeof e!="number"||u||o.disableActive)){e<0?e=0:e>s.duration&&(e=s.duration-.2),this.changeAction(bt.SEEKING);var l=s.plugins.start;l&&l.focusHide(),this.find(".xg-dur").innerHTML=h.format(this.duration),this.find(".xg-cur").innerHTML=h.format(e),this.find(".xg-curbar").style.width="".concat(e/this.duration*100,"%"),r?h.removeClass(this.find(".xg-seek-show"),"xg-back"):h.addClass(this.find(".xg-seek-show"),"xg-back"),this.updateThumbnails(e)}}},{key:"updateThumbnails",value:function(e){var r=this.player,s=r.plugins.thumbnail;s&&s.usable&&this.thumbnail&&s.update(this.thumbnail,e,160,90)}},{key:"switchPlayPause",value:function(){var e=this.player;if(e.state<D.ATTACHED)return!1;e.ended||(e.paused?e.play():e.pause())}},{key:"disableGesture",value:function(){this.config.disableGesture=!1}},{key:"enableGesture",value:function(){this.config.disableGesture=!0}},{key:"destroy",value:function(){var e=this.player;this.timer&&clearTimeout(this.timer),this.thumbnail=null,e.root.removeChild(this.xgMask),this.xgMask=null,this.touch&&this.touch.destroy(),this.touch=null,e.root.removeEventListener("touchmove",this.onRootTouchMove,!0),e.root.removeEventListener("touchend",this.onRootTouchEnd,!0)}},{key:"render",value:function(){var e=this.config.gradient!=="normal"?"gradient ".concat(this.config.gradient):"gradient";return`
     <xg-trigger class="trigger">
     <div class="`.concat(e,`"></div>
        <div class="time-preview">
            <div class="xg-seek-show `).concat(this.config.disableSeekIcon?" hide-seek-icon":"",`">
              <i class="xg-seek-icon"></i>
              <span class="xg-cur">00:00</span>
              <span>/</span>
              <span class="xg-dur">00:00</span>
            </div>
              <div class="xg-bar xg-timebar">
                <div class="xg-curbar"></div>
              </div>
        </div>
        <div class="xg-playbackrate xg-top-note">
            <span><i>`).concat(this.config.pressRate,"X</i>").concat(this.i18n.FORWARD,`</span>
        </div>
     </xg-trigger>
    `)}}],[{key:"pluginName",get:function(){return"mobile"}},{key:"defaultConfig",get:function(){return{index:0,disableGesture:!1,gestureX:!0,gestureY:!0,gradient:"normal",isTouchingSeek:!1,miniMoveStep:5,miniYPer:5,scopeL:.25,scopeR:.25,scopeM:.9,pressRate:2,darkness:!0,maxDarkness:.8,disableActive:!1,disableTimeProgress:!1,hideControlsActive:!1,hideControlsEnd:!1,moveDuration:60*6*1e3,closedbClick:!1,disablePress:!0,disableSeekIcon:!1,focusVideoClick:!1}}}]),i}(O);function Yo(n){n.preventDefault(),n.returnValue=!1}function Xd(n){var a=n.tagName;return!!(a==="INPUT"||a==="TEXTAREA"||n.isContentEditable)}var Xo=function(n){x(i,n);var a=P(i);function i(){var t;E(this,i);for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return t=a.call.apply(a,[this].concat(r)),_(y(t),"onBodyKeyDown",function(o){var u=o||window.event;if(!(!t.player||!t.player.isUserActive&&!t.config.isIgnoreUserActive)&&!(t.config.disable||t.config.disableBodyTrigger||!t.checkIsVisible()||u.metaKey||u.altKey||u.ctrlKey)){var l=u.keyCode;return(u.target===document.body||t.config.isGlobalTrigger&&!Xd(u.target))&&t.checkCode(l,!0)&&(Yo(u),t.handleKeyCode(l,o)),!1}}),_(y(t),"onKeydown",function(o){var u=o||window.event;if(!(t.config.disable||t.config.disableRootTrigger||u.metaKey||u.altKey||u.ctrlKey)&&!(!t.player.isUserActive&&!t.config.isIgnoreUserActive)&&!(!t.player.isUserActive&&!t.config.isIgnoreUserActive)){if(u&&(u.keyCode===37||t.checkCode(u.keyCode))&&(u.target===t.player.root||u.target===t.player.video||u.target===t.player.controls.el))Yo(u);else return!0;t.handleKeyCode(u.keyCode,o)}}),t}return k(i,[{key:"mergekeyCodeMap",value:function(){var e=this,r=this.config.keyCodeMap;r&&Object.keys(r).map(function(s){e.keyCodeMap[s]?["keyCode","action","disable","isBodyTarget"].map(function(o){r[s][o]&&(e.keyCodeMap[s][o]=r[s][o])}):e.keyCodeMap[s]=r[s]})}},{key:"afterCreate",value:function(){this.config.disable=!this.playerConfig.keyShortcut;var e=typeof this.config.seekStep=="function"?this.config.seekStep(this.player):this.config.seekStep;!e||typeof e!="number"||(this.seekStep=e),this.keyCodeMap={space:{keyCode:32,action:"playPause",disable:!1,noBodyTarget:!1},up:{keyCode:38,action:"upVolume",disable:!1,noBodyTarget:!0},down:{keyCode:40,action:"downVolume",disable:!1,noBodyTarget:!0},left:{keyCode:37,action:"seekBack",disable:!1},right:{keyCode:39,action:"seek",disable:!1},esc:{keyCode:27,action:"exitFullscreen",disable:!1}},this.mergekeyCodeMap(),this.player.root.addEventListener("keydown",this.onKeydown),document.addEventListener("keydown",this.onBodyKeyDown)}},{key:"checkIsVisible",value:function(){if(!this.config.checkVisible)return!0;var e=this.player.root.getBoundingClientRect(),r=e.height,s=e.top,o=e.bottom,u=window.innerHeight;return!(s<0&&s<0-r*.9||o>0&&o-u>r*.9)}},{key:"checkCode",value:function(e,r){var s=this,o=!1;return Object.keys(this.keyCodeMap).map(function(u){s.keyCodeMap[u]&&e===s.keyCodeMap[u].keyCode&&!s.keyCodeMap[u].disable&&(o=!r||r&&!s.keyCodeMap[u].noBodyTarget)}),o}},{key:"downVolume",value:function(e){var r=this.player,s=parseFloat((r.volume-.1).toFixed(1)),o={volume:{from:r.volume,to:s}};this.emitUserAction(e,"change_volume",{props:o}),s>=0?r.volume=s:r.volume=0}},{key:"upVolume",value:function(e){var r=this.player,s=parseFloat((r.volume+.1).toFixed(1)),o={volume:{from:r.volume,to:s}};this.emitUserAction(e,"change_volume",{props:o}),s<=1?r.volume=s:r.volume=1}},{key:"seek",value:function(e){var r=this.player,s=r.currentTime,o=r.duration,u=s;s+this.seekStep<=o?u=s+this.seekStep:u=o-1;var l={currentTime:{from:s,to:u}};this.emitUserAction(e,"seek",{props:l}),this.player.currentTime=u}},{key:"seekBack",value:function(e){var r=this.player.currentTime,s=0;r-this.seekStep>=0&&(s=r-this.seekStep);var o={currentTime:{from:r,to:s}};this.emitUserAction(e,"seek",{props:o}),this.player.currentTime=s}},{key:"playPause",value:function(e){var r=this.player;r&&(this.emitUserAction(e,"switch_play_pause"),r.paused?r.play():r.pause())}},{key:"exitFullscreen",value:function(e){var r=this.player,s=r.fullscreen,o=r.cssfullscreen;s&&(this.emitUserAction("keyup","switch_fullscreen",{prop:"fullscreen",from:s,to:!s}),r.exitFullscreen()),o&&(this.emitUserAction("keyup","switch_css_fullscreen",{prop:"cssfullscreen",from:o,to:!o}),r.exitCssFullscreen())}},{key:"handleKeyCode",value:function(e,r){var s=this;Object.keys(this.keyCodeMap).map(function(o){var u=s.keyCodeMap[o],l=u.action,c=u.keyCode,f=u.disable;c===e&&!f&&(typeof l=="function"?l(r,s.player):typeof l=="string"&&typeof s[l]=="function"&&s[l](r,s.player),s.emit(ef,V({key:o,target:r.target},s.keyCodeMap[o])))})}},{key:"destroy",value:function(){this.player.root.removeEventListener("keydown",this.onKeydown),document.removeEventListener("keydown",this.onBodyKeyDown)}},{key:"disable",value:function(){this.config.disable=!0}},{key:"enable",value:function(){this.config.disable=!1}}],[{key:"pluginName",get:function(){return"keyboard"}},{key:"defaultConfig",get:function(){return{seekStep:10,checkVisible:!0,disableBodyTrigger:!1,disableRootTrigger:!1,isGlobalTrigger:!1,keyCodeMap:{},disable:!1,isIgnoreUserActive:!1}}}]),i}(Ye);function qd(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="-5 -5 110 110">
  <path d="M100,50A50,50,0,1,1,50,0" stroke-width="5" stroke="#ddd" stroke-dasharray="236" fill="none"></path>
</svg>
`,"image/svg+xml").firstChild}var Jd=function(n){x(i,n);var a=P(i);function i(){return E(this,i),a.apply(this,arguments)}return k(i,[{key:"registerIcons",value:function(){return{loadingIcon:qd}}},{key:"afterCreate",value:function(){this.appendChild("xg-loading-inner",this.icons.loadingIcon)}},{key:"render",value:function(){return`
    <xg-loading class="xgplayer-loading">
      <xg-loading-inner></xg-loading-inner>
    </xg-loading>`}}],[{key:"pluginName",get:function(){return"loading"}},{key:"defaultConfig",get:function(){return{position:B.ROOT}}}]),i}(O),Zd=[{tag:"xg-cache",className:"xgplayer-progress-cache",styleKey:"cachedColor"},{tag:"xg-played",className:"xgplayer-progress-played",styleKey:"playedColor"}],Qd=function(){function n(a){E(this,n),this.fragments=a.fragments||[],this.fragments.length===0&&this.fragments.push({percent:1}),this._callBack=a.actionCallback,this.fragConfig={fragFocusClass:a.fragFocusClass||"inner-focus-point",fragAutoFocus:!!a.fragAutoFocus,fragClass:a.fragClass||""},this.style=a.style||{playedColor:"",cachedColor:"",progressColor:""},this.duration=0,this.cachedIndex=0,this.playedIndex=0,this.focusIndex=-1}return k(n,[{key:"updateDuration",value:function(i){var t=this;this.duration=i;var e=0,r=this.fragments;this.fragments=r.map(function(s){return s.start=parseInt(e,10),s.end=parseInt(e+s.percent*t.duration,10),s.duration=parseInt(s.percent*t.duration,10),e+=s.percent*t.duration,s})}},{key:"updateProgress",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"played",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{newIndex:0,curIndex:0,millisecond:0},e=this.progressList,r=this.fragments;if(!(e.length<1)){var s=t.newIndex,o=t.curIndex,u=t.millisecond;s!==o&&e.map(function(f,v){v<s?f[i].style.width="100%":v>s&&(f[i].style.width=0)});var l=r[s],c=u===0?0:(u-l.start)/l.duration;e[s][i].style.width=c<0?0:"".concat(c*100,"%")}}},{key:"updateFocus",value:function(i){if(!(!this.fragConfig.fragAutoFocus||this.fragments.length<2)){if(!i){if(this.focusIndex>-1){this.unHightLight(this.focusIndex);var t={index:-1,preIndex:this.focusIndex,fragment:null};this._callBack&&this._callBack(t),this.focusIndex=-1}return}var e=this.findIndex(i.currentTime*1e3,this.focusIndex);if(e>=0&&e!==this.focusIndex){this.focusIndex>-1&&this.unHightLight(this.focusIndex),this.setHightLight(e);var r={index:e,preIndex:this.focusIndex,fragment:this.fragments[this.focusIndex]};this.focusIndex=e,this._callBack&&this._callBack(r)}}}},{key:"update",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{cached:0,played:0},t=arguments.length>1?arguments[1]:void 0;if(!this.duration||parseInt(t*1e3,10)!==this.duration){if(!t&&t!==0)return;this.updateDuration(parseInt(t*1e3,10))}var e=this.playedIndex,r=this.cachedIndex;if(h.typeOf(i.played)!=="Undefined"){var s=this.findIndex(i.played*1e3,e);if(s<0)return;this.updateProgress("played",{newIndex:s,curIndex:e,millisecond:parseInt(i.played*1e3,10)}),this.playedIndex=s}if(h.typeOf(i.cached)!=="Undefined"){var o=this.findIndex(i.cached*1e3,r);if(o<0)return;this.updateProgress("cached",{newIndex:o,curIndex:r,millisecond:parseInt(i.cached*1e3,10)}),this.cachedIndex=o}}},{key:"findIndex",value:function(i,t){var e=this.fragments;if(!e||e.length===0)return-1;if(e.length===1)return 0;if(t>-1&&t<e.length&&i>e[t].start&&i<e[t].end)return t;if(i>e[e.length-1].start)return e.length-1;for(var r=0;r<e.length;r++)if(i>e[r].start&&i<=e[r].end){t=r;break}return t}},{key:"findHightLight",value:function(){for(var i=this.root.children,t=0;t<i.length;t++)if(h.hasClass(i[t],this.fragConfig.fragFocusClass))return{dom:i[t],pos:i[t].getBoundingClientRect()}}},{key:"findFragment",value:function(i){var t=this.root.children;return i<0||i>=t.length?null:{dom:t[i],pos:t[i].getBoundingClientRect()}}},{key:"unHightLight",value:function(){for(var i=this.root.children,t=0;t<i.length;t++)h.removeClass(i[t],this.fragConfig.fragFocusClass)}},{key:"setHightLight",value:function(i){var t=this.root.children;if(i<t.length)return h.addClass(t[i],this.fragConfig.fragFocusClass),{dom:t[i],pos:t[i].getBoundingClientRect()}}},{key:"destroy",value:function(){this.progressList=null,this.fragments=null,this.root.innerHTML=""}},{key:"reset",value:function(i){var t=this;if(Object.keys(this.fragConfig).forEach(function(r){i[r]!==void 0&&(t.fragConfig[r]=i[r])}),i.fragments){if(this.fragments=i.fragments.length===0?[{percent:1}]:i.fragments,this.updateDuration(this.duration),this.playedIndex=0,this.cachedIndex=0,this.root)for(var e=this.root.children;e.length>0;)this.root.removeChild(e[0]);this.render()}}},{key:"render",value:function(){var i=this,t=this.style.progressColor;if(this.root||(this.root=h.createDom("xg-inners","",{},"progress-list")),this.fragments){var e=this.fragConfig,r=e.fragClass,s=e.fragFocusClass;this.progressList=this.fragments.map(function(o){var u=h.createDom("xg-inner","",{style:t?"background:".concat(t,"; flex: ").concat(o.percent):"flex: ".concat(o.percent)},"".concat(o.isFocus?s:""," xgplayer-progress-inner ").concat(r));return i.root.appendChild(u),Zd.forEach(function(l){u.appendChild(h.createDom(l.tag,"",{style:l.styleKey?"background: ".concat(i.style[l.styleKey],"; width:0;"):"width:0;"},l.className))}),{cached:u.children[0],played:u.children[1]}})}return this.root}}]),n}(),qo={POINT:"inner-focus-point",HIGHLIGHT:"inner-focus-highlight"},eg=function(n){x(i,n);var a=P(i);function i(t){var e;return E(this,i),e=a.call(this,t),_(y(e),"onMoveOnly",function(r,s){var o=y(e),u=o.pos,l=o.config,c=o.player,f=s;if(r){h.event(r);var v=h.getEventPos(r,c.zoom),d=c.rotateDeg===90?v.clientY:v.clientX;if(u.moving&&Math.abs(u.x-d)<l.miniMoveStep)return;u.moving=!0,u.x=d,f=e.computeTime(r,d)}e.triggerCallbacks("dragmove",f,r),e._updateInnerFocus(f)}),_(y(e),"onBodyClick",function(r){e.pos.isLocked&&(e.pos.isLocked=!1,r.preventDefault(),r.stopPropagation())}),_(y(e),"_mouseDownHandler",function(r,s){e._state.time=s.currentTime,e.updateWidth(s.currentTime,s.percent,0),e._updateInnerFocus(s)}),_(y(e),"_mouseUpHandler",function(r,s){var o=y(e),u=o.pos;u.moving&&e.updateWidth(s.currentTime,s.percent,2)}),_(y(e),"_mouseMoveHandler",function(r,s){var o=y(e),u=o._state,l=o.pos,c=o.config,f=o.player;u.time<s.currentTime?s.forward=!0:s.forward=!1,u.time=s.currentTime,l.isDown&&!l.moving&&(l.moving=!0,c.isPauseMoving&&f.pause(),e.triggerCallbacks("dragstart",s,r),e.emitUserAction("drag","dragstart",s)),e.updateWidth(s.currentTime,s.percent,1),e.triggerCallbacks("dragmove",s,r),e._updateInnerFocus(s)}),_(y(e),"onMouseDown",function(r){var s=y(e),o=s._state,u=s.player,l=s.pos,c=s.config,f=s.playerConfig,v=h.getEventPos(r,u.zoom),d=u.rotateDeg===90?v.clientY:v.clientX;if(!(u.isMini||c.closeMoveSeek||!f.allowSeekAfterEnded&&u.ended)){r.stopPropagation(),e.focus(),h.checkIsFunction(f.disableSwipeHandler)&&f.disableSwipeHandler(),h.checkIsFunction(c.onMoveStart)&&c.onMoveStart(),h.event(r),l.x=d,l.isDown=!0,l.moving=!1,o.prePlayTime=u.currentTime,u.focus({autoHide:!1}),e.isProgressMoving=!0,h.addClass(e.progressBtn,"active");var g=e.computeTime(r,d);g.prePlayTime=o.prePlayTime,e._mouseDownHandlerHook(r,g);var m=r.type;return m==="touchstart"?(e.root.addEventListener("touchmove",e.onMouseMove),e.root.addEventListener("touchend",e.onMouseUp)):(e.unbind("mousemove",e.onMoveOnly),document.addEventListener("mousemove",e.onMouseMove,!1),document.addEventListener("mouseup",e.onMouseUp,!1)),!0}}),_(y(e),"onMouseUp",function(r){var s=y(e),o=s.player,u=s.config,l=s.pos,c=s.playerConfig,f=s._state;r.stopPropagation(),r.preventDefault(),h.checkIsFunction(c.enableSwipeHandler)&&c.enableSwipeHandler(),h.checkIsFunction(u.onMoveEnd)&&u.onMoveEnd(),h.event(r),h.removeClass(e.progressBtn,"active");var v=e.computeTime(r,l.x);v.prePlayTime=f.prePlayTime,l.moving?(e.triggerCallbacks("dragend",v,r),e.emitUserAction("drag","dragend",v)):(e.triggerCallbacks("click",v,r),e.emitUserAction("click","click",v)),e._mouseUpHandlerHook(r,v),l.moving=!1,l.isDown=!1,l.x=0,l.y=0,l.isLocked=!0,f.prePlayTime=0,f.time=0;var d=r.type;d==="touchend"?(e.root.removeEventListener("touchmove",e.onMouseMove),e.root.removeEventListener("touchend",e.onMouseUp),e.blur()):(document.removeEventListener("mousemove",e.onMouseMove,!1),document.removeEventListener("mouseup",e.onMouseUp,!1),l.isEnter?c.isMobileSimulateMode!=="mobile"&&e.bind("mousemove",e.onMoveOnly):e.onMouseLeave(r)),h.setTimeout(y(e),function(){e.resetSeekState()},10),o.focus()}),_(y(e),"onMouseMove",function(r){var s=y(e),o=s._state,u=s.pos,l=s.player,c=s.config;h.checkTouchSupport()&&r.preventDefault(),h.event(r);var f=h.getEventPos(r,l.zoom),v=l.rotateDeg===90?f.clientY:f.clientX,d=Math.abs(u.x-v);if(!(u.moving&&d<c.miniMoveStep||!u.moving&&d<c.miniStartStep)){u.x=v;var g=e.computeTime(r,v);g.prePlayTime=o.prePlayTime,e._mouseMoveHandlerHook(r,g)}}),_(y(e),"onMouseOut",function(r){e.triggerCallbacks("mouseout",null,r)}),_(y(e),"onMouseOver",function(r){e.triggerCallbacks("mouseover",null,r)}),_(y(e),"onMouseEnter",function(r){var s=y(e),o=s.player,u=s.pos;if(!(u.isDown||u.isEnter||o.isMini||!o.config.allowSeekAfterEnded&&o.ended)){u.isEnter=!0,e.bind("mousemove",e.onMoveOnly),e.bind("mouseleave",e.onMouseLeave),h.event(r);var l=h.getEventPos(r,o.zoom),c=o.rotateDeg===90?l.clientY:l.clientX,f=e.computeTime(r,c);e.triggerCallbacks("mouseenter",f,r),e.focus()}}),_(y(e),"onMouseLeave",function(r){e.triggerCallbacks("mouseleave",null,r),e.unlock(),e._updateInnerFocus(null)}),_(y(e),"onVideoResize",function(){var r=e.pos,s=r.x,o=r.isDown,u=r.isEnter;if(u&&!o){var l=e.computeTime(null,s);e.onMoveOnly(null,l)}}),e.useable=!1,e.isProgressMoving=!1,e.__dragCallBacks=[],e._state={now:-1,direc:0,time:0,prePlayTime:-1},e._disableBlur=!1,e}return k(i,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"changeState",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.useable=e}},{key:"_initInner",value:function(){var e=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(!r||r.length===0)&&(r=[{percent:1}]);var o=V(V({fragments:r},s),{},{actionCallback:function(l){e.emitUserAction("fragment_focus","fragment_focus",l)}});this.innerList?this.innerList.reset(o):(this.innerList=new Qd(o),this.outer.insertBefore(this.innerList.render(),this.outer.children[0]),["findHightLight","unHightLight","setHightLight","findFragment"].map(function(u){e[u]=e.innerList[u].bind(e.innerList)}))}},{key:"_updateInnerFocus",value:function(e){this.innerList&&this.innerList.updateFocus(e)}},{key:"afterCreate",value:function(){var e=this;if(!(this.config.disable||this.playerConfig.isLive)){this.pos={x:0,y:0,moving:!1,isDown:!1,isEnter:!1,isLocked:!1},this.outer=this.find("xg-outer");var r=this.config,s=r.fragFocusClass,o=r.fragAutoFocus,u=r.fragClass;this._initInner(this.config.fragments,{fragFocusClass:s,fragAutoFocus:o,fragClass:u,style:this.playerConfig.commonStyle||{}}),R.device==="mobile"&&(this.config.isDragingSeek=!1,this.isMobile=!0),this.progressBtn=this.find(".xgplayer-progress-btn"),this.on(Je,function(){e.onMouseLeave()}),this.on(ve,function(){e.onTimeupdate()}),this.on(br,function(){e.onTimeupdate(),e.onCacheUpdate()}),this.on(Yc,function(){e.onCacheUpdate()}),this.on(qe,function(){e.onCacheUpdate(!0),e.onTimeupdate(!0),e._state.now=0}),this.on(wr,function(){e.onReset()}),this.on(Ut,function(){e.onVideoResize()}),this.bindDomEvents(),this.initCustomStyle()}}},{key:"setConfig",value:function(e){var r=this,s=null;Object.keys(e).forEach(function(o){r.config[o]=e[o],o==="fragments"&&(s=e[o])}),s&&this._initInner(s,e)}},{key:"initCustomStyle",value:function(){var e=this.playerConfig||{},r=e.commonStyle,s=r.sliderBtnStyle,o=this.progressBtn;s&&(typeof s=="string"?o.style.boxShadow=s:Q(s)==="object"&&Object.keys(s).map(function(u){o.style[u]=s[u]}))}},{key:"triggerCallbacks",value:function(e,r,s){this.__dragCallBacks.length>0&&this.__dragCallBacks.map(function(o){if(o&&o.handler&&o.type===e)try{o.handler(r,s)}catch(u){console.error("[XGPLAYER][triggerCallbacks] ".concat(o," error"),u)}})}},{key:"addCallBack",value:function(e,r){r&&typeof r=="function"&&this.__dragCallBacks.push({type:e,handler:r})}},{key:"removeCallBack",value:function(e,r){var s=this.__dragCallBacks,o=-1;s.map(function(u,l){u&&u.type===e&&u.handler===r&&(o=l)}),o>-1&&s.splice(o,1)}},{key:"unlock",value:function(){var e=this.player,r=this.pos;if(r.isEnter=!1,!e.isMini){if(this.unbind("mousemove",this.onMoveOnly),r.isDown){this.unbind("mouseleave",this.onMouseLeave);return}this.blur()}}},{key:"bindDomEvents",value:function(){var e=this.player,r=e.controls,s=e.config;this._mouseDownHandlerHook=this.hook("dragstart",this._mouseDownHandler),this._mouseUpHandlerHook=this.hook("dragend",this._mouseUpHandler),this._mouseMoveHandlerHook=this.hook("drag",this._mouseMoveHandler),(this.domEventType==="touch"||this.domEventType==="compatible")&&(this.root.addEventListener("touchstart",this.onMouseDown),r&&(r.root&&r.root.addEventListener("touchmove",h.stopPropagation),r.center&&r.center.addEventListener("touchend",h.stopPropagation))),(this.domEventType==="mouse"||this.domEventType==="compatible")&&(this.bind("mousedown",this.onMouseDown),s.isMobileSimulateMode!=="mobile"&&this.bind("mouseenter",this.onMouseEnter),this.bind("mouseover",this.onMouseOver),this.bind("mouseout",this.onMouseOut),this.player.root.addEventListener("click",this.onBodyClick,!0))}},{key:"focus",value:function(){this.player.controls.pauseAutoHide(),h.addClass(this.root,"active")}},{key:"blur",value:function(){this._disableBlur||(this.player.controls.recoverAutoHide(),h.removeClass(this.root,"active"))}},{key:"disableBlur",value:function(){this._disableBlur=!0}},{key:"enableBlur",value:function(){this._disableBlur=!1}},{key:"updateWidth",value:function(e,r,s){var o=this.config,u=this.player;if(!(o.isCloseClickSeek&&s===0)){var l=e>=u.duration?u.duration-o.endedDiff:Number(e).toFixed(1);this.updatePercent(r),this.updateTime(e),!(s===1&&(!o.isDragingSeek||u.config.mediaType==="audio"))&&(this._state.now=l,this._state.direc=l>u.currentTime?0:1,u.seek(l))}}},{key:"computeTime",value:function(e,r){var s=this.player,o=this.root.getBoundingClientRect(),u=o.width,l=o.height,c=o.top,f=o.left,v,d,g=r;s.rotateDeg===90?(v=l,d=c):(v=u,d=f);var m=g-d;m=m>v?v:m<0?0:m;var p=m/v;p=p<0?0:p>1?1:p;var b=parseInt(p*this.duration*1e3,10)/1e3;return{percent:p,currentTime:b,offset:m,width:v,left:d,e}}},{key:"updateTime",value:function(e){var r=this.player,s=this.duration;e>s?e=s:e<0&&(e=0);var o=r.plugins.time;o&&o.updateTime(e)}},{key:"resetSeekState",value:function(){this.isProgressMoving=!1;var e=this.player.plugins.time;e&&e.resetActive()}},{key:"updatePercent",value:function(e,r){if(this.isProgressMoving=!0,!this.config.disable){e=e>1?1:e<0?0:e,this.progressBtn.style.left="".concat(e*100,"%"),this.innerList.update({played:e*this.duration},this.duration);var s=this.player.plugins.miniprogress;s&&s.update({played:e*this.duration},this.duration)}}},{key:"onTimeupdate",value:function(e){var r=this.player,s=this._state,o=this.duration;if(!(r.isSeeking||this.isProgressMoving)){if(s.now>-1){var u=parseInt(s.now*1e3,10)-parseInt(r.currentTime*1e3,10);if(s.direc===0&&u>300||s.direc===1&&u>-300){s.now=-1;return}else s.now=-1}var l=this.timeOffset+r.currentTime;l=h.adjustTimeByDuration(l,o,e),this.innerList.update({played:l},o),this.progressBtn.style.left="".concat(l/o*100,"%");var c=this.player.plugins.miniprogress;c&&c.update({played:l},o)}}},{key:"onCacheUpdate",value:function(e){var r=this.player,s=this.duration;if(r){var o=r.bufferedPoint.end;o=h.adjustTimeByDuration(o,s,e),this.innerList.update({cached:o},s);var u=this.player.plugins.miniprogress;u&&u.update({cached:o},s)}}},{key:"onReset",value:function(){this.innerList.update({played:0,cached:0},0);var e=this.player.plugins.miniprogress;e&&e.update({cached:0,played:0},0)}},{key:"destroy",value:function(){var e=this.player,r=e.controls;this.thumbnailPlugin=null,this.innerList.destroy(),this.innerList=null;var s=this.domEventType;(s==="touch"||s==="compatible")&&(this.root.removeEventListener("touchstart",this.onMouseDown),this.root.removeEventListener("touchmove",this.onMouseMove),this.root.removeEventListener("touchend",this.onMouseUp),r&&(r.root&&r.root.removeEventListener("touchmove",h.stopPropagation),r.center&&r.center.removeEventListener("touchend",h.stopPropagation))),(s==="mouse"||s==="compatible")&&(this.unbind("mousedown",this.onMouseDown),this.unbind("mouseenter",this.onMouseEnter),this.unbind("mousemove",this.onMoveOnly),this.unbind("mouseleave",this.onMouseLeave),document.removeEventListener("mousemove",this.onMouseMove,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),e.root.removeEventListener("click",this.onBodyClick,!0))}},{key:"render",value:function(){if(!(this.config.disable||this.playerConfig.isLive)){var e=this.player.controls?this.player.controls.config.mode:"",r=e==="bottom"?"xgplayer-progress-bottom":"";return`
    <xg-progress class="xgplayer-progress `.concat(r,`">
      <xg-outer class="xgplayer-progress-outer">
        <xg-progress-btn class="xgplayer-progress-btn"></xg-progress-btn>
      </xg-outer>
    </xg-progress>
    `)}}}],[{key:"pluginName",get:function(){return"progress"}},{key:"defaultConfig",get:function(){return{position:B.CONTROLS_CENTER,index:0,disable:!1,isDragingSeek:!0,closeMoveSeek:!1,isPauseMoving:!1,isCloseClickSeek:!1,fragments:[{percent:1}],fragFocusClass:qo.POINT,fragClass:"",fragAutoFocus:!1,miniMoveStep:5,miniStartStep:2,onMoveStart:function(){},onMoveEnd:function(){},endedDiff:.2}}},{key:"FRAGMENT_FOCUS_CLASS",get:function(){return qo}}]),i}(O),vt=function(n){x(i,n);var a=P(i);function i(){var t;E(this,i);for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return t=a.call.apply(a,[this].concat(r)),_(y(t),"_onMouseenter",function(o){t.emit("icon_mouseenter",{pluginName:t.pluginName})}),_(y(t),"_onMouseLeave",function(o){t.emit("icon_mouseleave",{pluginName:t.pluginName})}),t}return k(i,[{key:"afterCreate",value:function(){this.bind("mouseenter",this._onMouseenter),this.bind("mouseleave",this._onMouseLeave)}},{key:"destroy",value:function(){this.unbind("mouseenter",this._onMouseenter),this.unbind("mouseleave",this._onMouseLeave)}}]),i}(O),tg=function(n){x(i,n);var a=P(i);function i(){return E(this,i),a.apply(this,arguments)}return k(i,[{key:"afterCreate",value:function(){var e=this;I(w(i.prototype),"afterCreate",this).call(this);var r=this.player,s=this.config;s.disable||(this.initIcons(),this.btnClick=this.btnClick.bind(this),this.bind(["touchend","click"],this.btnClick),this.on([Wt,Er],function(){e.animate(r.paused)}),this.on(de,function(){e.animate(r.paused)}),this.animate(!0))}},{key:"registerIcons",value:function(){return{play:{icon:Ss,class:"xg-icon-play"},pause:{icon:Es,class:"xg-icon-pause"}}}},{key:"btnClick",value:function(e){e.preventDefault(),e.stopPropagation();var r=this.player;return this.emitUserAction(e,"switch_play_pause",{prop:"paused",from:r.paused,to:!r.paused}),r.ended?r.replay():r.paused?(r.play(),this.animate(!1)):(r.pause(),this.animate(!0)),!1}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.play),this.appendChild(".xgplayer-icon",e.pause)}},{key:"animate",value:function(e){var r=this.i18nKeys,s=this.find(".xg-tips");e?(this.setAttr("data-state","pause"),s&&this.changeLangTextKey(s,r.PLAY_TIPS)):(this.setAttr("data-state","play"),s&&this.changeLangTextKey(s,r.PAUSE_TIPS))}},{key:"destroy",value:function(){I(w(i.prototype),"destroy",this).call(this),this.unbind(["touchend","click"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return`<xg-icon class="xgplayer-play">
    <div class="xgplayer-icon">
    </div>
    `.concat(Ze(this,"PLAY_TIPS",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"play"}},{key:"defaultConfig",get:function(){return{position:B.CONTROLS_LEFT,index:0,disable:!1}}}]),i}(vt);function rg(){return new DOMParser().parseFromString(`<svg width="32px" height="40px" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <path d="M11.2374369,14 L17.6187184,7.61871843 C17.9604272,7.27700968 17.9604272,6.72299032 17.6187184,6.38128157 C17.2770097,6.03957281 16.7229903,6.03957281 16.3812816,6.38128157 L9.38128157,13.3812816 C9.03957281,13.7229903 9.03957281,14.2770097 9.38128157,14.6187184 L16.3812816,21.6187184 C16.7229903,21.9604272 17.2770097,21.9604272 17.6187184,21.6187184 C17.9604272,21.2770097 17.9604272,20.7229903 17.6187184,20.3812816 L11.2374369,14 L11.2374369,14 Z" fill="#FFFFFF"></path>
    </g>
</svg>`,"image/svg+xml").firstChild}var ig=function(n){x(i,n);var a=P(i);function i(){return E(this,i),a.apply(this,arguments)}return k(i,[{key:"afterCreate",value:function(){var e=this;this.initIcons(),this.onClick=function(r){r.preventDefault(),r.stopPropagation(),e.config.onClick(r)},this.bind(["click","touchend"],this.onClick)}},{key:"registerIcons",value:function(){return{screenBack:{icon:rg,class:"xg-fullscreen-back"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(this.root,e.screenBack)}},{key:"show",value:function(){h.addClass(this.root,"show")}},{key:"hide",value:function(){h.removeClass(this.root,"show")}},{key:"render",value:function(){return`<xg-icon class="xgplayer-back">
    </xg-icon>`}}],[{key:"pluginName",get:function(){return"topbackicon"}},{key:"defaultConfig",get:function(){return{position:B.ROOT_TOP,index:0}}}]),i}(O);function ng(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">
  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M598 214h212v212h-84v-128h-128v-84zM726 726v-128h84v212h-212v-84h128zM214 426v-212h212v84h-128v128h-84zM298 598v128h128v84h-212v-212h84z"></path>
</svg>
`,"image/svg+xml").firstChild}function ag(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">
  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M682 342h128v84h-212v-212h84v128zM598 810v-212h212v84h-128v128h-84zM342 342v-128h84v212h-212v-84h128zM214 682v-84h212v212h-84v-128h-128z"></path>
</svg>
`,"image/svg+xml").firstChild}var sg=function(n){x(i,n);var a=P(i);function i(){var t;E(this,i);for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return t=a.call.apply(a,[this].concat(r)),_(y(t),"_onOrientationChange",function(o){t.player.fullscreen&&t.config.rotateFullscreen&&(window.orientation===90||window.orientation===-90?t.player.setRotateDeg(0):t.player.setRotateDeg(90))}),t}return k(i,[{key:"afterCreate",value:function(){var e=this;I(w(i.prototype),"afterCreate",this).call(this);var r=this.config,s=this.playerConfig;if(!r.disable){r.target&&(this.playerConfig.fullscreenTarget=this.config.target);var o=h.getFullScreenEl();s.fullscreenTarget===o&&this.player.getFullscreen().catch(function(u){}),this.initIcons(),this.handleFullscreen=this.hook("fullscreenChange",this.toggleFullScreen,{pre:function(l){var c=e.player.fullscreen;e.emitUserAction(l,"switch_fullscreen",{prop:"fullscreen",from:c,to:!c})}}),this.bind(".xgplayer-fullscreen",["touchend","click"],this.handleFullscreen),this.on(je,function(u){var l=e.find(".xg-tips");l&&e.changeLangTextKey(l,u?e.i18nKeys.EXITFULLSCREEN_TIPS:e.i18nKeys.FULLSCREEN_TIPS),e.animate(u)}),this.config.needBackIcon&&(this.topBackIcon=this.player.registerPlugin({plugin:ig,options:{config:{onClick:function(l){e.handleFullscreen(l)}}}})),R.device==="mobile"&&window.addEventListener("orientationchange",this._onOrientationChange)}}},{key:"registerIcons",value:function(){return{fullscreen:{icon:ng,class:"xg-get-fullscreen"},exitFullscreen:{icon:ag,class:"xg-exit-fullscreen"}}}},{key:"destroy",value:function(){I(w(i.prototype),"destroy",this).call(this),this.unbind(".xgplayer-icon",R.device==="mobile"?"touchend":"click",this.handleFullscreen),R.device==="mobile"&&window.removeEventListener("orientationchange",this._onOrientationChange)}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.fullscreen),this.appendChild(".xgplayer-icon",e.exitFullscreen)}},{key:"toggleFullScreen",value:function(e){e&&(e.preventDefault(),e.stopPropagation());var r=this.player,s=this.config,o=s.useCssFullscreen===!0||typeof s.useCssFullscreen=="function"&&s.useCssFullscreen();o?(r.fullscreen?r.exitCssFullscreen():r.getCssFullscreen(),this.animate(r.fullscreen)):s.rotateFullscreen?(r.fullscreen?r.exitRotateFullscreen():r.getRotateFullscreen(),this.animate(r.fullscreen)):s.switchCallback&&typeof s.switchCallback=="function"?s.switchCallback(r.fullscreen):r.fullscreen?r.exitFullscreen():r.getFullscreen().catch(function(u){})}},{key:"animate",value:function(e){e?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.topBackIcon&&(e?(this.topBackIcon.show(),this.hide()):(this.topBackIcon.hide(),this.show()))}},{key:"show",value:function(){I(w(i.prototype),"show",this).call(this)}},{key:"hide",value:function(){I(w(i.prototype),"hide",this).call(this)}},{key:"render",value:function(){if(!this.config.disable){var e="FULLSCREEN_TIPS";return`<xg-icon class="xgplayer-fullscreen">
    <div class="xgplayer-icon">
    </div>
    `.concat(Ze(this,e,this.playerConfig.isHideTips),`
    </xg-icon>`)}}}],[{key:"pluginName",get:function(){return"fullscreen"}},{key:"defaultConfig",get:function(){return{position:B.CONTROLS_RIGHT,index:0,useCssFullscreen:!1,rotateFullscreen:!1,switchCallback:null,target:null,disable:!1,needBackIcon:!1}}}]),i}(vt),og=function(n){x(i,n);var a=P(i);function i(t){var e;return E(this,i),e=a.call(this,t),e.isActiving=!1,e}return k(i,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"currentTime",get:function(){return this.player.currentTime||0}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"afterCreate",value:function(){var e=this,r=this.player.controls.config.mode;this.mode=r==="flex"?"flex":"normal",!this.config.disable&&(this.mode==="flex"&&(this.createCenterTime(),this.hide()),this.durationDom=this.find(".time-duration"),this.timeDom=this.find(".time-current"),this.on(Je,function(){e.onTimeUpdate()}),this.on(ve,function(){e.onTimeUpdate()}),this.on(qe,function(){e.onTimeUpdate(!0)}),this.on(wr,function(){e.onReset()}))}},{key:"show",value:function(){this.mode!=="flex"&&I(w(i.prototype),"show",this).call(this)}},{key:"onTimeUpdate",value:function(e){var r=this.player,s=this.config,o=this.duration;if(!(s.disable||this.isActiving||!r.hasStart)){var u=r.currentTime+this.timeOffset;u=h.adjustTimeByDuration(u,o,e),this.mode==="flex"?(this.centerCurDom.innerHTML=h.format(u),o!==1/0&&o>0&&(this.centerDurDom.innerHTML=h.format(o))):(this.timeDom.innerHTML=h.format(u),o!==1/0&&o>0&&(this.durationDom.innerHTML=h.format(o)))}}},{key:"onReset",value:function(){this.mode==="flex"?(this.centerCurDom.innerHTML=h.format(0),this.centerDurDom.innerHTML=h.format(0)):(this.timeDom.innerHTML=h.format(0),this.durationDom.innerHTML=h.format(0))}},{key:"createCenterTime",value:function(){var e=this.player;if(!(!e.controls||!e.controls.center)){var r=e.controls.center;this.centerCurDom=h.createDom("xg-icon","00:00",{},"xgplayer-time left"),this.centerDurDom=h.createDom("xg-icon","00:00",{},"xgplayer-time right"),r.children.length>0?r.insertBefore(this.centerCurDom,r.children[0]):r.appendChild(this.centerCurDom),r.appendChild(this.centerDurDom)}}},{key:"afterPlayerInit",value:function(){var e=this.config;if(this.duration===1/0||this.playerConfig.isLive?(h.hide(this.durationDom),h.hide(this.timeDom),h.hide(this.find(".time-separator")),h.show(this.find(".time-live-tag"))):h.hide(this.find(".time-live-tag")),e.hide){this.hide();return}this.show()}},{key:"changeLiveState",value:function(e){e?(h.hide(this.durationDom),h.hide(this.timeDom),h.hide(this.find(".time-separator")),h.show(this.find(".time-live-tag"))):(h.hide(this.find(".time-live-tag")),h.show(this.find(".time-separator")),h.show(this.durationDom),h.show(this.timeDom))}},{key:"updateTime",value:function(e){if(this.isActiving=!0,!(!e&&e!==0||e>this.duration)){if(this.mode==="flex"){this.centerCurDom.innerHTML=h.format(e);return}this.timeDom.innerHTML=h.format(e)}}},{key:"resetActive",value:function(){var e=this,r=this.player,s=function(){e.isActiving=!1};this.off(br,s),r.isSeeking?this.once(br,s):this.isActiving=!1}},{key:"destroy",value:function(){var e=this.player.controls.center;this.centerCurDom&&e.removeChild(this.centerCurDom),this.centerCurDom=null,this.centerDurDom&&e.removeChild(this.centerDurDom),this.centerDurDom=null}},{key:"render",value:function(){if(!this.config.disable)return`<xg-icon class="xgplayer-time">
    <span class="time-current">00:00</span>
    <span class="time-separator">/</span>
    <span class="time-duration">00:00</span>
    <span class="time-live-tag">`.concat(this.i18n.LIVE_TIP,`</span>
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"time"}},{key:"defaultConfig",get:function(){return{position:B.CONTROLS_LEFT,index:2,disable:!1}}}]),i}(O);function ug(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M940.632 837.632l-72.192-72.192c65.114-64.745 105.412-154.386 105.412-253.44s-40.299-188.695-105.396-253.424l-0.016-0.016 72.192-72.192c83.639 83.197 135.401 198.37 135.401 325.632s-51.762 242.434-135.381 325.612l-0.020 0.020zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>
</svg>
`,"image/svg+xml").firstChild}function lg(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>
</svg>
`,"image/svg+xml").firstChild}function cg(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M920.4 439.808l-108.544-109.056-72.704 72.704 109.568 108.544-109.056 108.544 72.704 72.704 108.032-109.568 108.544 109.056 72.704-72.704-109.568-108.032 109.056-108.544-72.704-72.704-108.032 109.568z"></path>
</svg>
`,"image/svg+xml").firstChild}var fg=function(n){x(i,n);var a=P(i);function i(){var t;E(this,i);for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return t=a.call.apply(a,[this].concat(r)),_(y(t),"onBarMousedown",function(o){var u=y(t),l=u.player,c=t.find(".xgplayer-bar");h.event(o);var f=c.getBoundingClientRect(),v=h.getEventPos(o,l.zoom),d=f.height-(v.clientY-f.top);if(v.h=d,v.barH=f.height,t.pos=v,!(d<-2))return t.updateVolumePos(d,o),document.addEventListener("mouseup",t.onBarMouseUp),t._d.isStart=!0,!1}),_(y(t),"onBarMouseMove",function(o){var u=y(t),l=u._d;if(l.isStart){var c=y(t),f=c.pos,v=c.player;o.preventDefault(),o.stopPropagation(),h.event(o);var d=h.getEventPos(o,v.zoom);l.isMoving=!0;var g=f.h-d.clientY+f.clientY;g>f.barH||t.updateVolumePos(g,o)}}),_(y(t),"onBarMouseUp",function(o){h.event(o),document.removeEventListener("mouseup",t.onBarMouseUp);var u=y(t),l=u._d;l.isStart=!1,l.isMoving=!1}),_(y(t),"onMouseenter",function(o){t._d.isActive=!0,t.focus(),t.emit("icon_mouseenter",{pluginName:t.pluginName})}),_(y(t),"onMouseleave",function(o){t._d.isActive=!1,t.unFocus(100,!1,o),t.emit("icon_mouseleave",{pluginName:t.pluginName})}),_(y(t),"onVolumeChange",function(o){if(t.player){var u=t.player,l=u.muted,c=u.volume;t._d.isMoving||(t.find(".xgplayer-drag").style.height=l||c===0?"4px":"".concat(c*100,"%"),t.config.showValueLabel&&t.updateVolumeValue()),t.animate(l,c)}}),t}return k(i,[{key:"registerIcons",value:function(){return{volumeSmall:{icon:lg,class:"xg-volume-small"},volumeLarge:{icon:ug,class:"xg-volume"},volumeMuted:{icon:cg,class:"xg-volume-mute"}}}},{key:"afterCreate",value:function(){var e=this;if(this._timerId=null,this._d={isStart:!1,isMoving:!1,isActive:!1},!this.config.disable){this.initIcons();var r=this.playerConfig,s=r.commonStyle,o=r.volume;s.volumeColor&&(this.find(".xgplayer-drag").style.backgroundColor=s.volumeColor),this.changeMutedHandler=this.hook("mutedChange",function(u){e.changeMuted(u)},{pre:function(l){l.preventDefault(),l.stopPropagation()}}),this._onMouseenterHandler=this.hook("mouseenter",this.onMouseenter),this._onMouseleaveHandler=this.hook("mouseleave",this.onMouseleave),R.device!=="mobile"&&this.playerConfig.isMobileSimulateMode!=="mobile"&&(this.bind("mouseenter",this._onMouseenterHandler),this.bind(["blur","mouseleave"],this._onMouseleaveHandler),this.bind(".xgplayer-slider","mousedown",this.onBarMousedown),this.bind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.bind(".xgplayer-slider","mouseup",this.onBarMouseUp)),this.bind(".xgplayer-icon",["touchend","click"],this.changeMutedHandler),this.on(zc,this.onVolumeChange),this.once(ft,this.onVolumeChange),h.typeOf(o)!=="Number"&&(this.player.volume=this.config.default),this.onVolumeChange()}}},{key:"updateVolumePos",value:function(e,r){var s=this.player,o=this.find(".xgplayer-drag"),u=this.find(".xgplayer-bar");if(!(!u||!o)){var l=parseInt(e/u.getBoundingClientRect().height*1e3,10);o.style.height="".concat(e,"px");var c=Math.max(Math.min(l/1e3,1),0),f={volume:{from:s.volume,to:c}};s.muted&&(f.muted={from:!0,to:!1}),this.emitUserAction(r,"change_volume",{muted:s.muted,volume:s.volume,props:f}),s.volume=Math.max(Math.min(l/1e3,1),0),s.muted&&(s.muted=!1),this.config.showValueLabel&&this.updateVolumeValue()}}},{key:"updateVolumeValue",value:function(){var e=this.player,r=e.volume,s=e.muted,o=this.find(".xgplayer-value-label"),u=Math.max(Math.min(r,1),0);o.innerText=s?0:Math.ceil(u*100)}},{key:"focus",value:function(){var e=this.player;e.focus({autoHide:!1}),this._timerId&&(h.clearTimeout(this,this._timerId),this._timerId=null),h.addClass(this.root,"slide-show")}},{key:"unFocus",value:function(){var e=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,o=arguments.length>2?arguments[2]:void 0,u=this._d,l=this.player;u.isActive||(this._timerId&&(h.clearTimeout(this,this._timerId),this._timerId=null),this._timerId=h.setTimeout(this,function(){u.isActive||(s?l.blur():l.focus(),h.removeClass(e.root,"slide-show"),u.isStart&&e.onBarMouseUp(o)),e._timerId=null},r))}},{key:"changeMuted",value:function(e){e&&e.stopPropagation();var r=this.player,s=this._d;s.isStart&&this.onBarMouseUp(e),this.emitUserAction(e,"change_muted",{muted:r.muted,volume:r.volume,props:{muted:{from:r.muted,to:!r.muted}}}),r.volume>0&&(r.muted=!r.muted),r.volume<.01&&(r.volume=this.config.miniVolume)}},{key:"animate",value:function(e,r){e||r===0?this.setAttr("data-state","mute"):r<.5&&this.icons.volumeSmall?this.setAttr("data-state","small"):this.setAttr("data-state","normal")}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.volumeSmall),this.appendChild(".xgplayer-icon",e.volumeLarge),this.appendChild(".xgplayer-icon",e.volumeMuted)}},{key:"destroy",value:function(){this._timerId&&(h.clearTimeout(this,this._timerId),this._timerId=null),this.unbind("mouseenter",this.onMouseenter),this.unbind(["blur","mouseleave"],this.onMouseleave),this.unbind(".xgplayer-slider","mousedown",this.onBarMousedown),this.unbind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.unbind(".xgplayer-slider","mouseup",this.onBarMouseUp),document.removeEventListener("mouseup",this.onBarMouseUp),this.unbind(".xgplayer-icon",R.device==="mobile"?"touchend":"click",this.changeMutedHandler)}},{key:"render",value:function(){if(!this.config.disable){var e=this.config.default||this.player.volume,r=this.config.showValueLabel;return`
    <xg-icon class="xgplayer-volume" data-state="normal">
      <div class="xgplayer-icon">
      </div>
      <xg-slider class="xgplayer-slider">
        `.concat(r?'<div class="xgplayer-value-label">'.concat(e*100,"</div>"):"",`
        <div class="xgplayer-bar">
          <xg-drag class="xgplayer-drag" style="height: `).concat(e*100,`%"></xg-drag>
        </div>
      </xg-slider>
    </xg-icon>`)}}}],[{key:"pluginName",get:function(){return"volume"}},{key:"defaultConfig",get:function(){return{position:B.CONTROLS_RIGHT,index:1,disable:!1,showValueLabel:!1,default:.6,miniVolume:.2}}}]),i}(O);function hg(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="-4 -6 40 40" fill="none">
  <g clip-path="url(#clip0)">
    <path transform="scale(1.5 1.5)" d="M11.6665 9.16663H4.1665C2.78579 9.16663 1.6665 10.2859 1.6665 11.6666V15.8333C1.6665 17.214 2.78579 18.3333 4.1665 18.3333H11.6665C13.0472 18.3333 14.1665 17.214 14.1665 15.8333V11.6666C14.1665 10.2859 13.0472 9.16663 11.6665 9.16663Z" fill="white"/>
    <path transform="scale(1.5 1.5)" fill-rule="evenodd" clip-rule="evenodd" d="M3.88148 4.06298C3.75371 4.21005 3.67667 4.40231 3.67749 4.61242C3.67847 4.87253 3.79852 5.10435 3.98581 5.25646L6.99111 8.05895C7.32771 8.37283 7.85502 8.35443 8.16891 8.01782C8.48279 7.68122 8.46437 7.15391 8.12778 6.84003L6.62061 5.43457L9.8198 5.4224C9.82848 5.42239 9.8372 5.42221 9.84591 5.4219C10.9714 5.38233 12.0885 5.6285 13.0931 6.13744C14.0976 6.64635 14.957 7.40148 15.5908 8.33234C16.2246 9.2632 16.6122 10.3394 16.7177 11.4606C16.823 12.5819 16.6427 13.7115 16.1934 14.7442C16.0098 15.1661 16.203 15.6571 16.6251 15.8408C17.0471 16.0243 17.5381 15.8311 17.7216 15.4091C18.2833 14.1183 18.5087 12.7063 18.3771 11.3047C18.2453 9.90318 17.7607 8.55792 16.9684 7.39433C16.1761 6.23073 15.1021 5.28683 13.8463 4.65065C12.5946 4.01651 11.203 3.70872 9.80072 3.75583L6.43415 3.76862L7.96326 2.12885C8.27715 1.79225 8.25872 1.26494 7.92213 0.951061C7.58553 0.63718 7.05822 0.655585 6.74433 0.99219L3.90268 4.0395C3.89545 4.04724 3.88841 4.05509 3.88154 4.06303L3.88148 4.06298Z" fill="white"/>
  </g>
  <defs>
    <clipPath id="clip0">
      <rect width="40" height="40" fill="white"/>
    </clipPath>
  </defs>
</svg>
`,"image/svg+xml").firstChild}var vg=function(n){x(i,n);var a=P(i);function i(t){var e;return E(this,i),e=a.call(this,t),e.rotateDeg=e.config.rotateDeg||0,e}return k(i,[{key:"afterCreate",value:function(){var e=this;this.config.disable||(I(w(i.prototype),"afterCreate",this).call(this),this.appendChild(".xgplayer-icon",this.icons.rotate),this.onBtnClick=this.onBtnClick.bind(this),this.bind(".xgplayer-icon",["click","touchend"],this.onBtnClick),this.on(Ut,function(){e.rotateDeg&&h.setTimeout(e,function(){e.updateRotateDeg(e.rotateDeg,e.config.innerRotate)},100)}),this.rotateDeg&&this.updateRotateDeg(this.rotateDeg,this.config.innerRotate))}},{key:"destroy",value:function(){I(w(i.prototype),"destroy",this).call(this),this.unbind(".xgplayer-icon",["click","touchend"],this.onBtnClick)}},{key:"onBtnClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.emitUserAction(e,"rotate"),this.rotate(this.config.clockwise,this.config.innerRotate,1)}},{key:"updateRotateDeg",value:function(e,r){var s=this.player;e||(e=0);var o=this.player,u=o.root,l=o.innerContainer,c=this.player.media,f=u.offsetWidth,v=l&&r?l.offsetHeight:u.offsetHeight,d="100%",g="100%",m=0,p=0;(e===.75||e===.25)&&(d="".concat(v,"px"),g="".concat(f,"px"),m=-(v-f)/2,p=-(f-v)/2);var b="translate(".concat(m,"px,").concat(p,"px) rotate(").concat(e,"turn)"),T={transformOrigin:"center center",transform:b,webKitTransform:b,height:g,width:d},S=r?c:u,$=r?s.getPlugin("poster"):null;Object.keys(T).map(function(L){S.style[L]=T[L],$&&$.root&&($.root.style[L]=T[L])})}},{key:"rotate",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,o=this.player;this.rotateDeg||(this.rotateDeg=0);var u=e?1:-1;this.rotateDeg=(this.rotateDeg+1+u*.25*s)%1,this.updateRotateDeg(this.rotateDeg,r),o.emit(Zc,this.rotateDeg*360)}},{key:"registerIcons",value:function(){return{rotate:hg}}},{key:"render",value:function(){if(!this.config.disable)return`
    <xg-icon class="xgplayer-rotate">
      <div class="xgplayer-icon">
      </div>
      `.concat(Ze(this,"ROTATE_TIPS",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"rotate"}},{key:"defaultConfig",get:function(){return{position:B.CONTROLS_RIGHT,index:6,innerRotate:!0,clockwise:!1,rotateDeg:0,disable:!1}}}]),i}(vt);function dg(){return new DOMParser().parseFromString(`<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd"
    d="M16.5 4.3H3.5C3.38954 4.3 3.3 4.38954 3.3 4.5V15.5C3.3 15.6105 3.38954 15.7 3.5 15.7H8.50005L8.50006 17.5H3.5C2.39543 17.5 1.5 16.6046 1.5 15.5V4.5C1.5 3.39543 2.39543 2.5 3.5 2.5H16.5C17.6046 2.5 18.5 3.39543 18.5 4.5V8.5H16.7V4.5C16.7 4.38954 16.6105 4.3 16.5 4.3ZM12 11.5C11.4477 11.5 11 11.9477 11 12.5L11 16.5C11 17.0523 11.4478 17.5 12 17.5H17.5C18.0523 17.5 18.5 17.0523 18.5 16.5L18.5 12.5C18.5 11.9477 18.0523 11.5 17.5 11.5H12Z"
    fill="white" />
</svg>`,"image/svg+xml").firstChild}function gg(){return new DOMParser().parseFromString(`<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd"
    d="M16.5 4.3H3.5C3.38954 4.3 3.3 4.38954 3.3 4.5V15.5C3.3 15.6105 3.38954 15.7 3.5 15.7H8.50005L8.50006 17.5H3.5C2.39543 17.5 1.5 16.6046 1.5 15.5V4.5C1.5 3.39543 2.39543 2.5 3.5 2.5H16.5C17.6046 2.5 18.5 3.39543 18.5 4.5V8.5H16.7V4.5C16.7 4.38954 16.6105 4.3 16.5 4.3ZM12 11.5C11.4477 11.5 11 11.9477 11 12.5L11 16.5C11 17.0523 11.4478 17.5 12 17.5H17.5C18.0523 17.5 18.5 17.0523 18.5 16.5L18.5 12.5C18.5 11.9477 18.0523 11.5 17.5 11.5H12Z"
    fill="white" />
  <path fill-rule="evenodd" clip-rule="evenodd"
    d="M9.4998 7.7C9.77595 7.7 9.9998 7.47614 9.9998 7.2V6.5C9.9998 6.22386 9.77595 6 9.4998 6H5.5402L5.52754 6.00016H5.5C5.22386 6.00016 5 6.22401 5 6.50016V10.4598C5 10.7359 5.22386 10.9598 5.5 10.9598H6.2C6.47614 10.9598 6.7 10.7359 6.7 10.4598V8.83005L8.76983 10.9386C8.96327 11.1357 9.27984 11.1386 9.47691 10.9451L9.97645 10.4548C10.1735 10.2613 10.1764 9.94476 9.983 9.7477L7.97289 7.7H9.4998Z"
    fill="white" />
</svg>`,"image/svg+xml").firstChild}var Ct={PIP:"picture-in-picture",INLINE:"inline",FULLSCREEN:"fullscreen"},pg=function(n){x(i,n);var a=P(i);function i(){var t;E(this,i);for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return t=a.call.apply(a,[this].concat(r)),_(y(t),"switchPIP",function(o){if(!t.isPIPAvailable())return!1;o.stopPropagation(),t.isPip?(t.exitPIP(),t.emitUserAction(o,"change_pip",{props:"pip",from:!0,to:!1}),t.setAttr("data-state","normal")):t.player.media.readyState===4&&(t.requestPIP(),t.emitUserAction(o,"change_pip",{props:"pip",from:!1,to:!0}),t.setAttr("data-state","pip"))}),t}return k(i,[{key:"beforeCreate",value:function(e){typeof e.player.config.pip=="boolean"&&(e.config.showIcon=e.player.config.pip)}},{key:"afterCreate",value:function(){var e=this;this.isPIPAvailable()&&(I(w(i.prototype),"afterCreate",this).call(this),this.pMode=Ct.INLINE,this.initPipEvents(),this.config.showIcon&&this.initIcons(),this.once(Bi,function(){e.config.showIcon&&(h.removeClass(e.find(".xgplayer-icon"),"xg-icon-disable"),e.bind("click",e.switchPIP))}))}},{key:"registerIcons",value:function(){return{pipIcon:{icon:dg,class:"xg-get-pip"},pipIconExit:{icon:gg,class:"xg-exit-pip"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.pipIcon),this.appendChild(".xgplayer-icon",e.pipIconExit)}},{key:"initPipEvents",value:function(){var e=this,r=this.player;this.leavePIPCallback=function(){var s=r.paused;h.setTimeout(e,function(){!s&&r.mediaPlay()},0),!s&&r.mediaPlay(),e.setAttr("data-state","normal"),r.emit(Pa,!1)},this.enterPIPCallback=function(s){r.emit(Pa,!0),e.pipWindow=s.pictureInPictureWindow,e.setAttr("data-state","pip")},this.onWebkitpresentationmodechanged=function(s){var o=r.media.webkitPresentationMode;e.pMode===Ct.FULLSCREEN&&o!==Ct.FULLSCREEN&&r.onFullscreenChange(null,!1),e.pMode=o,o===Ct.PIP?e.enterPIPCallback(s):o===Ct.INLINE&&e.leavePIPCallback(s)},r.media&&(r.media.addEventListener("enterpictureinpicture",this.enterPIPCallback),r.media.addEventListener("leavepictureinpicture",this.leavePIPCallback),i.checkWebkitSetPresentationMode(r.media)&&r.media.addEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged))}},{key:"requestPIP",value:function(){var e=this.player,r=this.playerConfig;if(!(!this.isPIPAvailable()||this.isPip))try{var s=r.poster;return s&&(e.media.poster=h.typeOf(s)==="String"?s:s.poster),i.checkWebkitSetPresentationMode(e.media)?e.media.webkitSetPresentationMode("picture-in-picture"):e.media.requestPictureInPicture(),!0}catch(o){return console.error("requestPiP",o),!1}}},{key:"exitPIP",value:function(){var e=this.player;try{return this.isPIPAvailable()&&this.isPip&&(i.checkWebkitSetPresentationMode(e.media)?e.media.webkitSetPresentationMode("inline"):document.exitPictureInPicture()),!0}catch(r){return console.error("exitPIP",r),!1}}},{key:"isPip",get:function(){var e=this.player;return document.pictureInPictureElement&&document.pictureInPictureElement===e.media||e.media.webkitPresentationMode===Ct.PIP}},{key:"isPIPAvailable",value:function(){var e=this.player.media,r=h.typeOf(document.pictureInPictureEnabled)==="Boolean"?document.pictureInPictureEnabled:!0;return r&&(h.typeOf(e.disablePictureInPicture)==="Boolean"&&!e.disablePictureInPicture||e.webkitSupportsPresentationMode&&h.typeOf(e.webkitSetPresentationMode)==="Function")}},{key:"destroy",value:function(){I(w(i.prototype),"destroy",this).call(this);var e=this.player;e.media.removeEventListener("enterpictureinpicture",this.enterPIPCallback),e.media.removeEventListener("leavepictureinpicture",this.leavePIPCallback),i.checkWebkitSetPresentationMode(e.media)&&e.media.removeEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged),this.exitPIP(),this.unbind("click",this.btnClick)}},{key:"render",value:function(){if(!(!this.config.showIcon||!this.isPIPAvailable()))return`<xg-icon class="xgplayer-pip">
      <div class="xgplayer-icon xg-icon-disable">
      </div>
      `.concat(Ze(this,"PIP",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"pip"}},{key:"defaultConfig",get:function(){return{position:B.CONTROLS_RIGHT,index:6,showIcon:!1}}},{key:"checkWebkitSetPresentationMode",value:function(e){return typeof e.webkitSetPresentationMode=="function"}}]),i}(vt);function mg(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="40" viewBox="10 0 24 40">
  <path transform="scale(0.038 0.028)" d="M800 380v768h-128v-352l-320 320v-704l320 320v-352z"></path>
</svg>
`,"image/svg+xml").firstChild}var yg=function(n){x(i,n);var a=P(i);function i(t){var e;return E(this,i),e=a.call(this,t),_(y(e),"playNext",function(r){var s=y(e),o=s.player;r.preventDefault(),r.stopPropagation(),e.idx+1<e.config.urlList.length?(e.idx++,e.nextHandler(e.config.urlList[e.idx],e.idx),o.emit(_i,e.idx+1)):(e.nextHandler(),o.emit(_i))}),e.idx=-1,e}return k(i,[{key:"afterCreate",value:function(){!this.config.urlList||this.config.urlList.length===0||(this.appendChild(".xgplayer-icon",this.icons.playNext),this.initEvents())}},{key:"registerIcons",value:function(){return{playNext:mg}}},{key:"initEvents",value:function(){this.nextHandler=this.hook("nextClick",this.changeSrc);var e=R.device==="mobile"?"touchend":"click";this.bind(e,this.playNext),this.show()}},{key:"changeSrc",value:function(e){var r=this.player;e&&(r.pause(),r.currentTime=0,r.switchURL?r.switchURL(e):r.src=e,r.config.url=e,r.play())}},{key:"destroy",value:function(){this.unbind(["touchend","click"],this.playNext)}},{key:"render",value:function(){if(!(!this.config.urlList||this.config.urlList.length===0))return`
     <xg-icon class="xgplayer-playnext">
      <div class="xgplayer-icon">
      </div>
      `.concat(Ze(this,"PLAYNEXT_TIPS",this.playerConfig.isHideTips),`
     </xg-icon>
    `)}}],[{key:"pluginName",get:function(){return"playNext"}},{key:"defaultConfig",get:function(){return{position:B.CONTROLS_LEFT,index:1,url:null,urlList:[]}}}]),i}(O),cf={exports:{}};(function(n,a){(function(i,t){n.exports=t()})(lr,function(){return function i(t,e,r){var s=window,o="application/octet-stream",u=r||o,l=t,c=!e&&!r&&l,f=document.createElement("a"),v=function(H){return String(H)},d=s.Blob||s.MozBlob||s.WebKitBlob||v,g=e||"download",m,p;if(d=d.call?d.bind(s):Blob,String(this)==="true"&&(l=[l,u],u=l[0],l=l[1]),c&&c.length<2048&&(g=c.split("/").pop().split("?")[0],f.href=c,f.href.indexOf(c)!==-1)){var b=new XMLHttpRequest;return b.open("GET",c,!0),b.responseType="blob",b.onload=function(H){i(H.target.response,g,o)},setTimeout(function(){b.send()},0),b}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(l))if(l.length>1024*1024*1.999&&d!==v)l=L(l),u=l.type||o;else return navigator.msSaveBlob?navigator.msSaveBlob(L(l),g):oe(l);else if(/([\x80-\xff])/.test(l)){var T=0,S=new Uint8Array(l.length),$=S.length;for(T;T<$;++T)S[T]=l.charCodeAt(T);l=new d([S],{type:u})}m=l instanceof d?l:new d([l],{type:u});function L(H){var me=H.split(/[:;,]/),xe=me[1],N=me[2]=="base64"?atob:decodeURIComponent,re=N(me.pop()),ye=re.length,_e=0,rt=new Uint8Array(ye);for(_e;_e<ye;++_e)rt[_e]=re.charCodeAt(_e);return new d([rt],{type:xe})}function oe(H,me){if("download"in f)return f.href=H,f.setAttribute("download",g),f.className="download-js-link",f.innerHTML="downloading...",f.style.display="none",document.body.appendChild(f),setTimeout(function(){f.click(),document.body.removeChild(f),me===!0&&setTimeout(function(){s.URL.revokeObjectURL(f.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(H)&&(H="data:"+H.replace(/^data:([\w\/\-\+]+)/,o)),window.open(H)||confirm(`Displaying New Document

Use Save As... to download, then click back to return to this page.`)&&(location.href=H),!0;var xe=document.createElement("iframe");document.body.appendChild(xe),!me&&/^data:/.test(H)&&(H="data:"+H.replace(/^data:([\w\/\-\+]+)/,o)),xe.src=H,setTimeout(function(){document.body.removeChild(xe)},333)}if(navigator.msSaveBlob)return navigator.msSaveBlob(m,g);if(s.URL)oe(s.URL.createObjectURL(m),!0);else{if(typeof m=="string"||m.constructor===v)try{return oe("data:"+u+";base64,"+s.btoa(m))}catch{return oe("data:"+u+","+encodeURIComponent(m))}p=new FileReader,p.onload=function(H){oe(this.result)},p.readAsDataURL(m)}return!0}})})(cf);var _g=cf.exports;const bg=us(_g);function Cg(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24">
  <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
    <g transform="translate(-488.000000, -340.000000)" fill="#FFFFFF">
      <g id="Group-2">
        <g id="volme_big-copy" transform="translate(488.000000, 340.000000)">
          <rect id="Rectangle-18" x="11" y="4" width="2" height="12" rx="1"></rect>
          <rect id="Rectangle-2" x="3" y="18" width="18" height="2" rx="1"></rect>
          <rect id="Rectangle-2" transform="translate(4.000000, 17.500000) rotate(90.000000) translate(-4.000000, -17.500000) " x="1.5" y="16.5" width="5" height="2" rx="1"></rect><rect id="Rectangle-2-Copy-3" transform="translate(20.000000, 17.500000) rotate(90.000000) translate(-20.000000, -17.500000) " x="17.5" y="16.5" width="5" height="2" rx="1"></rect>
          <path d="M9.48791171,8.26502656 L9.48791171,14.2650266 C9.48791171,14.8173113 9.04019646,15.2650266 8.48791171,15.2650266 C7.93562696,15.2650266 7.48791171,14.8173113 7.48791171,14.2650266 L7.48791171,7.26502656 C7.48791171,6.71274181 7.93562696,6.26502656 8.48791171,6.26502656 L15.4879117,6.26502656 C16.0401965,6.26502656 16.4879117,6.71274181 16.4879117,7.26502656 C16.4879117,7.81731131 16.0401965,8.26502656 15.4879117,8.26502656 L9.48791171,8.26502656 Z" id="Combined-Shape" transform="translate(11.987912, 10.765027) scale(1, -1) rotate(45.000000) translate(-11.987912, -10.765027) "></path>
        </g>
      </g>
    </g>
  </g>
</svg>
`,"image/svg+xml").firstChild}var Tg=function(n){x(i,n);var a=P(i);function i(t){var e;return E(this,i),e=a.call(this,t),_(y(e),"download",function(r){if(!e.isLock){e.emitUserAction(r,"download");var s=e.getAbsoluteURL(e.player.src);bg(s),e.isLock=!0,e.timer=window.setTimeout(function(){e.isLock=!1,window.clearTimeout(e.timer),e.timer=null},300)}}),e.timer=null,e.isLock=!1,e}return k(i,[{key:"afterCreate",value:function(){I(w(i.prototype),"afterCreate",this).call(this),!this.config.disable&&(this.appendChild(".xgplayer-icon",this.icons.download),this.bind(["click","touchend"],this.download))}},{key:"registerIcons",value:function(){return{download:Cg}}},{key:"getAbsoluteURL",value:function(e){if(!e.match(/^https?:\/\//)){var r=document.createElement("div");r.innerHTML='<a href="'.concat(e,'">x</a>'),e=r.firstChild.href}return e}},{key:"destroy",value:function(){I(w(i.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.download),window.clearTimeout(this.timer),this.timer=null}},{key:"render",value:function(){if(!this.config.disable)return`<xg-icon class="xgplayer-download">
   <div class="xgplayer-icon">
   </div>
   `.concat(Ze(this,"DOWNLOAD_TIPS",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"download"}},{key:"defaultConfig",get:function(){return{position:B.CONTROLS_RIGHT,index:3,disable:!0}}}]),i}(vt),Sg=function(n){x(i,n);var a=P(i);function i(){return E(this,i),a.apply(this,arguments)}return k(i,[{key:"beforeCreate",value:function(e){typeof e.player.config.screenShot=="boolean"&&(e.config.disable=!e.player.config.screenShot)}},{key:"afterCreate",value:function(){I(w(i.prototype),"afterCreate",this).call(this),this.appendChild(".xgplayer-icon",this.icons.screenshotIcon);var e=this.config;this.initSize=function(r){e.fitVideo&&(e.width=r.vWidth,e.height=r.vHeight)},this.once(Ut,this.initSize)}},{key:"onPluginsReady",value:function(){this.show(),this.onClickBtn=this.onClickBtn.bind(this),this.bind(["click","touchend"],this.onClickBtn)}},{key:"saveScreenShot",value:function(e,r){var s=document.createElement("a");s.href=e,s.download=r;var o=document.createEvent("MouseEvents");o.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),s.dispatchEvent(o)}},{key:"createCanvans",value:function(e,r){var s=document.createElement("canvas");this.canvasCtx=s.getContext("2d"),this.canvas=s,s.width=e||this.config.width,s.height=r||this.config.height}},{key:"onClickBtn",value:function(e){var r=this;e.preventDefault(),e.stopPropagation(),this.emitUserAction(e,"shot"),this.shot().then(function(s){r.emit(Qc,s),r.saveScreenShot(s,r.config.name+r.config.format)})}},{key:"shot",value:function(e,r){var s=this,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{quality:.92,type:"image/png"},u=this.config,l=this.player,c=o.quality||u.quality,f=o.type||u.type;return new Promise(function(v,d){var g=null;l.media.canvas?g=l.media.canvas:(s.canvas?(s.canvas.width=e||u.width,s.canvas.height=r||u.height):s.createCanvans(e,r),s.canvasCtx.drawImage(l.media,0,0,e||u.width,r||u.height),g=s.canvas);var m=g.toDataURL(f,c).replace(f,"image/octet-stream");m=m.replace(/^data:image\/[^;]+/,"data:application/octet-stream"),v(m)})}},{key:"registerIcons",value:function(){return{screenshotIcon:null}}},{key:"destroy",value:function(){I(w(i.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.onClickBtn),this.off(Ut,this.initSize)}},{key:"render",value:function(){if(!this.config.disable){var e=this.icons.screenshotIcon?"xgplayer-icon":"xgplayer-icon btn-text",r="SCREENSHOT";return`
      <xg-icon class="xgplayer-shot">
      <div class="`.concat(e,`">
      `).concat(this.icons.screenshotIcon?"":'<span lang-key="'.concat(this.i18nKeys[r],'">').concat(this.i18n[r],"</span>"),` 
      </div>
    </xg-icon>`)}}}],[{key:"pluginName",get:function(){return"screenShot"}},{key:"defaultConfig",get:function(){return{position:B.CONTROLS_RIGHT,index:5,quality:.92,type:"image/png",format:".png",width:600,height:337,fitVideo:!0,disable:!1,name:"screenshot"}}}]),i}(vt),Eg=function(){function n(a){E(this,n),this.config=a.config,this.parent=a.root,this.root=h.createDom("ul","",{},"xg-options-list ".concat(this.config.className)),a.root.appendChild(this.root),this.onItemClick=this.onItemClick.bind(this),this.renderItemList();var i=R.device==="mobile"?"touchend":"click";this._delegates=O.delegate.call(this,this.root,"li",i,this.onItemClick)}return k(n,[{key:"renderItemList",value:function(i){var t=this,e=this.config,r=this.root;i?e.data=i:i=e.data,e.style&&Object.keys(e.style).map(function(s){r.style[s]=e[s]}),i.length>0&&(this.attrKeys=Object.keys(i[0])),this.root.innerHTML="",i.map(function(s,o){var u=s.selected?"option-item selected":"option-item";s["data-index"]=o,t.root.appendChild(h.createDom("li","<span>".concat(s.showText,"</span>"),s,u))})}},{key:"onItemClick",value:function(i){i.delegateTarget||(i.delegateTarget=i.target);var t=i.delegateTarget;if(t&&h.hasClass(t,"selected"))return!1;var e=typeof this.config.onItemClick=="function"?this.config.onItemClick:null,r=this.root.querySelector(".selected");h.addClass(t,"selected"),r&&h.removeClass(r,"selected"),e(i,{from:r?this.getAttrObj(r,this.attrKeys):null,to:this.getAttrObj(t,this.attrKeys)})}},{key:"getAttrObj",value:function(i,t){if(!i||!t)return{};var e={};t.map(function(s){e[s]=i.getAttribute(s)});var r=i.getAttribute("data-index");return r&&(e.index=Number(r)),e}},{key:"show",value:function(){h.removeClass(this.root,"hide"),h.addClass(this.root,"active")}},{key:"hide",value:function(){h.removeClass(this.root,"active"),h.addClass(this.root,"hide")}},{key:"destroy",value:function(){this._delegates&&(this._delegates.map(function(i){i.destroy&&i.destroy()}),this._delegates=null),this.root.innerHTML=null,this.parent.removeChild(this.root),this.root=null}}]),n}(),Qt={RIGHT_SIDE:"rightSide",MIDDLE:"middle"},jr=R.device==="mobile",Ei=function(n){x(i,n);var a=P(i);function i(t){var e;return E(this,i),e=a.call(this,t),_(y(e),"onEnter",function(r){r.preventDefault(),r.stopPropagation(),e.emit("icon_mouseenter",{pluginName:e.pluginName}),e.toggle(!0)}),_(y(e),"onLeave",function(r){r.preventDefault(),r.stopPropagation(),e.emit("icon_mouseleave",{pluginName:e.pluginName}),e.config.listType!==Qt.RIGHT_SIDE&&e.isActive&&e.toggle(!1)}),_(y(e),"onListEnter",function(r){console.log("onListEnter"),e.enterType=2}),_(y(e),"onListLeave",function(r){console.log("onListLeave",r.target),e.enterType=0,e.isActive&&e.toggle(!1)}),e.isIcons=!1,e.isActive=!1,e.curValue=null,e.curIndex=0,e}return k(i,[{key:"updateLang",value:function(e){this.renderItemList(this.config.list,this.curIndex)}},{key:"afterCreate",value:function(){var e=this,r=this.config;this.initIcons(),jr&&r.listType!==Qt.MIDDLE&&(r.listType="rightSide"),r.hidePortrait&&h.addClass(this.root,"portrait"),this.once(Ce,function(){r.list&&r.list.length>0&&(e.renderItemList(r.list),e.show())}),jr&&this.on(ds,function(){e.isActive&&(e.optionsList&&e.optionsList.hide(),e.isActive=!1)}),this.activeEvent=jr?"touchend":"mouseenter",this.bind(this.activeEvent,this.onEnter),this.bind("mouseleave",this.onLeave),this.isIcons&&this.bind("click",this.onIconClick)}},{key:"initIcons",value:function(){var e=this,r=this.icons,s=Object.keys(r),o=!1;s.length>0&&(s.forEach(function(u){e.appendChild(".xgplayer-icon",r[u]),!o&&(o=r[u])}),this.isIcons=o),!o&&(this.appendChild(".xgplayer-icon",h.createDom("span","",{},"icon-text")),h.addClass(this.find(".xgplayer-icon"),"btn-text"))}},{key:"show",value:function(){!this.config.list||this.config.list.length<2||h.addClass(this.root,"show")}},{key:"hide",value:function(){h.removeClass(this.root,"show")}},{key:"getTextByLang",value:function(e,r,s){if(e===void 0)return"";var o=this.config.list;!s&&(s=this.player.lang),r=!r||h.isUndefined(e[r])?"text":r,typeof e=="number"&&(e=o[e]);try{return Q(e[r])==="object"?e[r][s]||e[r].zh:e[r]}catch(u){return console.warn(u),""}}},{key:"toggle",value:function(e){if(e!==this.isActive){var r=this.player.controls,s=this.config.listType;e?(s==="rightSide"?r.blur():r.focus(),this.optionsList&&this.optionsList.show()):(s==="rightSide"?r.focus():r.focusAwhile(),this.optionsList&&this.optionsList.hide()),this.isActive=e}}},{key:"onItemClick",value:function(e,r){e.preventDefault(),e.stopPropagation();var s=this.config,o=s.listType,u=s.list;this.curIndex=r.to.index,this.curItem=u[this.curIndex],this.changeCurrentText();var l=this.config.isItemClickHide;(l||jr||o===Qt.RIGHT_SIDE)&&this.toggle(!1)}},{key:"onIconClick",value:function(e){}},{key:"changeCurrentText",value:function(){if(!this.isIcons){var e=this.config.list,r=this.curIndex<e.length?this.curIndex:0,s=e[r];s&&(this.find(".icon-text").innerHTML=this.getTextByLang(s,"iconText"))}}},{key:"renderItemList",value:function(e,r){var s=this,o=this.config,u=this.optionsList,l=this.player;if(typeof r=="number"&&(this.curIndex=r,this.curItem=o.list[r]),u){u.renderItemList(e),this.changeCurrentText();return}var c={config:{data:e||[],className:o.listType===Qt.RIGHT_SIDE?"right-side":"",onItemClick:function(v,d){s.onItemClick(v,d)}},root:o.listType===Qt.RIGHT_SIDE?l.root:this.root};this.config.isShowIcon&&(this.optionsList=new Eg(c),this.changeCurrentText(),this.show())}},{key:"destroy",value:function(){this.unbind(this.activeEvent,this.onEnter),this.unbind("mouseleave",this.onLeave),this.optionsList&&(this.optionsList.destroy(),this.optionsList=null)}},{key:"render",value:function(){if(this.config.isShowIcon)return'<xg-icon class="xg-options-icon '.concat(this.config.className||"",`">
    <div class="xgplayer-icon">
    </div>
   </xg-icon>`)}}],[{key:"pluginName",get:function(){return"optionsIcon"}},{key:"defaultConfig",get:function(){return{position:B.CONTROLS_RIGHT,index:100,list:[],listType:"middle",listStyle:{},hidePortrait:!0,isShowIcon:!1,isItemClickHide:!0}}}]),i}(O),kg=function(n){x(i,n);var a=P(i);function i(t){var e;return E(this,i),e=a.call(this,t),e.curTime=0,e.isPaused=!0,e}return k(i,[{key:"beforeCreate",value:function(e){var r=e.config.list;Array.isArray(r)&&r.length>0&&(e.config.list=r.map(function(s){return!s.text&&s.name&&(s.text=s.name),s.text||(s.text=s.definition),s}))}},{key:"afterCreate",value:function(){var e=this;I(w(i.prototype),"afterCreate",this).call(this),this.on("resourceReady",function(r){e.changeDefinitionList(r)}),this.on(_s,function(r){e.renderItemList(e.config.list,r.to)}),this.player.definitionList.length<2&&this.hide()}},{key:"show",value:function(){!this.config.list||this.config.list.length<2||h.addClass(this.root,"show")}},{key:"initDefinition",value:function(){var e=this.config,r=e.list,s=e.defaultDefinition;if(r.length>0){var o=null;r.map(function(u){u.definition===s&&(o=u)}),o||(o=r[0]),this.changeDefinition(o)}}},{key:"renderItemList",value:function(){var e=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.config.list||[],s=arguments.length>1?arguments[1]:void 0,o=s&&s.definition?s.definition:this.config.defaultDefinition;s&&r.forEach(function(c){c.selected=!1});var u=0,l=r.map(function(c,f){var v=V(V({},c),{},{showText:e.getTextByLang(c)||c.definition,selected:!1});return(c.selected||c.definition&&c.definition==o)&&(v.selected=!0,u=f),v});I(w(i.prototype),"renderItemList",this).call(this,l,u)}},{key:"changeDefinitionList",value:function(e){Array.isArray(e)&&(this.config.list=e.map(function(r){return!r.text&&r.name&&(r.text=r.name),r.text||(r.text=r.definition),r}),this.renderItemList(),this.config.list.length<2?this.hide():this.show())}},{key:"changeDefinition",value:function(e,r){this.player.changeDefinition(e,r)}},{key:"onItemClick",value:function(e,r){var s=this.player.definitionList;I(w(i.prototype),"onItemClick",this).apply(this,arguments),this.emitUserAction(e,"change_definition",{from:r.from,to:r.to});for(var o=0;o<s.length;o++)r.to&&s[o].definition===r.to.definition&&(r.to.url=s[o].url),r.from&&s[o].definition===r.from.definition&&(r.from.url=s[o].url);this.player.changeDefinition(r.to,r.from)}}],[{key:"pluginName",get:function(){return"definition"}},{key:"defaultConfig",get:function(){return V(V({},Ei.defaultConfig),{},{position:B.CONTROLS_RIGHT,index:3,list:[],defaultDefinition:"",disable:!1,hidePortrait:!1,className:"xgplayer-definition",isShowIcon:!0})}}]),i}(Ei),wg=function(n){x(i,n);var a=P(i);function i(t){var e;return E(this,i),e=a.call(this,t),e.curRate=1,e}return k(i,[{key:"beforeCreate",value:function(e){var r=e.player.config.playbackRate,s=r?Array.isArray(r)?r:e.config.list:[];Array.isArray(s)&&(e.config.list=s.map(function(o){return typeof o=="number"?o={rate:o,text:"".concat(o,"x")}:!o.text&&o.rate&&(o.text="".concat(o.rate,"x")),o}))}},{key:"afterCreate",value:function(){var e=this;I(w(i.prototype),"afterCreate",this).call(this),this.on(Kc,function(){e.curValue!==e.player.playbackRate&&e.renderItemList()}),this.renderItemList()}},{key:"show",value:function(){!this.config.list||this.config.list.length===0||I(w(i.prototype),"show",this).call(this)}},{key:"onItemClick",value:function(e,r){I(w(i.prototype),"onItemClick",this).apply(this,arguments);var s=e.delegateTarget,o=Number(s.getAttribute("rate"));if(!o||o===this.curValue)return!1;var u={playbackRate:{from:this.player.playbackRate,to:o}};this.emitUserAction(e,"change_rate",{props:u}),this.curValue=o,this.player.playbackRate=o}},{key:"renderItemList",value:function(){var e=this,r=this.player.playbackRate||1;this.curValue=r;var s=-1,o=this.config.list.map(function(u,l){var c={rate:u.rate};return c.rate===r&&(c.selected=!0,s=l),c.showText=e.getTextByLang(u),c});I(w(i.prototype),"renderItemList",this).call(this,o,s)}},{key:"changeCurrentText",value:function(){if(!this.isIcons){var e=this.config.list,r=this.curIndex<e.length?this.curIndex:0,s=e[r],o="";!s||this.curIndex<0?o="".concat(this.player.playbackRate,"x"):o=this.getTextByLang(s,"iconText"),this.find(".icon-text").innerHTML=o}}},{key:"destroy",value:function(){I(w(i.prototype),"destroy",this).call(this)}}],[{key:"pluginName",get:function(){return"playbackRate"}},{key:"defaultConfig",get:function(){return V(V({},Ei.defaultConfig),{},{position:B.CONTROLS_RIGHT,index:4,list:[2,1.5,1,.75,.5],className:"xgplayer-playbackrate",isShowIcon:!0,hidePortrait:!1})}}]),i}(Ei);function Ig(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40">
  <path fill="#fff" transform="scale(1.3, 1.3)" class='path_full' d="M9,10v1a.9.9,0,0,1-1,1,.9.9,0,0,1-1-1V9A.9.9,0,0,1,8,8h2a.9.9,0,0,1,1,1,.9.9,0,0,1-1,1Zm6,4V13a1,1,0,0,1,2,0v2a.9.9,0,0,1-1,1H14a1,1,0,0,1,0-2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>
</svg>
`,"image/svg+xml").firstChild}function xg(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40">
  <path fill="#fff" transform="scale(1.3, 1.3)" d="M9,10V9a.9.9,0,0,1,1-1,.9.9,0,0,1,1,1v2a.9.9,0,0,1-1,1H8a.9.9,0,0,1-1-1,.9.9,0,0,1,1-1Zm6,4v1a1,1,0,0,1-2,0V13a.9.9,0,0,1,1-1h2a1,1,0,0,1,0,2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>
</svg>
`,"image/svg+xml").firstChild}var Jo=function(n){x(i,n);var a=P(i);function i(){return E(this,i),a.apply(this,arguments)}return k(i,[{key:"beforeCreate",value:function(e){typeof e.player.config.cssFullscreen=="boolean"&&(e.config.disable=!e.player.config.cssFullscreen)}},{key:"afterCreate",value:function(){var e=this;I(w(i.prototype),"afterCreate",this).call(this),!this.config.disable&&(this.config.target&&(this.playerConfig.fullscreenTarget=this.config.target),this.initIcons(),this.on(mi,function(r){e.animate(r)}),this.btnClick=this.btnClick.bind(this),this.handleCssFullscreen=this.hook("cssFullscreen_change",this.btnClick,{pre:function(s){s.preventDefault(),s.stopPropagation()}}),this.bind(["click","touchend"],this.handleCssFullscreen))}},{key:"initIcons",value:function(){var e=this.icons,r=this.find(".xgplayer-icon");r.appendChild(e.cssFullscreen),r.appendChild(e.exitCssFullscreen)}},{key:"btnClick",value:function(e){e.preventDefault(),e.stopPropagation();var r=this.player.isCssfullScreen;this.emitUserAction(e,"switch_cssfullscreen",{cssfullscreen:r}),r?this.player.exitCssFullscreen():this.player.getCssFullscreen()}},{key:"animate",value:function(e){this.root&&(e?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.switchTips(e))}},{key:"switchTips",value:function(e){var r=this.i18nKeys,s=this.find(".xg-tips");s&&this.changeLangTextKey(s,e?r.EXITCSSFULLSCREEN_TIPS:r.CSSFULLSCREEN_TIPS)}},{key:"registerIcons",value:function(){return{cssFullscreen:{icon:Ig,class:"xg-get-cssfull"},exitCssFullscreen:{icon:xg,class:"xg-exit-cssfull"}}}},{key:"destroy",value:function(){I(w(i.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return`<xg-icon class='xgplayer-cssfullscreen'>
    <div class="xgplayer-icon">
    </div>
    `.concat(Ze(this,"CSSFULLSCREEN_TIPS",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"cssFullscreen"}},{key:"defaultConfig",get:function(){return{position:B.CONTROLS_RIGHT,index:1,disable:!1,target:null}}}]),i}(vt),Pg=function(n){x(i,n);var a=P(i);function i(){return E(this,i),a.apply(this,arguments)}return k(i,[{key:"afterCreate",value:function(){var e=this;this.clickHandler=this.hook("errorRetry",this.errorRetry,{pre:function(s){s.preventDefault(),s.stopPropagation()}}),this.onError=this.hook("showError",this.handleError),this.bind(".xgplayer-error-refresh","click",this.clickHandler),this.on(Er,function(r){e.onError(r)})}},{key:"errorRetry",value:function(e){this.emitUserAction(e,"error_retry",{}),this.player.retry()}},{key:"handleError",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=this.player,s=e.errorType,o=r.errorNote?this.i18n[r.errorNote]:"";if(!o)switch(s){case"decoder":o=this.i18n.MEDIA_ERR_DECODE;break;case"network":o=this.i18n.MEDIA_ERR_NETWORK;break;default:o=this.i18n.MEDIA_ERR_SRC_NOT_SUPPORTED}this.find(".xgplayer-error-text").innerHTML=o,this.find(".xgplayer-error-tips").innerHTML="".concat(this.i18n.REFRESH_TIPS,'<span class="xgplayer-error-refresh">').concat(this.i18n.REFRESH,"</span>")}},{key:"destroy",value:function(){this.unbind(".xgplayer-error-refresh","click",this.clickHandler)}},{key:"render",value:function(){return`<xg-error class="xgplayer-error">
      <div class="xgplayer-errornote">
       <span class="xgplayer-error-text"></span>
       <span class="xgplayer-error-tips"><em class="xgplayer-error-refresh"></em></span>
      </div>
    </xg-error>`}}],[{key:"pluginName",get:function(){return"error"}}]),i}(O),Og=function(n){x(i,n);var a=P(i);function i(){return E(this,i),a.apply(this,arguments)}return k(i,[{key:"afterCreate",value:function(){var e=this;this.intervalId=0,this.customConfig=null,this.bind(".highlight",["click","touchend"],function(r){(e.config.onClick||e.customOnClick)&&(r.preventDefault(),r.stopPropagation(),e.customOnClick?e.customOnClick(r):e.config.onClick(r))}),this.player.showPrompt=function(){e.show.apply(e,arguments)},this.player.hidePrompt=function(){e.hide()}}},{key:"setStyle",value:function(e){var r=this;Object.keys(e).map(function(s){r.root.style[s]=e[s]})}},{key:"show",value:function(e){var r=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){};if(e){this.customOnClick=o;var u=this.config.interval;this.intervalId&&(clearTimeout(this.intervalId),this.intervalId=null),h.addClass(this.root,"show"),s.mode==="arrow"&&h.addClass(this.root,"arrow"),typeof e=="string"?this.find(".xgplayer-prompt-detail").innerHTML=e:this.find(".xgplayer-prompt-detail").innerHTML="".concat(e.text||"")+"".concat(e.highlight?'<i class="highlight">'.concat(e.highlight,"</i>"):""),s.style&&this.setStyle(s.style);var l=typeof s.autoHide=="boolean"?s.autoHide:this.config.autoHide;if(l){var c=s.interval||u;this.intervalId=setTimeout(function(){r.hide()},c)}}}},{key:"hide",value:function(){h.removeClass(this.root,"show"),h.removeClass(this.root,"arrow"),this.root.removeAttribute("style"),this.customOnClick=null}},{key:"render",value:function(){return'<xg-prompt class="xgplayer-prompt '.concat(C.CONTROLS_FOLLOW,`">
    <span class="xgplayer-prompt-detail"></span>
    </xg-prompt>`)}}],[{key:"pluginName",get:function(){return"prompt"}},{key:"defaultConfig",get:function(){return{interval:3e3,style:{},mode:"arrow",autoHide:!0,detail:{text:"",highlight:""},onClick:function(){}}}}]),i}(O),Zo={time:0,text:"",id:1,duration:1,color:"#fff",style:{},width:6,height:6};function ff(n){Object.keys(Zo).map(function(a){n[a]===void 0&&(n[a]=Zo[a])})}var Qo={_updateDotDom:function(a,i){if(i){var t=this.calcuPosition(a.time,a.duration),e=a.style||{};e.left="".concat(t.left,"%"),e.width="".concat(t.width,"%"),i.setAttribute("data-text",a.text),i.setAttribute("data-time",a.time),t.isMini?h.addClass(i,"mini"):h.removeClass(i,"mini"),Object.keys(e).map(function(r){i.style[r]=e[r]})}},initDots:function(){var a=this;this._ispots.map(function(i){a.createDot(i,!1)}),this.ispotsInit=!0},createDot:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=this.player.plugins.progress;if(t&&(i&&(ff(a),this._ispots.push(a)),!(!this.ispotsInit&&i))){var e=this.calcuPosition(a.time,a.duration),r=a.style||{};r.left="".concat(e.left,"%"),r.width="".concat(e.width,"%");var s="xgspot_".concat(a.id," xgplayer-spot");e.isMini&&(s+=" mini");var o=h.createDom("xg-spot",a.template||"",{"data-text":a.text,"data-time":a.time,"data-id":a.id},s);Object.keys(r).map(function(u){o.style[u]=r[u]}),t.outer&&t.outer.appendChild(o)}},findDot:function(a){if(this.player.plugins.progress){var i=this._ispots.filter(function(t,e){return t.id===a});return i.length>0?i[0]:null}},updateDot:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=this.player.plugins.progress;if(t){var e=this.findDot(a.id);if(e&&Object.keys(a).map(function(s){e[s]=a[s]}),!!this.ispotsInit){var r=t.find('xg-spot[data-id="'.concat(a.id,'"]'));r&&(this._updateDotDom(a,r),i&&this.showDot(a.id))}}},deleteDot:function(a){var i=this._ispots,t=this.player.plugins.progress;if(t){for(var e=[],r=0;r<i.length;r++)i[r].id===a&&e.push(r);for(var s=e.length,o=s-1;o>=0;o--)if(i.splice(e[o],1),this.ispotsInit){var u=t.find('xg-spot[data-id="'.concat(a,'"]'));u&&u.parentElement.removeChild(u)}}},deleteAllDots:function(){var a=this.player.plugins.progress;if(a){if(!this.ispotsInit){this._ispots=[];return}for(var i=a.root.getElementsByTagName("xg-spot"),t=i.length-1;t>=0;t--)a.outer.removeChild(i[t]);this._ispots=[]}},updateAllDots:function(){var a=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=this.player.plugins.progress;if(t){if(!this.ispotsInit){this._ispots=i;return}this._ispots=[];var e=t.root.getElementsByTagName("xg-spot"),r=e.length;if(r>i.length)for(var s=r-1;s>i.length-1;s--)t.outer.removeChild(e[s]);i.forEach(function(o,u){u<r?(e[u].setAttribute("data-id","".concat(o.id)),a._ispots.push(o),a.updateDot(o)):a.createDot(o)})}},updateDuration:function(){var a=this,i=this.player.plugins.progress;if(i){var t=this._ispots;t.forEach(function(e){var r=i.find('xg-spot[data-id="'.concat(e.id,'"]'));a._updateDotDom(e,r)})}},getAllDotsDom:function(){var a=this.player.plugins.progress;if(!a)return[];var i=a.root.getElementsByTagName("xg-spot");return i},getDotDom:function(a){var i=this.player.plugins.progress;if(i)return i.find('xg-spot[data-id="'.concat(a,'"]'))}};function Rg(n){var a=n.config,i=n.player;Object.keys(Qo).map(function(e){n[e]=Qo[e].bind(n)});var t=i.config.progressDot||a.ispots||[];n._ispots=t.map(function(e){return ff(e),e}),n.ispotsInit=!1,n.on(Je,function(){n.ispotsInit?n.updateDuration():n.initDots()})}var Tt={dragmove:"onProgressMove",dragstart:"onProgressDragStart",dragend:"onProgressDragEnd",click:"onProgressClick",mouseover:"onProgressMouseOver",mouseenter:"onProgressMove"},Ag=function(n){x(i,n);var a=P(i);function i(t){var e;return E(this,i),e=a.call(this,t),_(y(e),"onMousemove",function(r){if(!e.config.disable){if(h.hasClass(r.target,"xg-spot-content")&&e.config.isHideThumbnailHover){e.player.plugins.progress.onMouseLeave(r);return}(e._state.f||h.hasClass(r.target,"xg-spot-content"))&&(h.event(r),r.stopPropagation())}}),_(y(e),"onMousedown",function(r){e.config.disable||(e._state.f||h.hasClass(r.target,"xg-spot-content"))&&(h.event(r),r.stopPropagation())}),_(y(e),"onMouseup",function(r){if(e.isDrag){var s=e.player.plugins.progress;s&&s.pos&&(s.onMouseUp(r),!s.pos.isEnter&&s.onMouseLeave(r))}}),_(y(e),"onDotMouseLeave",function(r){if(!e.config.disable){e._curDot.removeEventListener("mouseleave",e.onDotMouseLeave),e.blurDot(r.target),e._curDot=null;var s=e.player.plugins.progress;s&&s.enableBlur(),e.show()}}),_(y(e),"onProgressMouseOver",function(r,s){if(!e.config.disable&&h.hasClass(s.target,"xgplayer-spot")&&!e._curDot){e._curDot=s.target,e.focusDot(s.target),e._curDot.children.length>0&&e.hide();var o=e.player.plugins.progress;o&&o.disableBlur(),e._curDot.addEventListener("mouseleave",e.onDotMouseLeave)}}),e._ispots=[],e.videoPreview=null,e.videothumbnail=null,e.thumbnail=null,e.timeStr="",e._state={now:0,f:!1},e}return k(i,[{key:"beforeCreate",value:function(e){var r=e.player.plugins.progress;r&&(e.root=r.root)}},{key:"afterCreate",value:function(){var e=this;this._curDot=null,this.handlerSpotClick=this.hook("spotClick",function(r,s){s.currentTime&&e.player.seek(s.currentTime)}),this.transformTimeHook=this.hook("transformTime",function(r){e.setTimeContent(h.format(r))}),Rg(this),this.on(Je,function(){e.show()}),this.config.disable&&this.disable(),this.extTextRoot=this.find(".xg-spot-ext-text")}},{key:"setConfig",value:function(e){var r=this;e&&Object.keys(e).map(function(s){r.config[s]=e[s]})}},{key:"onPluginsReady",value:function(){var e=this.player;e.plugins.progress&&(this.previewLine=this.find(".xg-spot-line"),this.timePoint=this.find(".xgplayer-progress-point"),this.timeText=this.find(".xg-spot-time"),this.tipText=this.find(".spot-inner-text"),this._hasThumnail=!1,this.registerThumbnail(),this.bindEvents())}},{key:"bindEvents",value:function(){var e=this,r=this.player.plugins.progress;if(r&&(Object.keys(Tt).map(function(o){e[Tt[o]]=e[Tt[o]].bind(e),r.addCallBack(o,e[Tt[o]])}),R.device!=="mobile")){this.bind(".xg-spot-info","mousemove",this.onMousemove),this.bind(".xg-spot-info","mousedown",this.onMousedown),this.bind(".xg-spot-info","mouseup",this.onMouseup);var s=this.hook("previewClick",function(){});this.handlerPreviewClick=function(o){o.stopPropagation(),s(parseInt(e._state.now*1e3,10)/1e3,o)},this.bind(".xg-spot-content","mouseup",this.handlerPreviewClick)}}},{key:"onProgressMove",value:function(e,r){this.config.disable||!this.player.duration||this.updatePosition(e.offset,e.width,e.currentTime,e.e)}},{key:"onProgressDragStart",value:function(e){this.config.disable||!this.player.duration||(this.isDrag=!0,this.videoPreview&&h.addClass(this.videoPreview,"show"))}},{key:"onProgressDragEnd",value:function(e){this.config.disable||!this.player.duration||(this.isDrag=!1,this.videoPreview&&h.removeClass(this.videoPreview,"show"))}},{key:"onProgressClick",value:function(e,r){this.config.disable||h.hasClass(r.target,"xgplayer-spot")&&(r.stopPropagation(),r.preventDefault(),["time","id","text"].map(function(s){e[s]=r.target.getAttribute("data-".concat(s))}),e.time&&(e.time=Number(e.time)),this.handlerSpotClick(r,e))}},{key:"updateLinePos",value:function(e,r){var s=this.root,o=this.previewLine,u=this.timePoint,l=this.player,c=this.config,f=l.controls.mode,v=f==="flex",d=s.getBoundingClientRect().width;if(d){var g=u.getBoundingClientRect().width;d=this._hasThumnail&&d<c.width?c.width:d;var m=e-d/2,p,b;m<0&&!v?(m=0,p=e-d/2,!this.thumbnail&&(b=e-d/2-g/2)):m>r-d&&!v?(p=m-(r-d),!this.thumbnail&&(b=m-(r-d)-g/2),m=r-d):(p=0,!this.thumbnail&&(b=-g/2)),p!==void 0&&(o.style.transform="translateX(".concat(p.toFixed(2),"px)")),b!==void 0&&(u.style.transform="translateX(".concat(b.toFixed(2),"px)")),s.style.transform="translateX(".concat(m.toFixed(2),"px) translateZ(0)")}}},{key:"updateTimeText",value:function(e){var r=this.timeText,s=this.timePoint;r.textContent=e,!this.thumbnail&&(s.textContent=e)}},{key:"updatePosition",value:function(e,r,s,o){var u=this.root,l=this.config,c=this._state;if(u){this.updateLinePos(e,r),c.now=s,this.transformTimeHook(s);var f=this.timeStr;o&&o.target&&h.hasClass(o.target,"xgplayer-spot")?(this.showTips(o.target.getAttribute("data-text"),!1,f),this.focusDot(o.target),c.f=!0,l.isFocusDots&&c.f&&(c.now=parseInt(o.target.getAttribute("data-time"),10))):l.defaultText?(c.f=!1,this.showTips(l.defaultText,!0,f)):(c.f=!1,this.hideTips("")),this.updateTimeText(f),this.updateThumbnails(c.now)}}},{key:"setTimeContent",value:function(e){this.timeStr=e}},{key:"updateThumbnails",value:function(e){var r=this.player,s=this.videoPreview,o=this.config,u=r.plugins.thumbnail;if(u&&u.usable){this.thumbnail&&u.update(this.thumbnail,e,o.width,o.height);var l=s&&s.getBoundingClientRect();this.videothumbnail&&u.update(this.videothumbnail,e,l.width,l.height)}}},{key:"registerThumbnail",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(R.device!=="mobile"){var r=this.player,s=this.config,o=r.getPlugin("thumbnail");if(o&&o.setConfig(e),!o||!o.usable||!s.isShowThumbnail){h.addClass(this.root,"short-line no-thumbnail");return}else h.removeClass(this.root,"short-line no-thumbnail");s.mode==="short"&&h.addClass(this.root,"short-line"),this._hasThumnail=!0;var u=this.find(".xg-spot-thumbnail");this.thumbnail=o.createThumbnail(u,"progress-thumbnail"),s.isShowCoverPreview&&(this.videoPreview=h.createDom("xg-video-preview","",{},"xgvideo-preview"),r.root.appendChild(this.videoPreview),this.videothumbnail=o.createThumbnail(this.videoPreview,"xgvideo-thumbnail")),this.updateThumbnails(0)}}},{key:"calcuPosition",value:function(e,r){var s=this.player.plugins.progress,o=this.player,u=s.root.getBoundingClientRect().width,l=o.duration/u*6;return e+r>o.duration&&(r=o.duration-e),e/o.duration*100,r/o.duration,{left:e/o.duration*100,width:r/o.duration*100,isMini:r<l}}},{key:"showDot",value:function(e){var r=this.findDot(e);if(r){var s=this.root.getBoundingClientRect(),o=s.width,u=r.time/this.player.duration*o;this.updatePosition(u,o,r.time)}}},{key:"focusDot",value:function(e,r){e&&(r||(r=e.getAttribute("data-id")),h.addClass(e,"active"),this._activeDotId=r)}},{key:"blurDot",value:function(e){if(!e){var r=this._activeDotId;e=this.getDotDom(r)}e&&(h.removeClass(e,"active"),this._activeDotId=null)}},{key:"showTips",value:function(e,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";h.addClass(this.root,"no-timepoint"),e&&(h.addClass(this.find(".xg-spot-content"),"show-text"),r&&this.config.mode==="production"?(h.addClass(this.root,"product"),this.tipText.textContent=e):(h.removeClass(this.root,"product"),this.tipText.textContent=this._hasThumnail?e:"".concat(s," ").concat(e)))}},{key:"hideTips",value:function(){h.removeClass(this.root,"no-timepoint"),this.tipText.textContent="",h.removeClass(this.find(".xg-spot-content"),"show-text"),h.removeClass(this.root,"product")}},{key:"hide",value:function(){h.addClass(this.root,"hide")}},{key:"show",value:function(){h.removeClass(this.root,"hide")}},{key:"enable",value:function(){var e=this.config,r=this.playerConfig;this.config.disable=!1,this.show(),!this.thumbnail&&e.isShowThumbnail&&this.registerThumbnail(r.thumbnail||{})}},{key:"disable",value:function(){this.config.disable=!0,this.hide()}},{key:"destroy",value:function(){var e=this,r=this.player.plugins.progress;r&&Object.keys(Tt).map(function(s){r.removeCallBack(s,e[Tt[s]])}),this.videothumbnail=null,this.thumbnail=null,this.videoPreview&&this.player.root.removeChild(this.videoPreview),this.unbind(".xg-spot-info","mousemove",this.onMousemove),this.unbind(".xg-spot-info","mousedown",this.onMousedown),this.unbind(".xg-spot-info","mouseup",this.onMouseup),this.unbind(".xg-spot-content","mouseup",this.handlerPreviewClick)}},{key:"render",value:function(){return R.device==="mobile"||this.playerConfig.isMobileSimulateMode==="mobile"?"":'<div class="xg-spot-info hide '.concat(this.config.mode==="short"?"short-line":"",`">
      <div class="xg-spot-content">
        <div class="xg-spot-thumbnail">
          <span class="xg-spot-time"></span>
        </div>
        <div class="xg-spot-text"><span class="spot-inner-text"></span></div>
      </div>
      <div class="xgplayer-progress-point">00:00</div>
      <div class="xg-spot-ext-text"></div>
      <div class="xg-spot-line"></div>
    </div>`)}}],[{key:"pluginName",get:function(){return"progresspreview"}},{key:"defaultConfig",get:function(){return{index:1,miniWidth:6,ispots:[],defaultText:"",isFocusDots:!0,isHideThumbnailHover:!0,isShowThumbnail:!0,isShowCoverPreview:!1,mode:"",disable:!1,width:160,height:90}}}]),i}(O),Lg=function(n){x(i,n);var a=P(i);function i(t){var e;return E(this,i),e=a.call(this,t),e.ratio=1,e.interval=null,e._preloadMark={},e}return k(i,[{key:"afterCreate",value:function(){var e=this;this.usable&&this.initThumbnail(),this.on([Je],function(){var r=e.config,s=r.pic_num,o=r.interval;e.usable&&(e.interval=o>0?o:Math.round(e.player.duration*1e3/s)/1e3)})}},{key:"setConfig",value:function(e){var r=this;if(e){var s=Object.keys(e);s.length<1||(s.forEach(function(o){r.config[o]=e[o]}),this.usable&&this.initThumbnail())}}},{key:"usable",get:function(){var e=this.config,r=e.urls,s=e.pic_num;return r&&r.length>0&&s>0}},{key:"initThumbnail",value:function(){var e=this.config,r=e.width,s=e.height,o=e.pic_num,u=e.interval;this.ratio=r/s*100,this.interval=u||Math.round(this.player.duration/o),this._preloadMark={}}},{key:"getUrlByIndex",value:function(e){return e>=0&&e<this.config.urls.length?this.config.urls[e]:""}},{key:"preload",value:function(e){var r=this;if(!this._preloadMark[e]){var s=this.config.urls,o=s.length,u=[];e>0&&u.push(e-1),u.push(e),e>0&&e<o-1&&u.push(e+1),u.map(function(l){!r._preloadMark[l]&&l>=0&&l<o&&(r._preloadMark[l]=1,h.preloadImg(s[l],function(){r._preloadMark[l]=2}))})}}},{key:"getPosition",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=this.config,u=o.pic_num,l=o.row,c=o.col,f=o.width,v=o.height;this.interval=Math.round(this.player.duration/u);var d=Math.ceil(e/this.interval);d=d>u?u:d;var g=d<l*c?0:Math.ceil(d/(l*c))-1,m=d-g*(c*l),p=m>0?Math.ceil(m/c)-1:0,b=m>0?m-p*c-1:0,T=0,S=0;if(r&&s){var $=r/s;$<f/v?(S=s,T=S*(f/v)):(T=r,S=T/(f/v))}else s?r||(S=s||v,T=S*(f/v)):(T=r||f,S=T/(f/v));var L=this.getUrlByIndex(g);return{urlIndex:g,rowIndex:p,colIndex:b,url:L,height:S,width:T,style:{backgroundImage:"url(".concat(L,")"),backgroundSize:"".concat(T*c,"px auto"),backgroundPosition:"-".concat(b*T,"px -").concat(p*S,"px"),width:"".concat(T,"px"),height:"".concat(S,"px")}}}},{key:"update",value:function(e,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",l=this.config,c=l.pic_num,f=l.urls;if(!(c<=0||!f||f.length===0)){var v=this.getPosition(r,s,o);this.preload(v.urlIndex),Object.keys(v.style).map(function(d){e.style[d]=v.style[d]}),Object.keys(u).map(function(d){e.style[d]=u[d]})}}},{key:"changeConfig",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.setConfig(e)}},{key:"createThumbnail",value:function(e,r){var s=h.createDom("xg-thumbnail","",{},"thumbnail ".concat(r));return e&&e.appendChild(s),s}}],[{key:"pluginName",get:function(){return"thumbnail"}},{key:"defaultConfig",get:function(){return{isShow:!1,urls:[],pic_num:0,col:0,row:0,height:90,width:160,scale:1,className:"",hidePortrait:!1}}}]),i}(O),Dg=function(n){x(i,n);var a=P(i);function i(){return E(this,i),a.apply(this,arguments)}return k(i,[{key:"afterCreate",value:function(){}},{key:"update",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{cached:0,played:0},r=arguments.length>1?arguments[1]:void 0;!r||!this.root||(e.cached&&(this.find("xg-mini-progress-cache").style.width="".concat(e.cached/r*100,"%")),e.played&&(this.find("xg-mini-progress-played").style.width="".concat(e.played/r*100,"%")))}},{key:"render",value:function(){if(!(!this.playerConfig.progress||!this.playerConfig.miniprogress))return`<xg-mini-progress class="xg-mini-progress">
    <xg-mini-progress-cache class="xg-mini-progress-cache"></xg-mini-progress-cache>
    <xg-mini-progress-played class="xg-mini-progress-played"></xg-mini-progress-played>
    </xg-mini-progress>`}}],[{key:"pluginName",get:function(){return"MiniProgress"}},{key:"defaultConfig",get:function(){return{}}}]),i}(O),er={REAL_TIME:"realtime",FIRST_FRAME:"firstframe",FRAME_RATE:"framerate",POSTER:"poster"};function $g(){try{return parseInt(window.performance.now(),10)}catch{return new Date().getTime()}}function Ng(){try{var n=document.createElement("canvas").getContext;return!!n}catch{return!1}}var Gr=null,Mg=function(n){x(i,n);var a=P(i);function i(){var t;E(this,i);for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return t=a.call.apply(a,[this].concat(r)),_(y(t),"onLoadedData",function(o){t.player&&(t._frameCount=t.config.startFrameCount,t.renderOnTimeupdate(o),t.off(ve,t.renderOnTimeupdate),t.on(ve,t.renderOnTimeupdate))}),_(y(t),"renderOnTimeupdate",function(o){t._frameCount>0?(t.renderOnce(),t._frameCount--):(t._isLoaded=!0,t.off(ve,t.renderOnTimeupdate),!t.player.paused&&t._checkIfCanStart()&&t.start())}),_(y(t),"start",function(){var o=t.player.media,u=$g(),l=t.checkVideoIsSupport(o);!l||!t.canvasCtx||(t.stop(),o.videoWidth&&o.videoHeight&&(t.videoPI=o.videoHeight>0?parseInt(o.videoWidth/o.videoHeight*100,10):0,(t.config.mode===er.REAL_TIME||u-t.preTime>=t.interval)&&(o&&o.videoWidth&&t.update(l,t.videoPI),t.preTime=u)),t.frameId=h.requestAnimationFrame(t.start))}),_(y(t),"stop",function(){t.frameId&&(h.cancelAnimationFrame(t.frameId),t.frameId=null)}),t}return k(i,[{key:"afterCreate",value:function(){var e=this;this.playerConfig.dynamicBg===!0&&(this.config.disable=!1),i.isSupport||(this.config.disable=!0);var r=this.config,s=r.disable,o=r.mode,u=r.frameRate;s||(this._pos={width:0,height:0,rwidth:0,rheight:0,x:0,y:0,pi:0},this.isStart=!1,this._isLoaded=!1,this.videoPI=0,this.preTime=0,this.interval=parseInt(1e3/u,10),this.canvas=null,this.canvasCtx=null,this._frameCount=0,this.once(Bi,function(){e.player&&(e.init(),e.player.paused||e.start())}),o!==er.POSTER&&(o!==er.FIRST_FRAME&&(this.on(wr,function(){e.stop()}),this.on(de,function(){e._checkIfCanStart()&&e.start()}),this.on(Wt,function(){e.stop()})),this.on(ft,this.onLoadedData),this.on(vs,function(){e._isLoaded=!1,e.stop()})))}},{key:"init",value:function(){var e=this.player,r=this.config;this.canvasFilter=i.supportCanvasFilter();try{var s=this.config.isInnerRender&&e.innerContainer||e.root;s.insertAdjacentHTML("afterbegin",`<div class="xgplayer-dynamic-bg"><canvas>
        </canvas><xgmask></xgmask></div>`),this.root=s.children[0],this.canvas=this.find("canvas"),this.canvasFilter||(this.canvas.style.filter=r.filter,this.canvas.style.webkitFilter=r.filter),this.mask=this.find("xgmask"),r.addMask&&(this.mask.style.background=r.maskBg),this.canvasCtx=this.canvas.getContext("2d"),this.renderByPoster()}catch(o){A.logError("plugin:DynamicBg",o)}}},{key:"checkVideoIsSupport",value:function(e){if(!e)return null;var r=e&&e instanceof window.HTMLVideoElement?e:e.canvas?e.canvas:e.flyVideo?e.flyVideo:null;if(r&&!(R.browser==="safari"&&(/^blob/.test(r.currentSrc)||/^blob/.test(r.src))))return r;var s=r?r.tagName.toLowerCase():"";return s==="canvas"||s==="img"?r:null}},{key:"renderByPoster",value:function(){var e=this.playerConfig.poster;if(e){var r=h.typeOf(e)==="String"?e:h.typeOf(e.poster)==="String"?e.poster:null;this.updateImg(r)}}},{key:"_checkIfCanStart",value:function(){var e=this.config.mode;return this._isLoaded&&e!==er.FIRST_FRAME&&e!==er.POSTER}},{key:"renderOnce",value:function(){var e=this.player.media;if(!(!e.videoWidth||!e.videoHeight)){this.videoPI=parseInt(e.videoWidth/e.videoHeight*100,10);var r=this.checkVideoIsSupport(e);r&&e.videoWidth&&this.update(r,this.videoPI)}}},{key:"updateImg",value:function(e){var r=this;if(e){var s=this.canvas.getBoundingClientRect(),o=s.width,u=s.height,l=new window.Image;l.onload=function(){if(!(!r.canvas||r.frameId||r.isStart)){r.canvas.height=u,r.canvas.width=o;var c=parseInt(o/u*100,10);r.update(l,c),l=null}},l.src=e}}},{key:"update",value:function(e,r){if(!(!this.canvas||!this.canvasCtx||!r))try{var s=this._pos,o=this.config,u=this.canvas.getBoundingClientRect(),l=u.width,c=u.height;if(l!==s.width||c!==s.height||s.pi!==r){var f=parseInt(l/c*100,10);s.pi=r,s.width=this.canvas.width=l,s.height=this.canvas.height=c;var v=c,d=l;f<r?d=parseInt(c*r/100,10):f>r&&(v=parseInt(l*100/r,10)),s.rwidth=d*o.multiple,s.rheight=v*o.multiple,s.x=(l-s.rwidth)/2,s.y=(c-s.rheight)/2}this.canvasFilter&&(this.canvasCtx.filter=o.filter),this.canvasCtx.drawImage(e,s.x,s.y,s.rwidth,s.rheight)}catch(g){A.logError("plugin:DynamicBg",g)}}},{key:"destroy",value:function(){this.stop(),this.canvasCtx=null,this.canvas=null}},{key:"render",value:function(){return""}}],[{key:"pluginName",get:function(){return"dynamicBg"}},{key:"defaultConfig",get:function(){return{isInnerRender:!1,disable:!0,mode:"framerate",frameRate:10,filter:"blur(50px)",startFrameCount:2,addMask:!0,multiple:1.2,maskBg:"rgba(0,0,0,0.7)"}}},{key:"isSupport",get:function(){return typeof Gr=="boolean"||(Gr=Ng()),Gr}},{key:"supportCanvasFilter",value:function(){return!(R.browser==="safari"||R.browser==="firefox")}}]),i}(O),Fg={LANG:"zh-cn",TEXT:{ERROR_TYPES:{network:{code:1,msg:"视频下载错误"},mse:{code:2,msg:"流追加错误"},parse:{code:3,msg:"解析错误"},format:{code:4,msg:"格式错误"},decoder:{code:5,msg:"解码错误"},runtime:{code:6,msg:"语法错误"},timeout:{code:7,msg:"播放超时"},other:{code:8,msg:"其他错误"}},HAVE_NOTHING:"没有关于音频/视频是否就绪的信息",HAVE_METADATA:"音频/视频的元数据已就绪",HAVE_CURRENT_DATA:"关于当前播放位置的数据是可用的，但没有足够的数据来播放下一帧/毫秒",HAVE_FUTURE_DATA:"当前及至少下一帧的数据是可用的",HAVE_ENOUGH_DATA:"可用数据足以开始播放",NETWORK_EMPTY:"音频/视频尚未初始化",NETWORK_IDLE:"音频/视频是活动的且已选取资源，但并未使用网络",NETWORK_LOADING:"浏览器正在下载数据",NETWORK_NO_SOURCE:"未找到音频/视频来源",MEDIA_ERR_ABORTED:"取回过程被用户中止",MEDIA_ERR_NETWORK:"网络错误",MEDIA_ERR_DECODE:"解码错误",MEDIA_ERR_SRC_NOT_SUPPORTED:"不支持的音频/视频格式",REPLAY:"重播",ERROR:"网络连接似乎出现了问题",PLAY_TIPS:"播放",PAUSE_TIPS:"暂停",PLAYNEXT_TIPS:"下一集",DOWNLOAD_TIPS:"下载",ROTATE_TIPS:"旋转",RELOAD_TIPS:"重新载入",FULLSCREEN_TIPS:"进入全屏",EXITFULLSCREEN_TIPS:"退出全屏",CSSFULLSCREEN_TIPS:"进入样式全屏",EXITCSSFULLSCREEN_TIPS:"退出样式全屏",TEXTTRACK:"字幕",PIP:"画中画",SCREENSHOT:"截图",LIVE:"正在直播",OFF:"关闭",OPEN:"开启",MINI_DRAG:"点击按住可拖动视频",MINISCREEN:"小屏幕",REFRESH_TIPS:"请试试",REFRESH:"刷新",FORWARD:"快进中",LIVE_TIP:"直播"}},tr="info",dn=nf,Bg=function(n){x(i,n);var a=P(i);function i(){var t;E(this,i);for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return t=a.call.apply(a,[this].concat(r)),_(y(t),"_recordUserActions",function(o){var u=t._getTime(),l=Object.assign({},o,{msg:o.msg||o.action});t._stats[tr].push(V(V({type:"userAction"},u),{},{payload:l}))}),_(y(t),"_onReset",function(){t.reset()}),_(y(t),"_recordInfo",function(o){t.info(o)}),_(y(t),"_downloadStats",function(){var o=t.getStats(),u=new Blob([JSON.stringify(o)],{type:"application/json"}),l=window.URL.createObjectURL(u),c=document.createElement("a");c.style.display="none",c.href=l,c.download="player.txt",c.disabled=!1,c.click()}),t}return k(i,[{key:"_getTime",value:function(){return{timestamp:Date.now(),timeFormat:new Date().toISOString()}}},{key:"afterCreate",value:function(){this.reset(),this.on(bi,this._recordUserActions),this.on(dn.STATS_INFO,this._recordInfo),this.on(dn.STATS_DOWNLOAD,this._downloadStats),this.on(dn.STATS_RESET,this._onReset)}},{key:"destroy",value:function(){this.offAll()}},{key:"downloadStats",value:function(){this._downloadStats()}},{key:"info",value:function(e){e.profile?this._infoProfile(e):this._info(e)}},{key:"_info",value:function(e){var r=this._getTime();this._stats[tr].push(V(V({},r),{},{payload:e}))}},{key:"_infoProfile",value:function(e){if(e&&e.startMs){var r=Date.now(),s=r-e.startMs,o=V({cat:"function",dur:s,name:e.name||e.msg,ph:"X",pid:0,tid:0,ts:e.startMs,profile:!0},e);this._info(o)}else console.warn("infoProfile need object data, include startMs")}},{key:"reset",value:function(){var e;this._stats=(e={},_(e,tr,[]),_(e,"media",{}),e)}},{key:"getStats",value:function(){for(var e=this.player,r=e.media,s=[],o=0;o<r.buffered.length;o++)s.push({start:r.buffered.start(o),end:r.buffered.end(o)});var u={currentTime:r.currentTime,readyState:r.readyState,buffered:s,paused:r.paused,ended:r.ended};return this._stats.media=u,{raw:this._stats,timestat:this._getTimeStats(),profile:this._getProfile()}}},{key:"_getTimeStats",value:function(){var e=this._stats[tr],r=e.map(function(s){var o=s.payload.data,u="";try{o instanceof Error?u=o.msg:o!==void 0&&(u=JSON.stringify(o))}catch(l){console.log("err",l)}return"[".concat(s.timeFormat,"] : ").concat(s.payload.msg," ").concat(u," ")});return r}},{key:"_getProfile",value:function(){var e={traceEvents:[]},r=this._stats[tr];return r.forEach(function(s){s.payload.profile&&e.traceEvents.push(s.payload)}),e}}],[{key:"pluginName",get:function(){return"stats"}},{key:"defaultConfig",get:function(){return{}}}]),i}(Ye),hf=function(n){x(i,n);var a=P(i);function i(){var t;E(this,i);for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return t=a.call.apply(a,[this].concat(r)),_(y(t),"onGapJump",function(){var o=y(t),u=o.player,l=o.config;if(u.media.readyState!==HTMLMediaElement.HAVE_NOTHING){if(u.media.seeking){if(!t.seekingEventReceived)return}else t.seekingEventReceived=!1;if(!(u.media.paused&&u.media.currentTime!==0&&t.hasPlayed)){var c=u.media.buffered,f=l.smallGapLimit||.5,v=l.gapDetectionThreshold||.3,d=u.media.currentTime,g=t._getIndex(c,d,v);if(!(g===null||g===0)){console.log("GapJump  bufferRange ",c.start(g),c.end(g));var m=c.start(g)+.1,p=u.media.duration;if(!(m>p)){var b=m-d,T=b<=f;b<i.BROWSER_GAP_TOLERANCE||T&&(l.useGapJump!==!1&&(u.media.currentTime=t.isSafari?m+.1:m),t.player&&t.player.emit("detectGap"),console.log("gapJump gapIndex",g," isGapSamll:",T," currentTime:",u.media.currentTime," jumpSize:",d-u.media.currentTime),m!==.08&&u&&u.emit("log",{type:"oneevent",end_type:"gap",vid:u.config.vid,ext:{video_postion:Math.floor(m*1e3)}}))}}}}}),t}return k(i,[{key:"afterCreate",value:function(){var e=this,r=this.config.useGapJump;r!==!1&&(this.hasPlayed=!1,this.seekingEventReceived=!1,this.isSafari=/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),this.on(kr,this.onGapJump),this.on(de,function(){e.hasPlayed=!0}),this.on(hs,function(){e.seekingEventReceived=!0}))}},{key:"_getIndex",value:function(e,r,s){if(!e||!e.length||e.length===1&&e.end(0)-e.start(0)<1e-6)return null;for(var o=this._getBuffered(e),u=null,l=0;l<o.length;l++){var c=o[l];if(c.start>r&&(l===0||o[l-1].end-r<=s)){u=l;break}}return u}},{key:"_getBuffered",value:function(e){if(!e)return[];for(var r=[],s=0;s<e.length;s++)r.push({start:e.start(s),end:e.end(s)});return r}}],[{key:"pluginName",get:function(){return"gapJump"}},{key:"defaultConfig",get:function(){return{useGapJump:!1,smallGapLimit:.5,gapDetectionThreshold:.3}}}]),i}(O);hf.BROWSER_GAP_TOLERANCE=.001;var Ug=function(n){x(i,n);var a=P(i);function i(){var t;E(this,i);for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return t=a.call.apply(a,[this].concat(r)),_(y(t),"onWaiting",function(){var o=y(t),u=o.config;t.jumpCnt>u.jumpCntMax||t.timer||u.useWaitingTimeoutJump===!1||(t.timer=setTimeout(t.onJump,u.waitingTime*1e3))}),_(y(t),"onJump",function(){var o=y(t),u=o.player,l=o.config;if(clearTimeout(t.timer),t.timer=null,!(t.jumpCnt>l.jumpCntMax||l.useWaitingTimeoutJump===!1)&&!(u.media.paused&&u.media.currentTime!==0&&t.hasPlayed)){t.jumpSize=l.jumpSize*(t.jumpCnt+1),t.jumpCnt===l.jumpSize&&t.jumpSize<6&&(t.jumpSize=6);var c=u.currentTime+t.jumpSize,f=u.media.duration;c>f||(console.log("waitintTimeout, currentTime:",u.currentTime,", jumpTo:",c),t.jumpCnt++,u.currentTime=c)}}),t}return k(i,[{key:"afterCreate",value:function(){var e=this,r=this.config,s=r.useWaitingTimeoutJump,o=r.jumpSize;s!==!1&&(this.hasPlayed=!1,this.jumpCnt=0,this.timer=null,this.jumpSize=o,this.on(kr,this.onWaiting),this.on([fs,Ce],function(){clearTimeout(e.timer),e.timer=null,e.jumpSize=e.config.jumpSize}),this.on(de,function(){e.hasPlayed=!0}))}}],[{key:"pluginName",get:function(){return"waitingTimeoutJump"}},{key:"defaultConfig",get:function(){return{useWaitingTimeoutJump:!1,waitingTime:15,jumpSize:2,jumpCntMax:4}}}]),i}(O),Hg=function(n){x(i,n);var a=P(i);function i(){var t;E(this,i);for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return t=a.call.apply(a,[this].concat(r)),_(y(t),"getSpeed",function(o){if(t.speedListCache.length<=0)return 0;var u=0;return t.speedListCache.map(function(l){u+=l}),Math.floor(u/t.speedListCache.length)}),_(y(t),"_onRealSpeedChange",function(o){o.speed&&t.appendList(o.speed)}),_(y(t),"testSpeed",function(){if(clearTimeout(t.timer),t.timer=null,!(!t.player||!t.config.openSpeed)){var o=t.config,u=o.url,l=o.loadSize,c=o.testCnt,f=o.testTimeStep,v=u+(u.indexOf("?")<0?"?testst=":"&testst=")+Date.now();if(!(t.cnt>=c)){t.cnt++;try{var d=new Date().getTime(),g=null,m=new XMLHttpRequest;t.xhr=m,m.open("GET",v);var p={},b=Math.floor(Math.random()*10);p.Range="bytes="+b+"-"+(l+b),p&&Object.keys(p).forEach(function(T){m.setRequestHeader(T,p[T])}),m.onreadystatechange=function(){if(m.readyState===4){t.xhr=null,g=new Date().getTime();var T=m.getResponseHeader("Content-Length")/1024*8,S=Math.round(T*1e3/(g-d));t.appendList(S),t.timer=setTimeout(t.testSpeed,f)}},m.send()}catch(T){console.error(T)}}}}),_(y(t),"appendList",function(o){var u=t.config.saveSpeedMax;t.speedListCache.length>=u&&t.speedListCache.shift(),t.speedListCache.push(o),t.player&&(t.player.realTimeSpeed=o),t.updateSpeed()}),_(y(t),"updateSpeed",function(){var o=t.getSpeed(),u=y(t),l=u.player;l&&(!l.avgSpeed||o!==l.avgSpeed)&&(l.avgSpeed=o,l.emit(Jc,{speed:o,realTimeSpeed:l.realTimeSpeed}))}),t}return k(i,[{key:"afterCreate",value:function(){var e=this;this.speedListCache=[];var r=this.config,s=r.openSpeed,o=r.testTimeStep;this.timer=null,this.cnt=0,this.xhr=null,s&&(this.on("real_time_speed",this._onRealSpeedChange),this.on([ft,ms],function(){h.isMSE(e.player.video)||(e.speedListCache=[],e.cnt=0,e.timer=setTimeout(e.testSpeed,o))}))}},{key:"openSpeed",get:function(){return this.config.openSpeed},set:function(e){if(this.config.openSpeed=e,!e&&this.timer){clearTimeout(this.timer),this.timer=null;return}if(this.config.openSpeed){if(this.timer)return;this.timer=setTimeout(this.testSpeed,this.config.testTimeStep)}}},{key:"destroy",value:function(){clearTimeout(this.timer),this.timer=null,this.xhr&&this.xhr.readyState!==4&&(this.xhr.cancel(),this.xhr=null)}}],[{key:"pluginName",get:function(){return"testspeed"}},{key:"defaultConfig",get:function(){return{openSpeed:!1,testCnt:3,loadSize:200*1024,testTimeStep:3e3,url:"",saveSpeedMax:5}}}]),i}(O),jg=function(n){x(i,n);var a=P(i);function i(){return E(this,i),a.apply(this,arguments)}return k(i,[{key:"afterCreate",value:function(){var e=this,r=this.player,s=this.config;if(this.timer=null,this._lastDecodedFrames=0,this._currentStuckCount=0,this._lastCheckPoint=null,!s.disabled){var o=r.media.getVideoPlaybackQuality;o&&(this.on(de,function(){e._startTick()}),this.on(Wt,function(){e._stopTick()}),this.on(qe,function(){e._stopTick()}),this.on(wr,function(){e._stopTick()}))}}},{key:"_startTick",value:function(){var e=this;this._stopTick(),this._timer=setTimeout(function(){e._checkDecodeFPS(),e._startTick()},this.config.tick)}},{key:"_stopTick",value:function(){clearTimeout(this._timer),this._timer=null}},{key:"_checkStuck",value:function(e){var r=this.player.media,s=document.hidden,o=r.paused;if(typeof s=="boolean"&&!s&&!o){for(var u=r.currentTime,l=r.buffered,c=!1,f=0;f<l.length;f++){var v=l.start(f),d=l.end(f);if(v<=u&&u<=d-1){c=!0;break}}r.readyState===4&&c&&(this._currentStuckCount>this.config.stuckCount?(this.emit(af),this._currentStuckCount=0):e<=this.config.reportFrame?this._currentStuckCount++:this._currentStuckCount++)}}},{key:"_checkDecodeFPS",value:function(){if(this.player.media){var e=this.player.media.getVideoPlaybackQuality(),r=e.totalVideoFrames,s=performance.now();if(r&&this._lastCheckPoint){var o=r-this._lastDecodedFrames;this._checkStuck(o)}this._lastDecodedFrames=r,this._lastCheckPoint=s}}},{key:"destroy",value:function(){this._stopTick()}}],[{key:"pluginName",get:function(){return"FpsDetect"}},{key:"defaultConfig",get:function(){return{disabled:!1,tick:1e3,stuckCount:3,reportFrame:0}}}]),i}(O);Dt.use(Fg);var Gg=k(function n(a,i){var t,e,r;E(this,n);var s=i&&i.isMobileSimulateMode==="mobile",o=i.isLive,u=o?[]:[eg,Dg,Ag,og],l=[].concat(u,[tg,sg,vg,yg,kg,wg,Tg,Sg,fg,pg]),c=[Ld,Dd,Md,Jd,Fd,Pg,Og,Lg,jd];this.plugins=[Bg,Rd].concat(We(l),c,[hf,Ug]);var f=s?"mobile":R.device;switch(f){case"pc":(t=this.plugins).push.apply(t,[Xo,vn,Jo,Hg,jg]);break;case"mobile":(e=this.plugins).push.apply(e,[Yd]);break;default:(r=this.plugins).push.apply(r,[Xo,vn,Jo])}(R.os.isIpad||f==="pc")&&this.plugins.push(Mg),R.os.isIpad&&this.plugins.push(vn),this.ignores=[],this.i18n=[]}),Re=function(n){x(i,n);var a=P(i);function i(){return E(this,i),a.apply(this,arguments)}return k(i)}(Ts);_(Re,"defaultPreset",Gg);_(Re,"Util",h);_(Re,"Sniffer",R);_(Re,"Errors",cs);_(Re,"Events",sd);_(Re,"Plugin",O);_(Re,"BasePlugin",Ye);_(Re,"I18N",Dt);_(Re,"STATE_CLASS",C);var rr=function(n){return n&&n.Math===Math&&n},M=rr(typeof globalThis=="object"&&globalThis)||rr(typeof window=="object"&&window)||rr(typeof self=="object"&&self)||rr(typeof lr=="object"&&lr)||rr(typeof lr=="object"&&lr)||function(){return this}()||Function("return this")(),vf={exports:{}},Vg=!1,eu=M,Wg=Object.defineProperty,ws=function(n,a){try{Wg(eu,n,{value:a,configurable:!0,writable:!0})}catch{eu[n]=a}return a},zg=M,Kg=ws,tu="__core-js_shared__",ru=vf.exports=zg[tu]||Kg(tu,{});(ru.versions||(ru.versions=[])).push({version:"3.41.0",mode:"global",copyright:"© 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.41.0/LICENSE",source:"https://github.com/zloirock/core-js"});var Is=vf.exports,iu=Is,xs=function(n,a){return iu[n]||(iu[n]=a||{})},U=function(n){try{return!!n()}catch{return!0}},Yg=U,Hi=!Yg(function(){var n=(function(){}).bind();return typeof n!="function"||n.hasOwnProperty("prototype")}),df=Hi,gf=Function.prototype,Oa=gf.call,Xg=df&&gf.bind.bind(Oa,Oa),F=df?Xg:function(n){return function(){return Oa.apply(n,arguments)}},zt=function(n){return n==null},qg=zt,Jg=TypeError,Kt=function(n){if(qg(n))throw new Jg("Can't call method on "+n);return n},Zg=Kt,Qg=Object,Ne=function(n){return Qg(Zg(n))},ep=F,tp=Ne,rp=ep({}.hasOwnProperty),te=Object.hasOwn||function(a,i){return rp(tp(a),i)},ip=F,np=0,ap=Math.random(),sp=ip(1 .toString),pf=function(n){return"Symbol("+(n===void 0?"":n)+")_"+sp(++np+ap,36)},op=M,nu=op.navigator,au=nu&&nu.userAgent,Ir=au?String(au):"",mf=M,gn=Ir,su=mf.process,ou=mf.Deno,uu=su&&su.versions||ou&&ou.version,lu=uu&&uu.v8,Te,ki;lu&&(Te=lu.split("."),ki=Te[0]>0&&Te[0]<4?1:+(Te[0]+Te[1]));!ki&&gn&&(Te=gn.match(/Edge\/(\d+)/),(!Te||Te[1]>=74)&&(Te=gn.match(/Chrome\/(\d+)/),Te&&(ki=+Te[1])));var ji=ki,cu=ji,up=U,lp=M,cp=lp.String,yf=!!Object.getOwnPropertySymbols&&!up(function(){var n=Symbol("symbol detection");return!cp(n)||!(Object(n)instanceof Symbol)||!Symbol.sham&&cu&&cu<41}),fp=yf,_f=fp&&!Symbol.sham&&typeof Symbol.iterator=="symbol",hp=M,vp=xs,fu=te,dp=pf,gp=yf,pp=_f,$t=hp.Symbol,pn=vp("wks"),mp=pp?$t.for||$t:$t&&$t.withoutSetter||dp,G=function(n){return fu(pn,n)||(pn[n]=gp&&fu($t,n)?$t[n]:mp("Symbol."+n)),pn[n]},yp=G,_p=yp("toStringTag"),bf={};bf[_p]="z";var Ps=String(bf)==="[object z]",mn=typeof document=="object"&&document.all,j=typeof mn>"u"&&mn!==void 0?function(n){return typeof n=="function"||n===mn}:function(n){return typeof n=="function"},ke={},bp=U,z=!bp(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),Cp=j,ee=function(n){return typeof n=="object"?n!==null:Cp(n)},Tp=M,hu=ee,Ra=Tp.document,Sp=hu(Ra)&&hu(Ra.createElement),Gi=function(n){return Sp?Ra.createElement(n):{}},Ep=z,kp=U,wp=Gi,Cf=!Ep&&!kp(function(){return Object.defineProperty(wp("div"),"a",{get:function(){return 7}}).a!==7}),Ip=z,xp=U,Tf=Ip&&xp(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),Pp=ee,Op=String,Rp=TypeError,X=function(n){if(Pp(n))return n;throw new Rp(Op(n)+" is not an object")},Ap=Hi,Vr=Function.prototype.call,K=Ap?Vr.bind(Vr):function(){return Vr.apply(Vr,arguments)},yn=M,Lp=j,Dp=function(n){return Lp(n)?n:void 0},Qe=function(n,a){return arguments.length<2?Dp(yn[n]):yn[n]&&yn[n][a]},$p=F,xr=$p({}.isPrototypeOf),Np=Qe,Mp=j,Fp=xr,Bp=_f,Up=Object,Sf=Bp?function(n){return typeof n=="symbol"}:function(n){var a=Np("Symbol");return Mp(a)&&Fp(a.prototype,Up(n))},Hp=String,Pr=function(n){try{return Hp(n)}catch{return"Object"}},jp=j,Gp=Pr,Vp=TypeError,et=function(n){if(jp(n))return n;throw new Vp(Gp(n)+" is not a function")},Wp=et,zp=zt,Or=function(n,a){var i=n[a];return zp(i)?void 0:Wp(i)},_n=K,bn=j,Cn=ee,Kp=TypeError,Yp=function(n,a){var i,t;if(a==="string"&&bn(i=n.toString)&&!Cn(t=_n(i,n))||bn(i=n.valueOf)&&!Cn(t=_n(i,n))||a!=="string"&&bn(i=n.toString)&&!Cn(t=_n(i,n)))return t;throw new Kp("Can't convert object to primitive value")},Xp=K,vu=ee,du=Sf,qp=Or,Jp=Yp,Zp=G,Qp=TypeError,em=Zp("toPrimitive"),tm=function(n,a){if(!vu(n)||du(n))return n;var i=qp(n,em),t;if(i){if(a===void 0&&(a="default"),t=Xp(i,n,a),!vu(t)||du(t))return t;throw new Qp("Can't convert object to primitive value")}return a===void 0&&(a="number"),Jp(n,a)},rm=tm,im=Sf,Ef=function(n){var a=rm(n,"string");return im(a)?a:a+""},nm=z,am=Cf,sm=Tf,Wr=X,gu=Ef,om=TypeError,Tn=Object.defineProperty,um=Object.getOwnPropertyDescriptor,Sn="enumerable",En="configurable",kn="writable";ke.f=nm?sm?function(a,i,t){if(Wr(a),i=gu(i),Wr(t),typeof a=="function"&&i==="prototype"&&"value"in t&&kn in t&&!t[kn]){var e=um(a,i);e&&e[kn]&&(a[i]=t.value,t={configurable:En in t?t[En]:e[En],enumerable:Sn in t?t[Sn]:e[Sn],writable:!1})}return Tn(a,i,t)}:Tn:function(a,i,t){if(Wr(a),i=gu(i),Wr(t),am)try{return Tn(a,i,t)}catch{}if("get"in t||"set"in t)throw new om("Accessors not supported");return"value"in t&&(a[i]=t.value),a};var kf={exports:{}},Aa=z,lm=te,wf=Function.prototype,cm=Aa&&Object.getOwnPropertyDescriptor,Os=lm(wf,"name"),fm=Os&&(function(){}).name==="something",hm=Os&&(!Aa||Aa&&cm(wf,"name").configurable),Vi={EXISTS:Os,PROPER:fm,CONFIGURABLE:hm},vm=F,dm=j,La=Is,gm=vm(Function.toString);dm(La.inspectSource)||(La.inspectSource=function(n){return gm(n)});var Rs=La.inspectSource,pm=M,mm=j,pu=pm.WeakMap,ym=mm(pu)&&/native code/.test(String(pu)),Rr=function(n,a){return{enumerable:!(n&1),configurable:!(n&2),writable:!(n&4),value:a}},_m=z,bm=ke,Cm=Rr,dt=_m?function(n,a,i){return bm.f(n,a,Cm(1,i))}:function(n,a,i){return n[a]=i,n},Tm=xs,Sm=pf,mu=Tm("keys"),As=function(n){return mu[n]||(mu[n]=Sm(n))},Ls={},Em=ym,If=M,km=ee,wm=dt,wn=te,In=Is,Im=As,xm=Ls,yu="Object already initialized",Da=If.TypeError,Pm=If.WeakMap,wi,Tr,Ii,Om=function(n){return Ii(n)?Tr(n):wi(n,{})},Rm=function(n){return function(a){var i;if(!km(a)||(i=Tr(a)).type!==n)throw new Da("Incompatible receiver, "+n+" required");return i}};if(Em||In.state){var Pe=In.state||(In.state=new Pm);Pe.get=Pe.get,Pe.has=Pe.has,Pe.set=Pe.set,wi=function(n,a){if(Pe.has(n))throw new Da(yu);return a.facade=n,Pe.set(n,a),a},Tr=function(n){return Pe.get(n)||{}},Ii=function(n){return Pe.has(n)}}else{var St=Im("state");xm[St]=!0,wi=function(n,a){if(wn(n,St))throw new Da(yu);return a.facade=n,wm(n,St,a),a},Tr=function(n){return wn(n,St)?n[St]:{}},Ii=function(n){return wn(n,St)}}var Me={set:wi,get:Tr,has:Ii,enforce:Om,getterFor:Rm},Ds=F,Am=U,Lm=j,zr=te,$a=z,Dm=Vi.CONFIGURABLE,$m=Rs,xf=Me,Nm=xf.enforce,Mm=xf.get,_u=String,li=Object.defineProperty,Fm=Ds("".slice),Bm=Ds("".replace),Um=Ds([].join),Hm=$a&&!Am(function(){return li(function(){},"length",{value:8}).length!==8}),jm=String(String).split("String"),Gm=kf.exports=function(n,a,i){Fm(_u(a),0,7)==="Symbol("&&(a="["+Bm(_u(a),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),i&&i.getter&&(a="get "+a),i&&i.setter&&(a="set "+a),(!zr(n,"name")||Dm&&n.name!==a)&&($a?li(n,"name",{value:a,configurable:!0}):n.name=a),Hm&&i&&zr(i,"arity")&&n.length!==i.arity&&li(n,"length",{value:i.arity});try{i&&zr(i,"constructor")&&i.constructor?$a&&li(n,"prototype",{writable:!1}):n.prototype&&(n.prototype=void 0)}catch{}var t=Nm(n);return zr(t,"source")||(t.source=Um(jm,typeof a=="string"?a:"")),n};Function.prototype.toString=Gm(function(){return Lm(this)&&Mm(this).source||$m(this)},"toString");var Pf=kf.exports,Vm=j,Wm=ke,zm=Pf,Km=ws,ge=function(n,a,i,t){t||(t={});var e=t.enumerable,r=t.name!==void 0?t.name:a;if(Vm(i)&&zm(i,r,t),t.global)e?n[a]=i:Km(a,i);else{try{t.unsafe?n[a]&&(e=!0):delete n[a]}catch{}e?n[a]=i:Wm.f(n,a,{value:i,enumerable:!1,configurable:!t.nonConfigurable,writable:!t.nonWritable})}return n},Of=F,Ym=Of({}.toString),Xm=Of("".slice),tt=function(n){return Xm(Ym(n),8,-1)},qm=Ps,Jm=j,ci=tt,Zm=G,Qm=Zm("toStringTag"),ey=Object,ty=ci(function(){return arguments}())==="Arguments",ry=function(n,a){try{return n[a]}catch{}},Ar=qm?ci:function(n){var a,i,t;return n===void 0?"Undefined":n===null?"Null":typeof(i=ry(a=ey(n),Qm))=="string"?i:ty?ci(a):(t=ci(a))==="Object"&&Jm(a.callee)?"Arguments":t},iy=Ps,ny=Ar,ay=iy?{}.toString:function(){return"[object "+ny(this)+"]"},sy=Ps,oy=ge,uy=ay;sy||oy(Object.prototype,"toString",uy,{unsafe:!0});var Rf={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},ly=Gi,xn=ly("span").classList,bu=xn&&xn.constructor&&xn.constructor.prototype,Af=bu===Object.prototype?void 0:bu,cy=tt,fy=F,hy=function(n){if(cy(n)==="Function")return fy(n)},Cu=hy,vy=et,dy=Hi,gy=Cu(Cu.bind),gt=function(n,a){return vy(n),a===void 0?n:dy?gy(n,a):function(){return n.apply(a,arguments)}},py=F,my=U,yy=tt,Pn=Object,_y=py("".split),Wi=my(function(){return!Pn("z").propertyIsEnumerable(0)})?function(n){return yy(n)==="String"?_y(n,""):Pn(n)}:Pn,by=Math.ceil,Cy=Math.floor,Ty=Math.trunc||function(a){var i=+a;return(i>0?Cy:by)(i)},Sy=Ty,Lr=function(n){var a=+n;return a!==a||a===0?0:Sy(a)},Ey=Lr,ky=Math.min,$s=function(n){var a=Ey(n);return a>0?ky(a,9007199254740991):0},wy=$s,Yt=function(n){return wy(n.length)},Iy=tt,Ns=Array.isArray||function(a){return Iy(a)==="Array"},xy=F,Py=U,Lf=j,Oy=Ar,Ry=Qe,Ay=Rs,Df=function(){},$f=Ry("Reflect","construct"),Ms=/^\s*(?:class|function)\b/,Ly=xy(Ms.exec),Dy=!Ms.test(Df),ir=function(a){if(!Lf(a))return!1;try{return $f(Df,[],a),!0}catch{return!1}},Nf=function(a){if(!Lf(a))return!1;switch(Oy(a)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Dy||!!Ly(Ms,Ay(a))}catch{return!0}};Nf.sham=!0;var Fs=!$f||Py(function(){var n;return ir(ir.call)||!ir(Object)||!ir(function(){n=!0})||n})?Nf:ir,Tu=Ns,$y=Fs,Ny=ee,My=G,Fy=My("species"),Su=Array,By=function(n){var a;return Tu(n)&&(a=n.constructor,$y(a)&&(a===Su||Tu(a.prototype))?a=void 0:Ny(a)&&(a=a[Fy],a===null&&(a=void 0))),a===void 0?Su:a},Uy=By,Bs=function(n,a){return new(Uy(n))(a===0?0:a)},Hy=gt,jy=F,Gy=Wi,Vy=Ne,Wy=Yt,zy=Bs,Eu=jy([].push),Ue=function(n){var a=n===1,i=n===2,t=n===3,e=n===4,r=n===6,s=n===7,o=n===5||r;return function(u,l,c,f){for(var v=Vy(u),d=Gy(v),g=Wy(d),m=Hy(l,c),p=0,b=f||zy,T=a?b(u,g):i||s?b(u,0):void 0,S,$;g>p;p++)if((o||p in d)&&(S=d[p],$=m(S,p,v),n))if(a)T[p]=$;else if($)switch(n){case 3:return!0;case 5:return S;case 6:return p;case 2:Eu(T,S)}else switch(n){case 4:return!1;case 7:Eu(T,S)}return r?-1:t||e?e:T}},zi={forEach:Ue(0),map:Ue(1),filter:Ue(2),some:Ue(3),every:Ue(4),find:Ue(5),findIndex:Ue(6),filterReject:Ue(7)},Ky=U,Mf=function(n,a){var i=[][n];return!!i&&Ky(function(){i.call(null,a||function(){return 1},1)})},Yy=zi.forEach,Xy=Mf,qy=Xy("forEach"),Jy=qy?[].forEach:function(a){return Yy(this,a,arguments.length>1?arguments[1]:void 0)},ku=M,wu=Rf,Zy=Af,On=Jy,Qy=dt,Ff=function(n){if(n&&n.forEach!==On)try{Qy(n,"forEach",On)}catch{n.forEach=On}};for(var Rn in wu)wu[Rn]&&Ff(ku[Rn]&&ku[Rn].prototype);Ff(Zy);var Us={},Hs={},Bf={}.propertyIsEnumerable,Uf=Object.getOwnPropertyDescriptor,e0=Uf&&!Bf.call({1:2},1);Hs.f=e0?function(a){var i=Uf(this,a);return!!i&&i.enumerable}:Bf;var t0=Wi,r0=Kt,Xt=function(n){return t0(r0(n))},i0=z,n0=K,a0=Hs,s0=Rr,o0=Xt,u0=Ef,l0=te,c0=Cf,Iu=Object.getOwnPropertyDescriptor;Us.f=i0?Iu:function(a,i){if(a=o0(a),i=u0(i),c0)try{return Iu(a,i)}catch{}if(l0(a,i))return s0(!n0(a0.f,a,i),a[i])};var js={},f0=Lr,h0=Math.max,v0=Math.min,Gs=function(n,a){var i=f0(n);return i<0?h0(i+a,0):v0(i,a)},d0=Xt,g0=Gs,p0=Yt,xu=function(n){return function(a,i,t){var e=d0(a),r=p0(e);if(r===0)return!n&&-1;var s=g0(t,r),o;if(n&&i!==i){for(;r>s;)if(o=e[s++],o!==o)return!0}else for(;r>s;s++)if((n||s in e)&&e[s]===i)return n||s||0;return!n&&-1}},m0={includes:xu(!0),indexOf:xu(!1)},y0=F,An=te,_0=Xt,b0=m0.indexOf,C0=Ls,Pu=y0([].push),Hf=function(n,a){var i=_0(n),t=0,e=[],r;for(r in i)!An(C0,r)&&An(i,r)&&Pu(e,r);for(;a.length>t;)An(i,r=a[t++])&&(~b0(e,r)||Pu(e,r));return e},Vs=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],T0=Hf,S0=Vs,E0=S0.concat("length","prototype");js.f=Object.getOwnPropertyNames||function(a){return T0(a,E0)};var Ws={};Ws.f=Object.getOwnPropertySymbols;var k0=Qe,w0=F,I0=js,x0=Ws,P0=X,O0=w0([].concat),R0=k0("Reflect","ownKeys")||function(a){var i=I0.f(P0(a)),t=x0.f;return t?O0(i,t(a)):i},Ou=te,A0=R0,L0=Us,D0=ke,$0=function(n,a,i){for(var t=A0(a),e=D0.f,r=L0.f,s=0;s<t.length;s++){var o=t[s];!Ou(n,o)&&!(i&&Ou(i,o))&&e(n,o,r(a,o))}},N0=U,M0=j,F0=/#|\.prototype\./,Dr=function(n,a){var i=U0[B0(n)];return i===j0?!0:i===H0?!1:M0(a)?N0(a):!!a},B0=Dr.normalize=function(n){return String(n).replace(F0,".").toLowerCase()},U0=Dr.data={},H0=Dr.NATIVE="N",j0=Dr.POLYFILL="P",zs=Dr,Kr=M,G0=Us.f,V0=dt,W0=ge,z0=ws,K0=$0,Y0=zs,Y=function(n,a){var i=n.target,t=n.global,e=n.stat,r,s,o,u,l,c;if(t?s=Kr:e?s=Kr[i]||z0(i,{}):s=Kr[i]&&Kr[i].prototype,s)for(o in a){if(l=a[o],n.dontCallGetSet?(c=G0(s,o),u=c&&c.value):u=s[o],r=Y0(t?o:i+(e?".":"#")+o,n.forced),!r&&u!==void 0){if(typeof l==typeof u)continue;K0(l,u)}(n.sham||u&&u.sham)&&V0(l,"sham",!0),W0(s,o,l,n)}},X0=U,q0=G,J0=ji,Z0=q0("species"),Ki=function(n){return J0>=51||!X0(function(){var a=[],i=a.constructor={};return i[Z0]=function(){return{foo:1}},a[n](Boolean).foo!==1})},Q0=Y,e1=zi.map,t1=Ki,r1=t1("map");Q0({target:"Array",proto:!0,forced:!r1},{map:function(a){return e1(this,a,arguments.length>1?arguments[1]:void 0)}});var i1=Hf,n1=Vs,Ks=Object.keys||function(a){return i1(a,n1)},a1=Y,s1=Ne,jf=Ks,o1=U,u1=o1(function(){jf(1)});a1({target:"Object",stat:!0,forced:u1},{keys:function(a){return jf(s1(a))}});var nr=M,l1=Ir,c1=tt,Yr=function(n){return l1.slice(0,n.length)===n},Gf=function(){return Yr("Bun/")?"BUN":Yr("Cloudflare-Workers")?"CLOUDFLARE":Yr("Deno/")?"DENO":Yr("Node.js/")?"NODE":nr.Bun&&typeof Bun.version=="string"?"BUN":nr.Deno&&typeof Deno.version=="object"?"DENO":c1(nr.process)==="process"?"NODE":nr.window&&nr.document?"BROWSER":"REST"}(),f1=Gf,Ys=f1==="NODE",h1=F,v1=et,d1=function(n,a,i){try{return h1(v1(Object.getOwnPropertyDescriptor(n,a)[i]))}catch{}},g1=ee,p1=function(n){return g1(n)||n===null},m1=p1,y1=String,_1=TypeError,b1=function(n){if(m1(n))return n;throw new _1("Can't set "+y1(n)+" as a prototype")},C1=d1,T1=ee,S1=Kt,E1=b1,Xs=Object.setPrototypeOf||("__proto__"in{}?function(){var n=!1,a={},i;try{i=C1(Object.prototype,"__proto__","set"),i(a,[]),n=a instanceof Array}catch{}return function(e,r){return S1(e),E1(r),T1(e)&&(n?i(e,r):e.__proto__=r),e}}():void 0),k1=ke.f,w1=te,I1=G,Ru=I1("toStringTag"),qt=function(n,a,i){n&&!i&&(n=n.prototype),n&&!w1(n,Ru)&&k1(n,Ru,{configurable:!0,value:a})},Au=Pf,x1=ke,$r=function(n,a,i){return i.get&&Au(i.get,a,{getter:!0}),i.set&&Au(i.set,a,{setter:!0}),x1.f(n,a,i)},P1=Qe,O1=$r,R1=G,A1=z,Lu=R1("species"),Vf=function(n){var a=P1(n);A1&&a&&!a[Lu]&&O1(a,Lu,{configurable:!0,get:function(){return this}})},L1=xr,D1=TypeError,qs=function(n,a){if(L1(a,n))return n;throw new D1("Incorrect invocation")},$1=Fs,N1=Pr,M1=TypeError,F1=function(n){if($1(n))return n;throw new M1(N1(n)+" is not a constructor")},Du=X,B1=F1,U1=zt,H1=G,j1=H1("species"),G1=function(n,a){var i=Du(n).constructor,t;return i===void 0||U1(t=Du(i)[j1])?a:B1(t)},V1=Hi,Wf=Function.prototype,$u=Wf.apply,Nu=Wf.call,zf=typeof Reflect=="object"&&Reflect.apply||(V1?Nu.bind($u):function(){return Nu.apply($u,arguments)}),W1=Qe,Kf=W1("document","documentElement"),z1=F,Js=z1([].slice),K1=TypeError,Zs=function(n,a){if(n<a)throw new K1("Not enough arguments");return n},Y1=Ir,Yf=/(?:ipad|iphone|ipod).*applewebkit/i.test(Y1),ae=M,X1=zf,q1=gt,Mu=j,J1=te,Xf=U,Fu=Kf,Z1=Js,Bu=Gi,Q1=Zs,e_=Yf,t_=Ys,Na=ae.setImmediate,Ma=ae.clearImmediate,r_=ae.process,Ln=ae.Dispatch,i_=ae.Function,Uu=ae.MessageChannel,n_=ae.String,Dn=0,dr={},Hu="onreadystatechange",Sr,it,$n,Nn;Xf(function(){Sr=ae.location});var Qs=function(n){if(J1(dr,n)){var a=dr[n];delete dr[n],a()}},Mn=function(n){return function(){Qs(n)}},ju=function(n){Qs(n.data)},Gu=function(n){ae.postMessage(n_(n),Sr.protocol+"//"+Sr.host)};(!Na||!Ma)&&(Na=function(a){Q1(arguments.length,1);var i=Mu(a)?a:i_(a),t=Z1(arguments,1);return dr[++Dn]=function(){X1(i,void 0,t)},it(Dn),Dn},Ma=function(a){delete dr[a]},t_?it=function(n){r_.nextTick(Mn(n))}:Ln&&Ln.now?it=function(n){Ln.now(Mn(n))}:Uu&&!e_?($n=new Uu,Nn=$n.port2,$n.port1.onmessage=ju,it=q1(Nn.postMessage,Nn)):ae.addEventListener&&Mu(ae.postMessage)&&!ae.importScripts&&Sr&&Sr.protocol!=="file:"&&!Xf(Gu)?(it=Gu,ae.addEventListener("message",ju,!1)):Hu in Bu("script")?it=function(n){Fu.appendChild(Bu("script"))[Hu]=function(){Fu.removeChild(this),Qs(n)}}:it=function(n){setTimeout(Mn(n),0)});var qf={set:Na,clear:Ma},Vu=M,a_=z,s_=Object.getOwnPropertyDescriptor,Jf=function(n){if(!a_)return Vu[n];var a=s_(Vu,n);return a&&a.value},Zf=function(){this.head=null,this.tail=null};Zf.prototype={add:function(n){var a={item:n,next:null},i=this.tail;i?i.next=a:this.head=a,this.tail=a},get:function(){var n=this.head;if(n){var a=this.head=n.next;return a===null&&(this.tail=null),n.item}}};var Qf=Zf,o_=Ir,u_=/ipad|iphone|ipod/i.test(o_)&&typeof Pebble<"u",l_=Ir,c_=/web0s(?!.*chrome)/i.test(l_),Ht=M,f_=Jf,Wu=gt,Fn=qf.set,h_=Qf,v_=Yf,d_=u_,g_=c_,Bn=Ys,zu=Ht.MutationObserver||Ht.WebKitMutationObserver,Ku=Ht.document,Yu=Ht.process,Xr=Ht.Promise,Fa=f_("queueMicrotask"),Et,Un,Hn,qr,Xu;if(!Fa){var Jr=new h_,Zr=function(){var n,a;for(Bn&&(n=Yu.domain)&&n.exit();a=Jr.get();)try{a()}catch(i){throw Jr.head&&Et(),i}n&&n.enter()};!v_&&!Bn&&!g_&&zu&&Ku?(Un=!0,Hn=Ku.createTextNode(""),new zu(Zr).observe(Hn,{characterData:!0}),Et=function(){Hn.data=Un=!Un}):!d_&&Xr&&Xr.resolve?(qr=Xr.resolve(void 0),qr.constructor=Xr,Xu=Wu(qr.then,qr),Et=function(){Xu(Zr)}):Bn?Et=function(){Yu.nextTick(Zr)}:(Fn=Wu(Fn,Ht),Et=function(){Fn(Zr)}),Fa=function(n){Jr.head||Et(),Jr.add(n)}}var p_=Fa,m_=function(n,a){try{arguments.length===1?console.error(n):console.error(n,a)}catch{}},eo=function(n){try{return{error:!1,value:n()}}catch(a){return{error:!0,value:a}}},y_=M,Yi=y_.Promise,__=M,gr=Yi,b_=j,C_=zs,T_=Rs,S_=G,qu=Gf,jn=ji;gr&&gr.prototype;var E_=S_("species"),Ba=!1,eh=b_(__.PromiseRejectionEvent),k_=C_("Promise",function(){var n=T_(gr),a=n!==String(gr);if(!a&&jn===66)return!0;if(!jn||jn<51||!/native code/.test(n)){var i=new gr(function(r){r(1)}),t=function(r){r(function(){},function(){})},e=i.constructor={};if(e[E_]=t,Ba=i.then(function(){})instanceof t,!Ba)return!0}return!a&&(qu==="BROWSER"||qu==="DENO")&&!eh}),Nr={CONSTRUCTOR:k_,REJECTION_EVENT:eh,SUBCLASSING:Ba},Jt={},Ju=et,w_=TypeError,I_=function(n){var a,i;this.promise=new n(function(t,e){if(a!==void 0||i!==void 0)throw new w_("Bad Promise constructor");a=t,i=e}),this.resolve=Ju(a),this.reject=Ju(i)};Jt.f=function(n){return new I_(n)};var x_=Y,xi=Ys,Xe=M,jt=K,Zu=ge,Qu=Xs,P_=qt,O_=Vf,R_=et,fi=j,A_=ee,L_=qs,D_=G1,th=qf.set,to=p_,$_=m_,N_=eo,M_=Qf,rh=Me,Pi=Yi,ro=Nr,ih=Jt,Xi="Promise",nh=ro.CONSTRUCTOR,F_=ro.REJECTION_EVENT,B_=ro.SUBCLASSING,Gn=rh.getterFor(Xi),U_=rh.set,Ot=Pi&&Pi.prototype,ut=Pi,Qr=Ot,ah=Xe.TypeError,Ua=Xe.document,io=Xe.process,Ha=ih.f,H_=Ha,j_=!!(Ua&&Ua.createEvent&&Xe.dispatchEvent),sh="unhandledrejection",G_="rejectionhandled",el=0,oh=1,V_=2,no=1,uh=2,ei,tl,W_,rl,lh=function(n){var a;return A_(n)&&fi(a=n.then)?a:!1},ch=function(n,a){var i=a.value,t=a.state===oh,e=t?n.ok:n.fail,r=n.resolve,s=n.reject,o=n.domain,u,l,c;try{e?(t||(a.rejection===uh&&K_(a),a.rejection=no),e===!0?u=i:(o&&o.enter(),u=e(i),o&&(o.exit(),c=!0)),u===n.promise?s(new ah("Promise-chain cycle")):(l=lh(u))?jt(l,u,r,s):r(u)):s(i)}catch(f){o&&!c&&o.exit(),s(f)}},fh=function(n,a){n.notified||(n.notified=!0,to(function(){for(var i=n.reactions,t;t=i.get();)ch(t,n);n.notified=!1,a&&!n.rejection&&z_(n)}))},hh=function(n,a,i){var t,e;j_?(t=Ua.createEvent("Event"),t.promise=a,t.reason=i,t.initEvent(n,!1,!0),Xe.dispatchEvent(t)):t={promise:a,reason:i},!F_&&(e=Xe["on"+n])?e(t):n===sh&&$_("Unhandled promise rejection",i)},z_=function(n){jt(th,Xe,function(){var a=n.facade,i=n.value,t=il(n),e;if(t&&(e=N_(function(){xi?io.emit("unhandledRejection",i,a):hh(sh,a,i)}),n.rejection=xi||il(n)?uh:no,e.error))throw e.value})},il=function(n){return n.rejection!==no&&!n.parent},K_=function(n){jt(th,Xe,function(){var a=n.facade;xi?io.emit("rejectionHandled",a):hh(G_,a,n.value)})},Nt=function(n,a,i){return function(t){n(a,t,i)}},Bt=function(n,a,i){n.done||(n.done=!0,i&&(n=i),n.value=a,n.state=V_,fh(n,!0))},ja=function(n,a,i){if(!n.done){n.done=!0,i&&(n=i);try{if(n.facade===a)throw new ah("Promise can't be resolved itself");var t=lh(a);t?to(function(){var e={done:!1};try{jt(t,a,Nt(ja,e,n),Nt(Bt,e,n))}catch(r){Bt(e,r,n)}}):(n.value=a,n.state=oh,fh(n,!1))}catch(e){Bt({done:!1},e,n)}}};if(nh&&(ut=function(a){L_(this,Qr),R_(a),jt(ei,this);var i=Gn(this);try{a(Nt(ja,i),Nt(Bt,i))}catch(t){Bt(i,t)}},Qr=ut.prototype,ei=function(a){U_(this,{type:Xi,done:!1,notified:!1,parent:!1,reactions:new M_,rejection:!1,state:el,value:null})},ei.prototype=Zu(Qr,"then",function(a,i){var t=Gn(this),e=Ha(D_(this,ut));return t.parent=!0,e.ok=fi(a)?a:!0,e.fail=fi(i)&&i,e.domain=xi?io.domain:void 0,t.state===el?t.reactions.add(e):to(function(){ch(e,t)}),e.promise}),tl=function(){var n=new ei,a=Gn(n);this.promise=n,this.resolve=Nt(ja,a),this.reject=Nt(Bt,a)},ih.f=Ha=function(n){return n===ut||n===W_?new tl(n):H_(n)},fi(Pi)&&Ot!==Object.prototype)){rl=Ot.then,B_||Zu(Ot,"then",function(a,i){var t=this;return new ut(function(e,r){jt(rl,t,e,r)}).then(a,i)},{unsafe:!0});try{delete Ot.constructor}catch{}Qu&&Qu(Ot,Qr)}x_({global:!0,constructor:!0,wrap:!0,forced:nh},{Promise:ut});P_(ut,Xi,!1);O_(Xi);var Mr={},Y_=G,X_=Mr,q_=Y_("iterator"),J_=Array.prototype,vh=function(n){return n!==void 0&&(X_.Array===n||J_[q_]===n)},Z_=Ar,nl=Or,Q_=zt,eb=Mr,tb=G,rb=tb("iterator"),qi=function(n){if(!Q_(n))return nl(n,rb)||nl(n,"@@iterator")||eb[Z_(n)]},ib=K,nb=et,ab=X,sb=Pr,ob=qi,ub=TypeError,ao=function(n,a){var i=arguments.length<2?ob(n):a;if(nb(i))return ab(ib(i,n));throw new ub(sb(n)+" is not iterable")},lb=K,al=X,cb=Or,dh=function(n,a,i){var t,e;al(n);try{if(t=cb(n,"return"),!t){if(a==="throw")throw i;return i}t=lb(t,n)}catch(r){e=!0,t=r}if(a==="throw")throw i;if(e)throw t;return al(t),i},fb=gt,hb=K,vb=X,db=Pr,gb=vh,pb=Yt,sl=xr,mb=ao,yb=qi,ol=dh,_b=TypeError,hi=function(n,a){this.stopped=n,this.result=a},ul=hi.prototype,gh=function(n,a,i){var t=i&&i.that,e=!!(i&&i.AS_ENTRIES),r=!!(i&&i.IS_RECORD),s=!!(i&&i.IS_ITERATOR),o=!!(i&&i.INTERRUPTED),u=fb(a,t),l,c,f,v,d,g,m,p=function(T){return l&&ol(l,"normal",T),new hi(!0,T)},b=function(T){return e?(vb(T),o?u(T[0],T[1],p):u(T[0],T[1])):o?u(T,p):u(T)};if(r)l=n.iterator;else if(s)l=n;else{if(c=yb(n),!c)throw new _b(db(n)+" is not iterable");if(gb(c)){for(f=0,v=pb(n);v>f;f++)if(d=b(n[f]),d&&sl(ul,d))return d;return new hi(!1)}l=mb(n,c)}for(g=r?n.next:l.next;!(m=hb(g,l)).done;){try{d=b(m.value)}catch(T){ol(l,"throw",T)}if(typeof d=="object"&&d&&sl(ul,d))return d}return new hi(!1)},bb=G,ph=bb("iterator"),mh=!1;try{var Cb=0,ll={next:function(){return{done:!!Cb++}},return:function(){mh=!0}};ll[ph]=function(){return this},Array.from(ll,function(){throw 2})}catch{}var Tb=function(n,a){try{if(!a&&!mh)return!1}catch{return!1}var i=!1;try{var t={};t[ph]=function(){return{next:function(){return{done:i=!0}}}},n(t)}catch{}return i},Sb=Yi,Eb=Tb,kb=Nr.CONSTRUCTOR,yh=kb||!Eb(function(n){Sb.all(n).then(void 0,function(){})}),wb=Y,Ib=K,xb=et,Pb=Jt,Ob=eo,Rb=gh,Ab=yh;wb({target:"Promise",stat:!0,forced:Ab},{all:function(a){var i=this,t=Pb.f(i),e=t.resolve,r=t.reject,s=Ob(function(){var o=xb(i.resolve),u=[],l=0,c=1;Rb(a,function(f){var v=l++,d=!1;c++,Ib(o,i,f).then(function(g){d||(d=!0,u[v]=g,--c||e(u))},r)}),--c||e(u)});return s.error&&r(s.value),t.promise}});var Lb=Y,Db=Nr.CONSTRUCTOR,Ga=Yi,$b=Qe,Nb=j,Mb=ge,cl=Ga&&Ga.prototype;Lb({target:"Promise",proto:!0,forced:Db,real:!0},{catch:function(n){return this.then(void 0,n)}});if(Nb(Ga)){var fl=$b("Promise").prototype.catch;cl.catch!==fl&&Mb(cl,"catch",fl,{unsafe:!0})}var Fb=Y,Bb=K,Ub=et,Hb=Jt,jb=eo,Gb=gh,Vb=yh;Fb({target:"Promise",stat:!0,forced:Vb},{race:function(a){var i=this,t=Hb.f(i),e=t.reject,r=jb(function(){var s=Ub(i.resolve);Gb(a,function(o){Bb(s,i,o).then(t.resolve,e)})});return r.error&&e(r.value),t.promise}});var Wb=Y,zb=Jt,Kb=Nr.CONSTRUCTOR;Wb({target:"Promise",stat:!0,forced:Kb},{reject:function(a){var i=zb.f(this),t=i.reject;return t(a),i.promise}});var Yb=X,Xb=ee,qb=Jt,Jb=function(n,a){if(Yb(n),Xb(a)&&a.constructor===n)return a;var i=qb.f(n),t=i.resolve;return t(a),i.promise},Zb=Y,Qb=Qe,eC=Nr.CONSTRUCTOR,tC=Jb;Qb("Promise");Zb({target:"Promise",stat:!0,forced:eC},{resolve:function(a){return tC(this,a)}});var rC=TypeError,iC=9007199254740991,_h=function(n){if(n>iC)throw rC("Maximum allowed index exceeded");return n},nC=z,aC=ke,sC=Rr,so=function(n,a,i){nC?aC.f(n,a,sC(0,i)):n[a]=i},oC=Y,uC=U,lC=Ns,cC=ee,fC=Ne,hC=Yt,hl=_h,vl=so,vC=Bs,dC=Ki,gC=G,pC=ji,bh=gC("isConcatSpreadable"),mC=pC>=51||!uC(function(){var n=[];return n[bh]=!1,n.concat()[0]!==n}),yC=function(n){if(!cC(n))return!1;var a=n[bh];return a!==void 0?!!a:lC(n)},_C=!mC||!dC("concat");oC({target:"Array",proto:!0,arity:1,forced:_C},{concat:function(a){var i=fC(this),t=vC(i,0),e=0,r,s,o,u,l;for(r=-1,o=arguments.length;r<o;r++)if(l=r===-1?i:arguments[r],yC(l))for(u=hC(l),hl(e+u),s=0;s<u;s++,e++)s in l&&vl(t,e,l[s]);else hl(e+1),vl(t,e++,l);return t.length=e,t}});var bC=z,CC=Ns,TC=TypeError,SC=Object.getOwnPropertyDescriptor,EC=bC&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(n){return n instanceof TypeError}}(),kC=EC?function(n,a){if(CC(n)&&!SC(n,"length").writable)throw new TC("Cannot set read only .length");return n.length=a}:function(n,a){return n.length=a},dl=Pr,wC=TypeError,IC=function(n,a){if(!delete n[a])throw new wC("Cannot delete property "+dl(a)+" of "+dl(n))},xC=Y,PC=Ne,OC=Gs,RC=Lr,AC=Yt,LC=kC,DC=_h,$C=Bs,NC=so,Vn=IC,MC=Ki,FC=MC("splice"),BC=Math.max,UC=Math.min;xC({target:"Array",proto:!0,forced:!FC},{splice:function(a,i){var t=PC(this),e=AC(t),r=OC(a,e),s=arguments.length,o,u,l,c,f,v;for(s===0?o=u=0:s===1?(o=0,u=e-r):(o=s-2,u=UC(BC(RC(i),0),e-r)),DC(e+o-u),l=$C(t,u),c=0;c<u;c++)f=r+c,f in t&&NC(l,c,t[f]);if(l.length=u,o<u){for(c=r;c<e-u;c++)f=c+u,v=c+o,f in t?t[v]=t[f]:Vn(t,v);for(c=e;c>e-u+o;c--)Vn(t,c-1)}else if(o>u)for(c=e-u;c>r;c--)f=c+u-1,v=c+o-1,f in t?t[v]=t[f]:Vn(t,v);for(c=0;c<o;c++)t[c+r]=arguments[c+2];return LC(t,e-u+o),l}});var Ch={},HC=z,jC=Tf,GC=ke,VC=X,WC=Xt,zC=Ks;Ch.f=HC&&!jC?Object.defineProperties:function(a,i){VC(a);for(var t=WC(i),e=zC(i),r=e.length,s=0,o;r>s;)GC.f(a,o=e[s++],t[o]);return a};var KC=X,YC=Ch,gl=Vs,XC=Ls,qC=Kf,JC=Gi,ZC=As,pl=">",ml="<",Va="prototype",Wa="script",Th=ZC("IE_PROTO"),Wn=function(){},Sh=function(n){return ml+Wa+pl+n+ml+"/"+Wa+pl},yl=function(n){n.write(Sh("")),n.close();var a=n.parentWindow.Object;return n=null,a},QC=function(){var n=JC("iframe"),a="java"+Wa+":",i;return n.style.display="none",qC.appendChild(n),n.src=String(a),i=n.contentWindow.document,i.open(),i.write(Sh("document.F=Object")),i.close(),i.F},ti,vi=function(){try{ti=new ActiveXObject("htmlfile")}catch{}vi=typeof document<"u"?document.domain&&ti?yl(ti):QC():yl(ti);for(var n=gl.length;n--;)delete vi[Va][gl[n]];return vi()};XC[Th]=!0;var Fr=Object.create||function(a,i){var t;return a!==null?(Wn[Va]=KC(a),t=new Wn,Wn[Va]=null,t[Th]=a):t=vi(),i===void 0?t:YC.f(t,i)},eT=G,tT=Fr,rT=ke.f,za=eT("unscopables"),Ka=Array.prototype;Ka[za]===void 0&&rT(Ka,za,{configurable:!0,value:tT(null)});var Eh=function(n){Ka[za][n]=!0},iT=ee,nT=tt,aT=G,sT=aT("match"),oT=function(n){var a;return iT(n)&&((a=n[sT])!==void 0?!!a:nT(n)==="RegExp")},uT=Ar,lT=String,Ae=function(n){if(uT(n)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return lT(n)},cT=z,fT=Vi.EXISTS,kh=F,hT=$r,wh=Function.prototype,vT=kh(wh.toString),Ih=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,dT=kh(Ih.exec),gT="name";cT&&!fT&&hT(wh,gT,{configurable:!0,get:function(){try{return dT(Ih,vT(this))[1]}catch{return""}}});var pT=j,mT=ee,_l=Xs,yT=function(n,a,i){var t,e;return _l&&pT(t=a.constructor)&&t!==i&&mT(e=t.prototype)&&e!==i.prototype&&_l(n,e),n},_T=X,xh=function(){var n=_T(this),a="";return n.hasIndices&&(a+="d"),n.global&&(a+="g"),n.ignoreCase&&(a+="i"),n.multiline&&(a+="m"),n.dotAll&&(a+="s"),n.unicode&&(a+="u"),n.unicodeSets&&(a+="v"),n.sticky&&(a+="y"),a},oo=U,bT=M,uo=bT.RegExp,lo=oo(function(){var n=uo("a","y");return n.lastIndex=2,n.exec("abcd")!==null}),CT=lo||oo(function(){return!uo("a","y").sticky}),TT=lo||oo(function(){var n=uo("^r","gy");return n.lastIndex=2,n.exec("str")!==null}),co={BROKEN_CARET:TT,MISSED_STICKY:CT,UNSUPPORTED_Y:lo},ST=U,ET=M,kT=ET.RegExp,Ph=ST(function(){var n=kT(".","s");return!(n.dotAll&&n.test(`
`)&&n.flags==="s")}),wT=U,IT=M,xT=IT.RegExp,Oh=wT(function(){var n=xT("(?<a>b)","g");return n.exec("b").groups.a!=="b"||"b".replace(n,"$<a>c")!=="bc"}),Mt=K,Ji=F,PT=Ae,OT=xh,RT=co,AT=xs,LT=Fr,DT=Me.get,$T=Ph,NT=Oh,MT=AT("native-string-replace",String.prototype.replace),Oi=RegExp.prototype.exec,Ya=Oi,FT=Ji("".charAt),BT=Ji("".indexOf),UT=Ji("".replace),zn=Ji("".slice),Xa=function(){var n=/a/,a=/b*/g;return Mt(Oi,n,"a"),Mt(Oi,a,"a"),n.lastIndex!==0||a.lastIndex!==0}(),Rh=RT.BROKEN_CARET,qa=/()??/.exec("")[1]!==void 0,HT=Xa||qa||Rh||$T||NT;HT&&(Ya=function(a){var i=this,t=DT(i),e=PT(a),r=t.raw,s,o,u,l,c,f,v;if(r)return r.lastIndex=i.lastIndex,s=Mt(Ya,r,e),i.lastIndex=r.lastIndex,s;var d=t.groups,g=Rh&&i.sticky,m=Mt(OT,i),p=i.source,b=0,T=e;if(g&&(m=UT(m,"y",""),BT(m,"g")===-1&&(m+="g"),T=zn(e,i.lastIndex),i.lastIndex>0&&(!i.multiline||i.multiline&&FT(e,i.lastIndex-1)!==`
`)&&(p="(?: "+p+")",T=" "+T,b++),o=new RegExp("^(?:"+p+")",m)),qa&&(o=new RegExp("^"+p+"$(?!\\s)",m)),Xa&&(u=i.lastIndex),l=Mt(Oi,g?o:i,T),g?l?(l.input=zn(l.input,b),l[0]=zn(l[0],b),l.index=i.lastIndex,i.lastIndex+=l[0].length):i.lastIndex=0:Xa&&l&&(i.lastIndex=i.global?l.index+l[0].length:u),qa&&l&&l.length>1&&Mt(MT,l[0],o,function(){for(c=1;c<arguments.length-2;c++)arguments[c]===void 0&&(l[c]=void 0)}),l&&d)for(l.groups=f=LT(null),c=0;c<d.length;c++)v=d[c],f[v[0]]=l[v[1]];return l});var fo=Ya,jT=Y,bl=fo;jT({target:"RegExp",proto:!0,forced:/./.exec!==bl},{exec:bl});var Cl=K,Tl=ge,GT=fo,Sl=U,Ah=G,VT=dt,WT=Ah("species"),Kn=RegExp.prototype,Lh=function(n,a,i,t){var e=Ah(n),r=!Sl(function(){var l={};return l[e]=function(){return 7},""[n](l)!==7}),s=r&&!Sl(function(){var l=!1,c=/a/;return n==="split"&&(c={},c.constructor={},c.constructor[WT]=function(){return c},c.flags="",c[e]=/./[e]),c.exec=function(){return l=!0,null},c[e](""),!l});if(!r||!s||i){var o=/./[e],u=a(e,""[n],function(l,c,f,v,d){var g=c.exec;return g===GT||g===Kn.exec?r&&!d?{done:!0,value:Cl(o,c,f,v)}:{done:!0,value:Cl(l,f,c,v)}:{done:!1}});Tl(String.prototype,n,u[0]),Tl(Kn,e,u[1])}t&&VT(Kn[e],"sham",!0)},ho=F,zT=Lr,KT=Ae,YT=Kt,XT=ho("".charAt),El=ho("".charCodeAt),qT=ho("".slice),kl=function(n){return function(a,i){var t=KT(YT(a)),e=zT(i),r=t.length,s,o;return e<0||e>=r?n?"":void 0:(s=El(t,e),s<55296||s>56319||e+1===r||(o=El(t,e+1))<56320||o>57343?n?XT(t,e):s:n?qT(t,e,e+2):(s-55296<<10)+(o-56320)+65536)}},vo={codeAt:kl(!1),charAt:kl(!0)},JT=vo.charAt,Dh=function(n,a,i){return a+(i?JT(n,a).length:1)},wl=K,ZT=X,QT=j,eS=tt,tS=fo,rS=TypeError,$h=function(n,a){var i=n.exec;if(QT(i)){var t=wl(i,n,a);return t!==null&&ZT(t),t}if(eS(n)==="RegExp")return wl(tS,n,a);throw new rS("RegExp#exec called on incompatible receiver")},iS=K,nS=Lh,aS=X,sS=zt,oS=$s,Yn=Ae,uS=Kt,lS=Or,cS=Dh,Il=$h;nS("match",function(n,a,i){return[function(e){var r=uS(this),s=sS(e)?void 0:lS(e,n);return s?iS(s,e,r):new RegExp(e)[n](Yn(r))},function(t){var e=aS(this),r=Yn(t),s=i(a,e,r);if(s.done)return s.value;if(!e.global)return Il(e,r);var o=e.unicode;e.lastIndex=0;for(var u=[],l=0,c;(c=Il(e,r))!==null;){var f=Yn(c[0]);u[l]=f,f===""&&(e.lastIndex=cS(r,oS(e.lastIndex),o)),l++}return l===0?null:u}]});var fS=K,hS=te,vS=xr,dS=xh,xl=RegExp.prototype,Nh=function(n){var a=n.flags;return a===void 0&&!("flags"in xl)&&!hS(n,"flags")&&vS(xl,n)?fS(dS,n):a},gS=ke.f,pS=function(n,a,i){i in n||gS(n,i,{configurable:!0,get:function(){return a[i]},set:function(t){a[i]=t}})},mS=z,go=M,Br=F,yS=zs,_S=yT,bS=dt,CS=Fr,TS=js.f,Pl=xr,SS=oT,Ol=Ae,ES=Nh,Mh=co,kS=pS,wS=ge,IS=U,xS=te,PS=Me.enforce,OS=Vf,RS=G,Fh=Ph,Bh=Oh,AS=RS("match"),ze=go.RegExp,Rt=ze.prototype,LS=go.SyntaxError,DS=Br(Rt.exec),Ri=Br("".charAt),Rl=Br("".replace),Al=Br("".indexOf),Ll=Br("".slice),$S=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,ct=/a/g,Xn=/a/g,NS=new ze(ct)!==ct,Uh=Mh.MISSED_STICKY,MS=Mh.UNSUPPORTED_Y,FS=mS&&(!NS||Uh||Fh||Bh||IS(function(){return Xn[AS]=!1,ze(ct)!==ct||ze(Xn)===Xn||String(ze(ct,"i"))!=="/a/i"})),BS=function(n){for(var a=n.length,i=0,t="",e=!1,r;i<=a;i++){if(r=Ri(n,i),r==="\\"){t+=r+Ri(n,++i);continue}!e&&r==="."?t+="[\\s\\S]":(r==="["?e=!0:r==="]"&&(e=!1),t+=r)}return t},US=function(n){for(var a=n.length,i=0,t="",e=[],r=CS(null),s=!1,o=!1,u=0,l="",c;i<=a;i++){if(c=Ri(n,i),c==="\\")c+=Ri(n,++i);else if(c==="]")s=!1;else if(!s)switch(!0){case c==="[":s=!0;break;case c==="(":if(t+=c,Ll(n,i+1,i+3)==="?:")continue;DS($S,Ll(n,i+1))&&(i+=2,o=!0),u++;continue;case(c===">"&&o):if(l===""||xS(r,l))throw new LS("Invalid capture group name");r[l]=!0,e[e.length]=[l,u],o=!1,l="";continue}o?l+=c:t+=c}return[t,e]};if(yS("RegExp",FS)){for(var nt=function(a,i){var t=Pl(Rt,this),e=SS(a),r=i===void 0,s=[],o=a,u,l,c,f,v,d;if(!t&&e&&r&&a.constructor===nt)return a;if((e||Pl(Rt,a))&&(a=a.source,r&&(i=ES(o))),a=a===void 0?"":Ol(a),i=i===void 0?"":Ol(i),o=a,Fh&&"dotAll"in ct&&(l=!!i&&Al(i,"s")>-1,l&&(i=Rl(i,/s/g,""))),u=i,Uh&&"sticky"in ct&&(c=!!i&&Al(i,"y")>-1,c&&MS&&(i=Rl(i,/y/g,""))),Bh&&(f=US(a),a=f[0],s=f[1]),v=_S(ze(a,i),t?this:Rt,nt),(l||c||s.length)&&(d=PS(v),l&&(d.dotAll=!0,d.raw=nt(BS(a),u)),c&&(d.sticky=!0),s.length&&(d.groups=s)),a!==o)try{bS(v,"source",o===""?"(?:)":o)}catch{}return v},Dl=TS(ze),$l=0;Dl.length>$l;)kS(nt,ze,Dl[$l++]);Rt.constructor=nt,nt.prototype=Rt,wS(go,"RegExp",nt,{constructor:!0})}OS("RegExp");var HS=z,jS=co.MISSED_STICKY,GS=tt,VS=$r,WS=Me.get,Nl=RegExp.prototype,zS=TypeError;HS&&jS&&VS(Nl,"sticky",{configurable:!0,get:function(){if(this!==Nl){if(GS(this)==="RegExp")return!!WS(this).sticky;throw new zS("Incompatible receiver, RegExp required")}}});var KS=Vi.PROPER,YS=ge,XS=X,Ml=Ae,qS=U,JS=Nh,po="toString",Hh=RegExp.prototype,jh=Hh[po],ZS=qS(function(){return jh.call({source:"a",flags:"b"})!=="/a/b"}),QS=KS&&jh.name!==po;(ZS||QS)&&YS(Hh,po,function(){var a=XS(this),i=Ml(a.source),t=Ml(JS(a));return"/"+i+"/"+t},{unsafe:!0});var mo=F,eE=Ne,tE=Math.floor,qn=mo("".charAt),rE=mo("".replace),Jn=mo("".slice),iE=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,nE=/\$([$&'`]|\d{1,2})/g,aE=function(n,a,i,t,e,r){var s=i+n.length,o=t.length,u=nE;return e!==void 0&&(e=eE(e),u=iE),rE(r,u,function(l,c){var f;switch(qn(c,0)){case"$":return"$";case"&":return n;case"`":return Jn(a,0,i);case"'":return Jn(a,s);case"<":f=e[Jn(c,1,-1)];break;default:var v=+c;if(v===0)return l;if(v>o){var d=tE(v/10);return d===0?l:d<=o?t[d-1]===void 0?qn(c,1):t[d-1]+qn(c,1):l}f=t[v-1]}return f===void 0?"":f})},sE=zf,Fl=K,Zi=F,oE=Lh,uE=U,lE=X,cE=j,fE=zt,hE=Lr,vE=$s,kt=Ae,dE=Kt,gE=Dh,pE=Or,mE=aE,yE=$h,_E=G,Ja=_E("replace"),bE=Math.max,CE=Math.min,TE=Zi([].concat),Zn=Zi([].push),Bl=Zi("".indexOf),Ul=Zi("".slice),SE=function(n){return n===void 0?n:String(n)},EE=function(){return"a".replace(/./,"$0")==="$0"}(),Hl=function(){return/./[Ja]?/./[Ja]("a","$0")==="":!1}(),kE=!uE(function(){var n=/./;return n.exec=function(){var a=[];return a.groups={a:"7"},a},"".replace(n,"$<a>")!=="7"});oE("replace",function(n,a,i){var t=Hl?"$":"$0";return[function(r,s){var o=dE(this),u=fE(r)?void 0:pE(r,Ja);return u?Fl(u,r,o,s):Fl(a,kt(o),r,s)},function(e,r){var s=lE(this),o=kt(e);if(typeof r=="string"&&Bl(r,t)===-1&&Bl(r,"$<")===-1){var u=i(a,s,o,r);if(u.done)return u.value}var l=cE(r);l||(r=kt(r));var c=s.global,f;c&&(f=s.unicode,s.lastIndex=0);for(var v=[],d;d=yE(s,o),!(d===null||(Zn(v,d),!c));){var g=kt(d[0]);g===""&&(s.lastIndex=gE(o,vE(s.lastIndex),f))}for(var m="",p=0,b=0;b<v.length;b++){d=v[b];for(var T=kt(d[0]),S=bE(CE(hE(d.index),o.length),0),$=[],L,oe=1;oe<d.length;oe++)Zn($,SE(d[oe]));var H=d.groups;if(l){var me=TE([T],$,S,o);H!==void 0&&Zn(me,H),L=kt(sE(r,void 0,me))}else L=mE(T,o,S,$,H,r);S>=p&&(m+=Ul(o,p,S)+L,p=S+T.length)}return m+Ul(o,p)}]},!kE||!EE||Hl);var wE=Y,jl=K,IE=j,Gl=X,xE=Ae,PE=function(){var n=!1,a=/[ac]/;return a.exec=function(){return n=!0,/./.exec.apply(this,arguments)},a.test("abc")===!0&&n}(),OE=/./.test;wE({target:"RegExp",proto:!0,forced:!PE},{test:function(n){var a=Gl(this),i=xE(n),t=a.exec;if(!IE(t))return jl(OE,a,i);var e=jl(t,a,i);return e===null?!1:(Gl(e),!0)}});var RE=Y,AE=F,LE=Wi,DE=Xt,$E=Mf,NE=AE([].join),ME=LE!==Object,FE=ME||!$E("join",",");RE({target:"Array",proto:!0,forced:FE},{join:function(a){return NE(DE(this),a===void 0?",":a)}});function Vl(n,a){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);a&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),i.push.apply(i,t)}return i}function Ai(n){for(var a=1;a<arguments.length;a++){var i=arguments[a]!=null?arguments[a]:{};a%2?Vl(Object(i),!0).forEach(function(t){Ke(n,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Vl(Object(i)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(i,t))})}return n}function we(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}function Wl(n,a){for(var i=0;i<a.length;i++){var t=a[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function Ie(n,a,i){return a&&Wl(n.prototype,a),i&&Wl(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n}function Ke(n,a,i){return a in n?Object.defineProperty(n,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[a]=i,n}function pt(n,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(a&&a.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),a&&Za(n,a)}function Li(n){return Li=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Li(n)}function Za(n,a){return Za=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Za(n,a)}function BE(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function se(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function UE(n,a){if(a&&(typeof a=="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return se(n)}function mt(n){var a=BE();return function(){var t=Li(n),e;if(a){var r=Li(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return UE(this,e)}}var HE=U,jE=!HE(function(){function n(){}return n.prototype.constructor=null,Object.getPrototypeOf(new n)!==n.prototype}),GE=te,VE=j,WE=Ne,zE=As,KE=jE,zl=zE("IE_PROTO"),Qa=Object,YE=Qa.prototype,Gh=KE?Qa.getPrototypeOf:function(n){var a=WE(n);if(GE(a,zl))return a[zl];var i=a.constructor;return VE(i)&&a instanceof i?i.prototype:a instanceof Qa?YE:null},XE=U,qE=j,JE=ee,Kl=Gh,ZE=ge,QE=G,es=QE("iterator"),Vh=!1,ht,Qn,ea;[].keys&&(ea=[].keys(),"next"in ea?(Qn=Kl(Kl(ea)),Qn!==Object.prototype&&(ht=Qn)):Vh=!0);var ek=!JE(ht)||XE(function(){var n={};return ht[es].call(n)!==n});ek&&(ht={});qE(ht[es])||ZE(ht,es,function(){return this});var Wh={IteratorPrototype:ht,BUGGY_SAFARI_ITERATORS:Vh},tk=Wh.IteratorPrototype,rk=Fr,ik=Rr,nk=qt,ak=Mr,sk=function(){return this},zh=function(n,a,i,t){var e=a+" Iterator";return n.prototype=rk(tk,{next:ik(+!t,i)}),nk(n,e,!1),ak[e]=sk,n},ok=Y,uk=K,Kh=Vi,lk=j,ck=zh,Yl=Gh,Xl=Xs,fk=qt,hk=dt,ta=ge,vk=G,dk=Mr,Yh=Wh,gk=Kh.PROPER,pk=Kh.CONFIGURABLE,ql=Yh.IteratorPrototype,ri=Yh.BUGGY_SAFARI_ITERATORS,ar=vk("iterator"),Jl="keys",sr="values",Zl="entries",mk=function(){return this},Xh=function(n,a,i,t,e,r,s){ck(i,a,t);var o=function(b){if(b===e&&v)return v;if(!ri&&b&&b in c)return c[b];switch(b){case Jl:return function(){return new i(this,b)};case sr:return function(){return new i(this,b)};case Zl:return function(){return new i(this,b)}}return function(){return new i(this)}},u=a+" Iterator",l=!1,c=n.prototype,f=c[ar]||c["@@iterator"]||e&&c[e],v=!ri&&f||o(e),d=a==="Array"&&c.entries||f,g,m,p;if(d&&(g=Yl(d.call(new n)),g!==Object.prototype&&g.next&&(Yl(g)!==ql&&(Xl?Xl(g,ql):lk(g[ar])||ta(g,ar,mk)),fk(g,u,!0))),gk&&e===sr&&f&&f.name!==sr&&(pk?hk(c,"name",sr):(l=!0,v=function(){return uk(f,this)})),e)if(m={values:o(sr),keys:r?v:o(Jl),entries:o(Zl)},s)for(p in m)(ri||l||!(p in c))&&ta(c,p,m[p]);else ok({target:a,proto:!0,forced:ri||l},m);return c[ar]!==v&&ta(c,ar,v,{name:e}),dk[a]=v,m},yo=function(n,a){return{value:n,done:a}},yk=Xt,_o=Eh,Ql=Mr,qh=Me,_k=ke.f,bk=Xh,ii=yo,Ck=z,Jh="Array Iterator",Tk=qh.set,Sk=qh.getterFor(Jh),Ek=bk(Array,"Array",function(n,a){Tk(this,{type:Jh,target:yk(n),index:0,kind:a})},function(){var n=Sk(this),a=n.target,i=n.index++;if(!a||i>=a.length)return n.target=null,ii(void 0,!0);switch(n.kind){case"keys":return ii(i,!1);case"values":return ii(a[i],!1)}return ii([i,a[i]],!1)},"values"),ec=Ql.Arguments=Ql.Array;_o("keys");_o("values");_o("entries");if(Ck&&ec.name!=="values")try{_k(ec,"name",{value:"values"})}catch{}var kk=vo.charAt,wk=Ae,Zh=Me,Ik=Xh,tc=yo,Qh="String Iterator",xk=Zh.set,Pk=Zh.getterFor(Qh);Ik(String,"String",function(n){xk(this,{type:Qh,string:wk(n),index:0})},function(){var a=Pk(this),i=a.string,t=a.index,e;return t>=i.length?tc(void 0,!0):(e=kk(i,t),a.index+=e.length,tc(e,!1))});var rc=M,ev=Rf,Ok=Af,fr=Ek,ic=dt,Rk=qt,Ak=G,ra=Ak("iterator"),ia=fr.values,tv=function(n,a){if(n){if(n[ra]!==ia)try{ic(n,ra,ia)}catch{n[ra]=ia}if(Rk(n,a,!0),ev[a]){for(var i in fr)if(n[i]!==fr[i])try{ic(n,i,fr[i])}catch{n[i]=fr[i]}}}};for(var na in ev)tv(rc[na]&&rc[na].prototype,na);tv(Ok,"DOMTokenList");var Lk=U,Dk=G,$k=z,nc=Vg,Nk=Dk("iterator"),rv=!Lk(function(){var n=new URL("b?a=1&b=2&c=3","https://a"),a=n.searchParams,i=new URLSearchParams("a=1&a=2&b=3"),t="";return n.pathname="c%20d",a.forEach(function(e,r){a.delete("b"),t+=r+e}),i.delete("a",2),i.delete("b",void 0),nc&&(!n.toJSON||!i.has("a",1)||i.has("a",2)||!i.has("a",void 0)||i.has("b"))||!a.size&&(nc||!$k)||!a.sort||n.href!=="https://a/c%20d?a=1&c=3"||a.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!a[Nk]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("https://тест").host!=="xn--e1aybc"||new URL("https://a#б").hash!=="#%D0%B1"||t!=="a1c3"||new URL("https://x",void 0).host!=="x"}),ac=z,Mk=F,Fk=K,Bk=U,aa=Ks,Uk=Ws,Hk=Hs,jk=Ne,Gk=Wi,wt=Object.assign,sc=Object.defineProperty,Vk=Mk([].concat),Wk=!wt||Bk(function(){if(ac&&wt({b:1},wt(sc({},"a",{enumerable:!0,get:function(){sc(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var n={},a={},i=Symbol("assign detection"),t="abcdefghijklmnopqrst";return n[i]=7,t.split("").forEach(function(e){a[e]=e}),wt({},n)[i]!==7||aa(wt({},a)).join("")!==t})?function(a,i){for(var t=jk(a),e=arguments.length,r=1,s=Uk.f,o=Hk.f;e>r;)for(var u=Gk(arguments[r++]),l=s?Vk(aa(u),s(u)):aa(u),c=l.length,f=0,v;c>f;)v=l[f++],(!ac||Fk(o,u,v))&&(t[v]=u[v]);return t}:wt,zk=X,Kk=dh,Yk=function(n,a,i,t){try{return t?a(zk(i)[0],i[1]):a(i)}catch(e){Kk(n,"throw",e)}},Xk=gt,qk=K,Jk=Ne,Zk=Yk,Qk=vh,ew=Fs,tw=Yt,oc=so,rw=ao,iw=qi,uc=Array,nw=function(a){var i=Jk(a),t=ew(this),e=arguments.length,r=e>1?arguments[1]:void 0,s=r!==void 0;s&&(r=Xk(r,e>2?arguments[2]:void 0));var o=iw(i),u=0,l,c,f,v,d,g;if(o&&!(this===uc&&Qk(o)))for(c=t?new this:[],v=rw(i,o),d=v.next;!(f=qk(d,v)).done;u++)g=s?Zk(v,r,[f.value,u],!0):f.value,oc(c,u,g);else for(l=tw(i),c=t?new this(l):uc(l);l>u;u++)g=s?r(i[u],u):i[u],oc(c,u,g);return c.length=u,c},yt=F,sa=2147483647,pr=36,iv=1,ts=26,aw=38,sw=700,ow=72,uw=128,lw="-",cw=/[^\0-\u007E]/,nv=/[.\u3002\uFF0E\uFF61]/g,lc="Overflow: input needs wider integers to process",oa=pr-iv,cc=RangeError,fw=yt(nv.exec),Ft=Math.floor,ua=String.fromCharCode,fc=yt("".charCodeAt),av=yt([].join),Ge=yt([].push),hw=yt("".replace),vw=yt("".split),dw=yt("".toLowerCase),gw=function(n){for(var a=[],i=0,t=n.length;i<t;){var e=fc(n,i++);if(e>=55296&&e<=56319&&i<t){var r=fc(n,i++);(r&64512)===56320?Ge(a,((e&1023)<<10)+(r&1023)+65536):(Ge(a,e),i--)}else Ge(a,e)}return a},hc=function(n){return n+22+75*(n<26)},pw=function(n,a,i){var t=0;for(n=i?Ft(n/sw):n>>1,n+=Ft(n/a);n>oa*ts>>1;)n=Ft(n/oa),t+=pr;return Ft(t+(oa+1)*n/(n+aw))},mw=function(n){var a=[];n=gw(n);var i=n.length,t=uw,e=0,r=ow,s,o;for(s=0;s<n.length;s++)o=n[s],o<128&&Ge(a,ua(o));var u=a.length,l=u;for(u&&Ge(a,lw);l<i;){var c=sa;for(s=0;s<n.length;s++)o=n[s],o>=t&&o<c&&(c=o);var f=l+1;if(c-t>Ft((sa-e)/f))throw new cc(lc);for(e+=(c-t)*f,t=c,s=0;s<n.length;s++){if(o=n[s],o<t&&++e>sa)throw new cc(lc);if(o===t){for(var v=e,d=pr;;){var g=d<=r?iv:d>=r+ts?ts:d-r;if(v<g)break;var m=v-g,p=pr-g;Ge(a,ua(hc(g+m%p))),v=Ft(m/p),d+=pr}Ge(a,ua(hc(v))),r=pw(e,f,l===u),e=0,l++}}e++,t++}return av(a,"")},yw=function(n){var a=[],i=vw(hw(dw(n),nv,"."),"."),t,e;for(t=0;t<i.length;t++)e=i[t],Ge(a,fw(cw,e)?"xn--"+mw(e):e);return av(a,".")},_w=Y,bw=F,Cw=Gs,Tw=RangeError,vc=String.fromCharCode,dc=String.fromCodePoint,Sw=bw([].join),Ew=!!dc&&dc.length!==1;_w({target:"String",stat:!0,arity:1,forced:Ew},{fromCodePoint:function(a){for(var i=[],t=arguments.length,e=0,r;t>e;){if(r=+arguments[e++],Cw(r,1114111)!==r)throw new Tw(r+" is not a valid code point");i[e]=r<65536?vc(r):vc(((r-=65536)>>10)+55296,r%1024+56320)}return Sw(i,"")}});var kw=ge,ww=function(n,a,i){for(var t in a)kw(n,t,a[t],i);return n},gc=Js,Iw=Math.floor,rs=function(n,a){var i=n.length;if(i<8)for(var t=1,e,r;t<i;){for(r=t,e=n[t];r&&a(n[r-1],e)>0;)n[r]=n[--r];r!==t++&&(n[r]=e)}else for(var s=Iw(i/2),o=rs(gc(n,0,s),a),u=rs(gc(n,s),a),l=o.length,c=u.length,f=0,v=0;f<l||v<c;)n[f+v]=f<l&&v<c?a(o[f],u[v])<=0?o[f++]:u[v++]:f<l?o[f++]:u[v++];return n},xw=rs,is=Y,sv=M,bo=Jf,Pw=Qe,ni=K,Ee=F,mr=z,ov=rv,uv=ge,Ow=$r,Rw=ww,Aw=qt,Lw=zh,Co=Me,lv=qs,la=j,Dw=te,$w=gt,Nw=Ar,Mw=X,cv=ee,Z=Ae,Fw=Fr,pc=Rr,mc=ao,Bw=qi,ai=yo,It=Zs,Uw=G,Hw=xw,jw=Uw("iterator"),Zt="URLSearchParams",fv=Zt+"Iterator",hv=Co.set,fe=Co.getterFor(Zt),Gw=Co.getterFor(fv),yc=bo("fetch"),Di=bo("Request"),yr=bo("Headers"),ca=Di&&Di.prototype,_c=yr&&yr.prototype,Vw=sv.TypeError,Ww=sv.encodeURIComponent,zw=String.fromCharCode,Kw=Pw("String","fromCodePoint"),Yw=parseInt,di=Ee("".charAt),bc=Ee([].join),Ve=Ee([].push),vv=Ee("".replace),Xw=Ee([].shift),Cc=Ee([].splice),Tc=Ee("".split),dv=Ee("".slice),qw=Ee(/./.exec),Jw=/\+/g,fa="�",Zw=/^[0-9a-f]+$/i,Sc=function(n,a){var i=dv(n,a,a+2);return qw(Zw,i)?Yw(i,16):NaN},Qw=function(n){for(var a=0,i=128;i>0&&n&i;i>>=1)a++;return a},eI=function(n){var a=null;switch(n.length){case 1:a=n[0];break;case 2:a=(n[0]&31)<<6|n[1]&63;break;case 3:a=(n[0]&15)<<12|(n[1]&63)<<6|n[2]&63;break;case 4:a=(n[0]&7)<<18|(n[1]&63)<<12|(n[2]&63)<<6|n[3]&63;break}return a>1114111?null:a},Ec=function(n){n=vv(n,Jw," ");for(var a=n.length,i="",t=0;t<a;){var e=di(n,t);if(e==="%"){if(di(n,t+1)==="%"||t+3>a){i+="%",t++;continue}var r=Sc(n,t+1);if(r!==r){i+=e,t++;continue}t+=2;var s=Qw(r);if(s===0)e=zw(r);else{if(s===1||s>4){i+=fa,t++;continue}for(var o=[r],u=1;u<s&&(t++,!(t+3>a||di(n,t)!=="%"));){var l=Sc(n,t+1);if(l!==l){t+=3;break}if(l>191||l<128)break;Ve(o,l),t+=2,u++}if(o.length!==s){i+=fa;continue}var c=eI(o);c===null?i+=fa:e=Kw(c)}}i+=e,t++}return i},tI=/[!'()~]|%20/g,rI={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},iI=function(n){return rI[n]},kc=function(n){return vv(Ww(n),tI,iI)},ha=Lw(function(a,i){hv(this,{type:fv,target:fe(a).entries,index:0,kind:i})},Zt,function(){var a=Gw(this),i=a.target,t=a.index++;if(!i||t>=i.length)return a.target=null,ai(void 0,!0);var e=i[t];switch(a.kind){case"keys":return ai(e.key,!1);case"values":return ai(e.value,!1)}return ai([e.key,e.value],!1)},!0),gv=function(n){this.entries=[],this.url=null,n!==void 0&&(cv(n)?this.parseObject(n):this.parseQuery(typeof n=="string"?di(n,0)==="?"?dv(n,1):n:Z(n)))};gv.prototype={type:Zt,bindURL:function(n){this.url=n,this.update()},parseObject:function(n){var a=this.entries,i=Bw(n),t,e,r,s,o,u,l;if(i)for(t=mc(n,i),e=t.next;!(r=ni(e,t)).done;){if(s=mc(Mw(r.value)),o=s.next,(u=ni(o,s)).done||(l=ni(o,s)).done||!ni(o,s).done)throw new Vw("Expected sequence with length 2");Ve(a,{key:Z(u.value),value:Z(l.value)})}else for(var c in n)Dw(n,c)&&Ve(a,{key:c,value:Z(n[c])})},parseQuery:function(n){if(n)for(var a=this.entries,i=Tc(n,"&"),t=0,e,r;t<i.length;)e=i[t++],e.length&&(r=Tc(e,"="),Ve(a,{key:Ec(Xw(r)),value:Ec(bc(r,"="))}))},serialize:function(){for(var n=this.entries,a=[],i=0,t;i<n.length;)t=n[i++],Ve(a,kc(t.key)+"="+kc(t.value));return bc(a,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var Qi=function(){lv(this,Gt);var a=arguments.length>0?arguments[0]:void 0,i=hv(this,new gv(a));mr||(this.size=i.entries.length)},Gt=Qi.prototype;Rw(Gt,{append:function(a,i){var t=fe(this);It(arguments.length,2),Ve(t.entries,{key:Z(a),value:Z(i)}),mr||this.length++,t.updateURL()},delete:function(n){for(var a=fe(this),i=It(arguments.length,1),t=a.entries,e=Z(n),r=i<2?void 0:arguments[1],s=r===void 0?r:Z(r),o=0;o<t.length;){var u=t[o];if(u.key===e&&(s===void 0||u.value===s)){if(Cc(t,o,1),s!==void 0)break}else o++}mr||(this.size=t.length),a.updateURL()},get:function(a){var i=fe(this).entries;It(arguments.length,1);for(var t=Z(a),e=0;e<i.length;e++)if(i[e].key===t)return i[e].value;return null},getAll:function(a){var i=fe(this).entries;It(arguments.length,1);for(var t=Z(a),e=[],r=0;r<i.length;r++)i[r].key===t&&Ve(e,i[r].value);return e},has:function(a){for(var i=fe(this).entries,t=It(arguments.length,1),e=Z(a),r=t<2?void 0:arguments[1],s=r===void 0?r:Z(r),o=0;o<i.length;){var u=i[o++];if(u.key===e&&(s===void 0||u.value===s))return!0}return!1},set:function(a,i){var t=fe(this);It(arguments.length,1);for(var e=t.entries,r=!1,s=Z(a),o=Z(i),u=0,l;u<e.length;u++)l=e[u],l.key===s&&(r?Cc(e,u--,1):(r=!0,l.value=o));r||Ve(e,{key:s,value:o}),mr||(this.size=e.length),t.updateURL()},sort:function(){var a=fe(this);Hw(a.entries,function(i,t){return i.key>t.key?1:-1}),a.updateURL()},forEach:function(a){for(var i=fe(this).entries,t=$w(a,arguments.length>1?arguments[1]:void 0),e=0,r;e<i.length;)r=i[e++],t(r.value,r.key,this)},keys:function(){return new ha(this,"keys")},values:function(){return new ha(this,"values")},entries:function(){return new ha(this,"entries")}},{enumerable:!0});uv(Gt,jw,Gt.entries,{name:"entries"});uv(Gt,"toString",function(){return fe(this).serialize()},{enumerable:!0});mr&&Ow(Gt,"size",{get:function(){return fe(this).entries.length},configurable:!0,enumerable:!0});Aw(Qi,Zt);is({global:!0,constructor:!0,forced:!ov},{URLSearchParams:Qi});if(!ov&&la(yr)){var nI=Ee(_c.has),aI=Ee(_c.set),wc=function(n){if(cv(n)){var a=n.body,i;if(Nw(a)===Zt)return i=n.headers?new yr(n.headers):new yr,nI(i,"content-type")||aI(i,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),Fw(n,{body:pc(0,Z(a)),headers:pc(0,i)})}return n};if(la(yc)&&is({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(a){return yc(a,arguments.length>1?wc(arguments[1]):{})}}),la(Di)){var va=function(a){return lv(this,ca),new Di(a,arguments.length>1?wc(arguments[1]):{})};ca.constructor=va,va.prototype=ca,is({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:va})}}var sI={URLSearchParams:Qi,getState:fe},oI=Y,To=z,uI=rv,So=M,Ic=gt,pe=F,$i=ge,ue=$r,lI=qs,ns=te,Eo=Wk,xt=nw,be=Js,cI=vo.codeAt,fI=yw,De=Ae,hI=qt,vI=Zs,pv=sI,mv=Me,dI=mv.set,Ni=mv.getterFor("URL"),gI=pv.URLSearchParams,pI=pv.getState,or=So.URL,as=So.TypeError,Mi=So.parseInt,mI=Math.floor,xc=Math.pow,he=pe("".charAt),Se=pe(/./.exec),hr=pe([].join),yI=pe(1 .toString),_I=pe([].pop),At=pe([].push),da=pe("".replace),bI=pe([].shift),CI=pe("".split),_r=pe("".slice),Fi=pe("".toLowerCase),TI=pe([].unshift),SI="Invalid authority",ga="Invalid scheme",at="Invalid host",Pc="Invalid port",yv=/[a-z]/i,EI=/[\d+-.a-z]/i,ss=/\d/,kI=/^0x/i,wI=/^[0-7]+$/,II=/^\d+$/,_v=/^[\da-f]+$/i,xI=/[\0\t\n\r #%/:<>?@[\\\]^|]/,PI=/[\0\t\n\r #/:<>?@[\\\]^|]/,OI=/^[\u0000-\u0020]+/,RI=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,AI=/[\t\n\r]/g,le,LI=function(n){var a=CI(n,"."),i,t,e,r,s,o,u;if(a.length&&a[a.length-1]===""&&a.length--,i=a.length,i>4)return n;for(t=[],e=0;e<i;e++){if(r=a[e],r==="")return n;if(s=10,r.length>1&&he(r,0)==="0"&&(s=Se(kI,r)?16:8,r=_r(r,s===8?1:2)),r==="")o=0;else{if(!Se(s===10?II:s===8?wI:_v,r))return n;o=Mi(r,s)}At(t,o)}for(e=0;e<i;e++)if(o=t[e],e===i-1){if(o>=xc(256,5-i))return null}else if(o>255)return null;for(u=_I(t),e=0;e<t.length;e++)u+=t[e]*xc(256,3-e);return u},DI=function(n){var a=[0,0,0,0,0,0,0,0],i=0,t=null,e=0,r,s,o,u,l,c,f,v=function(){return he(n,e)};if(v()===":"){if(he(n,1)!==":")return;e+=2,i++,t=i}for(;v();){if(i===8)return;if(v()===":"){if(t!==null)return;e++,i++,t=i;continue}for(r=s=0;s<4&&Se(_v,v());)r=r*16+Mi(v(),16),e++,s++;if(v()==="."){if(s===0||(e-=s,i>6))return;for(o=0;v();){if(u=null,o>0)if(v()==="."&&o<4)e++;else return;if(!Se(ss,v()))return;for(;Se(ss,v());){if(l=Mi(v(),10),u===null)u=l;else{if(u===0)return;u=u*10+l}if(u>255)return;e++}a[i]=a[i]*256+u,o++,(o===2||o===4)&&i++}if(o!==4)return;break}else if(v()===":"){if(e++,!v())return}else if(v())return;a[i++]=r}if(t!==null)for(c=i-t,i=7;i!==0&&c>0;)f=a[i],a[i--]=a[t+c-1],a[t+--c]=f;else if(i!==8)return;return a},$I=function(n){for(var a=null,i=1,t=null,e=0,r=0;r<8;r++)n[r]!==0?(e>i&&(a=t,i=e),t=null,e=0):(t===null&&(t=r),++e);return e>i?t:a},ur=function(n){var a,i,t,e;if(typeof n=="number"){for(a=[],i=0;i<4;i++)TI(a,n%256),n=mI(n/256);return hr(a,".")}if(typeof n=="object"){for(a="",t=$I(n),i=0;i<8;i++)e&&n[i]===0||(e&&(e=!1),t===i?(a+=i?":":"::",e=!0):(a+=yI(n[i],16),i<7&&(a+=":")));return"["+a+"]"}return n},gi={},bv=Eo({},gi,{" ":1,'"':1,"<":1,">":1,"`":1}),Cv=Eo({},bv,{"#":1,"?":1,"{":1,"}":1}),pa=Eo({},Cv,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),He=function(n,a){var i=cI(n,0);return i>32&&i<127&&!ns(a,n)?n:encodeURIComponent(n)},si={ftp:21,file:null,http:80,https:443,ws:80,wss:443},vr=function(n,a){var i;return n.length===2&&Se(yv,he(n,0))&&((i=he(n,1))===":"||!a&&i==="|")},Oc=function(n){var a;return n.length>1&&vr(_r(n,0,2))&&(n.length===2||(a=he(n,2))==="/"||a==="\\"||a==="?"||a==="#")},NI=function(n){return n==="."||Fi(n)==="%2e"},MI=function(n){return n=Fi(n),n===".."||n==="%2e."||n===".%2e"||n==="%2e%2e"},ma={},Rc={},ya={},Ac={},Lc={},_a={},Dc={},$c={},oi={},ui={},ba={},Ca={},Ta={},Sa={},Nc={},Ea={},Pt={},Oe={},Mc={},st={},Le={},ko=function(n,a,i){var t=De(n),e,r,s;if(a){if(r=this.parse(t),r)throw new as(r);this.searchParams=null}else{if(i!==void 0&&(e=new ko(i,!0)),r=this.parse(t,null,e),r)throw new as(r);s=pI(new gI),s.bindURL(this),this.searchParams=s}};ko.prototype={type:"URL",parse:function(n,a,i){var t=this,e=a||ma,r=0,s="",o=!1,u=!1,l=!1,c,f,v,d;for(n=De(n),a||(t.scheme="",t.username="",t.password="",t.host=null,t.port=null,t.path=[],t.query=null,t.fragment=null,t.cannotBeABaseURL=!1,n=da(n,OI,""),n=da(n,RI,"$1")),n=da(n,AI,""),c=xt(n);r<=c.length;){switch(f=c[r],e){case ma:if(f&&Se(yv,f))s+=Fi(f),e=Rc;else{if(a)return ga;e=ya;continue}break;case Rc:if(f&&(Se(EI,f)||f==="+"||f==="-"||f==="."))s+=Fi(f);else if(f===":"){if(a&&(t.isSpecial()!==ns(si,s)||s==="file"&&(t.includesCredentials()||t.port!==null)||t.scheme==="file"&&!t.host))return;if(t.scheme=s,a){t.isSpecial()&&si[t.scheme]===t.port&&(t.port=null);return}s="",t.scheme==="file"?e=Sa:t.isSpecial()&&i&&i.scheme===t.scheme?e=Ac:t.isSpecial()?e=$c:c[r+1]==="/"?(e=Lc,r++):(t.cannotBeABaseURL=!0,At(t.path,""),e=Mc)}else{if(a)return ga;s="",e=ya,r=0;continue}break;case ya:if(!i||i.cannotBeABaseURL&&f!=="#")return ga;if(i.cannotBeABaseURL&&f==="#"){t.scheme=i.scheme,t.path=be(i.path),t.query=i.query,t.fragment="",t.cannotBeABaseURL=!0,e=Le;break}e=i.scheme==="file"?Sa:_a;continue;case Ac:if(f==="/"&&c[r+1]==="/")e=oi,r++;else{e=_a;continue}break;case Lc:if(f==="/"){e=ui;break}else{e=Oe;continue}case _a:if(t.scheme=i.scheme,f===le)t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=be(i.path),t.query=i.query;else if(f==="/"||f==="\\"&&t.isSpecial())e=Dc;else if(f==="?")t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=be(i.path),t.query="",e=st;else if(f==="#")t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=be(i.path),t.query=i.query,t.fragment="",e=Le;else{t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=be(i.path),t.path.length--,e=Oe;continue}break;case Dc:if(t.isSpecial()&&(f==="/"||f==="\\"))e=oi;else if(f==="/")e=ui;else{t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,e=Oe;continue}break;case $c:if(e=oi,f!=="/"||he(s,r+1)!=="/")continue;r++;break;case oi:if(f!=="/"&&f!=="\\"){e=ui;continue}break;case ui:if(f==="@"){o&&(s="%40"+s),o=!0,v=xt(s);for(var g=0;g<v.length;g++){var m=v[g];if(m===":"&&!l){l=!0;continue}var p=He(m,pa);l?t.password+=p:t.username+=p}s=""}else if(f===le||f==="/"||f==="?"||f==="#"||f==="\\"&&t.isSpecial()){if(o&&s==="")return SI;r-=xt(s).length+1,s="",e=ba}else s+=f;break;case ba:case Ca:if(a&&t.scheme==="file"){e=Ea;continue}else if(f===":"&&!u){if(s==="")return at;if(d=t.parseHost(s),d)return d;if(s="",e=Ta,a===Ca)return}else if(f===le||f==="/"||f==="?"||f==="#"||f==="\\"&&t.isSpecial()){if(t.isSpecial()&&s==="")return at;if(a&&s===""&&(t.includesCredentials()||t.port!==null))return;if(d=t.parseHost(s),d)return d;if(s="",e=Pt,a)return;continue}else f==="["?u=!0:f==="]"&&(u=!1),s+=f;break;case Ta:if(Se(ss,f))s+=f;else if(f===le||f==="/"||f==="?"||f==="#"||f==="\\"&&t.isSpecial()||a){if(s!==""){var b=Mi(s,10);if(b>65535)return Pc;t.port=t.isSpecial()&&b===si[t.scheme]?null:b,s=""}if(a)return;e=Pt;continue}else return Pc;break;case Sa:if(t.scheme="file",f==="/"||f==="\\")e=Nc;else if(i&&i.scheme==="file")switch(f){case le:t.host=i.host,t.path=be(i.path),t.query=i.query;break;case"?":t.host=i.host,t.path=be(i.path),t.query="",e=st;break;case"#":t.host=i.host,t.path=be(i.path),t.query=i.query,t.fragment="",e=Le;break;default:Oc(hr(be(c,r),""))||(t.host=i.host,t.path=be(i.path),t.shortenPath()),e=Oe;continue}else{e=Oe;continue}break;case Nc:if(f==="/"||f==="\\"){e=Ea;break}i&&i.scheme==="file"&&!Oc(hr(be(c,r),""))&&(vr(i.path[0],!0)?At(t.path,i.path[0]):t.host=i.host),e=Oe;continue;case Ea:if(f===le||f==="/"||f==="\\"||f==="?"||f==="#"){if(!a&&vr(s))e=Oe;else if(s===""){if(t.host="",a)return;e=Pt}else{if(d=t.parseHost(s),d)return d;if(t.host==="localhost"&&(t.host=""),a)return;s="",e=Pt}continue}else s+=f;break;case Pt:if(t.isSpecial()){if(e=Oe,f!=="/"&&f!=="\\")continue}else if(!a&&f==="?")t.query="",e=st;else if(!a&&f==="#")t.fragment="",e=Le;else if(f!==le&&(e=Oe,f!=="/"))continue;break;case Oe:if(f===le||f==="/"||f==="\\"&&t.isSpecial()||!a&&(f==="?"||f==="#")){if(MI(s)?(t.shortenPath(),f!=="/"&&!(f==="\\"&&t.isSpecial())&&At(t.path,"")):NI(s)?f!=="/"&&!(f==="\\"&&t.isSpecial())&&At(t.path,""):(t.scheme==="file"&&!t.path.length&&vr(s)&&(t.host&&(t.host=""),s=he(s,0)+":"),At(t.path,s)),s="",t.scheme==="file"&&(f===le||f==="?"||f==="#"))for(;t.path.length>1&&t.path[0]==="";)bI(t.path);f==="?"?(t.query="",e=st):f==="#"&&(t.fragment="",e=Le)}else s+=He(f,Cv);break;case Mc:f==="?"?(t.query="",e=st):f==="#"?(t.fragment="",e=Le):f!==le&&(t.path[0]+=He(f,gi));break;case st:!a&&f==="#"?(t.fragment="",e=Le):f!==le&&(f==="'"&&t.isSpecial()?t.query+="%27":f==="#"?t.query+="%23":t.query+=He(f,gi));break;case Le:f!==le&&(t.fragment+=He(f,bv));break}r++}},parseHost:function(n){var a,i,t;if(he(n,0)==="["){if(he(n,n.length-1)!=="]"||(a=DI(_r(n,1,-1)),!a))return at;this.host=a}else if(this.isSpecial()){if(n=fI(n),Se(xI,n)||(a=LI(n),a===null))return at;this.host=a}else{if(Se(PI,n))return at;for(a="",i=xt(n),t=0;t<i.length;t++)a+=He(i[t],gi);this.host=a}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||this.scheme==="file"},includesCredentials:function(){return this.username!==""||this.password!==""},isSpecial:function(){return ns(si,this.scheme)},shortenPath:function(){var n=this.path,a=n.length;a&&(this.scheme!=="file"||a!==1||!vr(n[0],!0))&&n.length--},serialize:function(){var n=this,a=n.scheme,i=n.username,t=n.password,e=n.host,r=n.port,s=n.path,o=n.query,u=n.fragment,l=a+":";return e!==null?(l+="//",n.includesCredentials()&&(l+=i+(t?":"+t:"")+"@"),l+=ur(e),r!==null&&(l+=":"+r)):a==="file"&&(l+="//"),l+=n.cannotBeABaseURL?s[0]:s.length?"/"+hr(s,"/"):"",o!==null&&(l+="?"+o),u!==null&&(l+="#"+u),l},setHref:function(n){var a=this.parse(n);if(a)throw new as(a);this.searchParams.update()},getOrigin:function(){var n=this.scheme,a=this.port;if(n==="blob")try{return new Vt(n.path[0]).origin}catch{return"null"}return n==="file"||!this.isSpecial()?"null":n+"://"+ur(this.host)+(a!==null?":"+a:"")},getProtocol:function(){return this.scheme+":"},setProtocol:function(n){this.parse(De(n)+":",ma)},getUsername:function(){return this.username},setUsername:function(n){var a=xt(De(n));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var i=0;i<a.length;i++)this.username+=He(a[i],pa)}},getPassword:function(){return this.password},setPassword:function(n){var a=xt(De(n));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var i=0;i<a.length;i++)this.password+=He(a[i],pa)}},getHost:function(){var n=this.host,a=this.port;return n===null?"":a===null?ur(n):ur(n)+":"+a},setHost:function(n){this.cannotBeABaseURL||this.parse(n,ba)},getHostname:function(){var n=this.host;return n===null?"":ur(n)},setHostname:function(n){this.cannotBeABaseURL||this.parse(n,Ca)},getPort:function(){var n=this.port;return n===null?"":De(n)},setPort:function(n){this.cannotHaveUsernamePasswordPort()||(n=De(n),n===""?this.port=null:this.parse(n,Ta))},getPathname:function(){var n=this.path;return this.cannotBeABaseURL?n[0]:n.length?"/"+hr(n,"/"):""},setPathname:function(n){this.cannotBeABaseURL||(this.path=[],this.parse(n,Pt))},getSearch:function(){var n=this.query;return n?"?"+n:""},setSearch:function(n){n=De(n),n===""?this.query=null:(he(n,0)==="?"&&(n=_r(n,1)),this.query="",this.parse(n,st)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var n=this.fragment;return n?"#"+n:""},setHash:function(n){if(n=De(n),n===""){this.fragment=null;return}he(n,0)==="#"&&(n=_r(n,1)),this.fragment="",this.parse(n,Le)},update:function(){this.query=this.searchParams.serialize()||null}};var Vt=function(a){var i=lI(this,J),t=vI(arguments.length,1)>1?arguments[1]:void 0,e=dI(i,new ko(a,!1,t));To||(i.href=e.serialize(),i.origin=e.getOrigin(),i.protocol=e.getProtocol(),i.username=e.getUsername(),i.password=e.getPassword(),i.host=e.getHost(),i.hostname=e.getHostname(),i.port=e.getPort(),i.pathname=e.getPathname(),i.search=e.getSearch(),i.searchParams=e.getSearchParams(),i.hash=e.getHash())},J=Vt.prototype,ce=function(n,a){return{get:function(){return Ni(this)[n]()},set:a&&function(i){return Ni(this)[a](i)},configurable:!0,enumerable:!0}};To&&(ue(J,"href",ce("serialize","setHref")),ue(J,"origin",ce("getOrigin")),ue(J,"protocol",ce("getProtocol","setProtocol")),ue(J,"username",ce("getUsername","setUsername")),ue(J,"password",ce("getPassword","setPassword")),ue(J,"host",ce("getHost","setHost")),ue(J,"hostname",ce("getHostname","setHostname")),ue(J,"port",ce("getPort","setPort")),ue(J,"pathname",ce("getPathname","setPathname")),ue(J,"search",ce("getSearch","setSearch")),ue(J,"searchParams",ce("getSearchParams")),ue(J,"hash",ce("getHash","setHash")));$i(J,"toJSON",function(){return Ni(this).serialize()},{enumerable:!0});$i(J,"toString",function(){return Ni(this).serialize()},{enumerable:!0});if(or){var Fc=or.createObjectURL,Bc=or.revokeObjectURL;Fc&&$i(Vt,"createObjectURL",Ic(Fc,or)),Bc&&$i(Vt,"revokeObjectURL",Ic(Bc,or))}hI(Vt,"URL");oI({global:!0,constructor:!0,forced:!uI,sham:!To},{URL:Vt});var FI=function(){function n(a,i){we(this,n),this.url=a;var t=new window.XMLHttpRequest;t.target=this,t.responseType="arraybuffer",t.open("get",a),t.onload=function(){(t.status===200||t.status===206)&&i&&i instanceof Function&&i(t.response)},t.onerror=function(e){},this.xhr=t,this.run()}return Ie(n,[{key:"cancel",value:function(){this.xhr.abort()}},{key:"run",value:function(){this.xhr.readyState===1&&this.xhr.send()}}]),n}(),ie={ORDER:"order",SLOOP:"sloop",LOOP:"loop",RANDOM:"random"},Uc="xgplayer-music";function pi(n,a,i){var t=Math.floor(Math.random()*(a-n)+n);return t===i?(t>a/2?a=a/2:n=a/2,a-n>2?pi(n,a,i):t):t}var BI=function(n){pt(i,n);var a=mt(i);function i(){var t;we(this,i);for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return t=a.call.apply(a,[this].concat(r)),Ke(se(t),"_onEnded",function(){if(t.mode==="order"&&t.index+1>=t.list.length){t.player.pause(),t.player.currentTime=0;return}switch(t.mode){case ie.SLOOP:t.change();break;case ie.ORDER:case ie.LOOP:default:t.next();break}}),Ke(se(t),"_onDurationChange",function(){var o=t.config.abCycle;t._initABCycle(o,t.player)}),Ke(se(t),"_onTimeUpdate",function(){var o=se(t),u=o.config,l=o.player;if(!t.halfPass&&l.currentTime>l.duration/2&&t.confirmOrder(),u.abCycle){var c=u.abCycle,f=c.end>l.duration?l.duration:c.end;l.currentTime>=f?(c.loop||(l.pause(),t.emit("abCycle_ended")),l.currentTime=c.start||0):l.currentTime<c.start&&(l.currentTime=c.start||0)}}),t}return Ie(i,[{key:"afterCreate",value:function(){var e=this.player,r=this.playerConfig;h.addClass(e.root,Uc),this.halfPass=!1,this.list=this.config.list||[],this.nextIndex=-1,this.prevIndex=-1,this.history=[],this.disable=!(this.list.length>0),this.list.length!==0&&(!r.url&&this.list.length>0&&(r.url=this.list[0].src),r.poster||(r.poster=this.list[0].poster),r.title||(r.title=this.list[0].title||""),r.vid||(r.vid=this.list[0].vid||""),this._curInfo={src:r.url,poster:r.poster,title:r.title,vid:r.vid},this.index=0,this.on(ve,this._onTimeUpdate),this.on(qe,this._onEnded),this.on(Je,this._onDurationChange),this.config.offline&&this.checkOffline(this._curInfo.src,this._curInfo.vid).then(function(s){s.code===0&&(r.url=s.url,e.state>=4&&(e.src=s.url))}).catch(function(s){}))}},{key:"destroy",value:function(){h.removeClass(this.player.root,Uc)}},{key:"_nextCompute",value:function(){if(!this.disable)switch(this.mode){case ie.SLOOP:case ie.ORDER:case ie.LOOP:this.index+1<this.list.length?this.nextIndex=this.index+1:this.nextIndex=0;break;default:this.nextIndex=pi(0,this.list.length,this.index);break}}},{key:"_prevCompute",value:function(){if(!this.disable)switch(this.mode){case ie.SLOOP:case ie.ORDER:case ie.LOOP:this.index-1>=0?this.prevIndex=this.index-1:this.prevIndex=this.list.length-1;break;default:this.prevIndex=pi(0,this.list.length,this.index);break}}},{key:"_emitChange",value:function(){this.emit("change",this._curInfo)}},{key:"_initABCycle",value:function(e,r){var s=r.plugins.progresspreview;if(e&&r){var o=e.end>this.player.duration?this.player.duration:e.end,u=e.start>this.player.duration?0:e.start,l={id:r.playerId,time:e.start,duration:o-u,text:e.text,color:e.color};s.findDot(l.id)?s.updateDot(l):s.createDot(l)}else s.findDot(r.playerId)&&s.deleteDot(r.playerId)}},{key:"random",value:function(){if(this.list.length<0)return null;var e=pi(0,this.list.length,this.index);return this.list[e]}},{key:"next",value:function(){this.disable||(this.halfPass||(this.halfPass=!0,this._nextCompute()),this.index=this.nextIndex,this.change())}},{key:"prev",value:function(){this.disable||(this.halfPass||(this.halfPass=!0,this._prevCompute()),this.index=this.prevIndex,this.change())}},{key:"forward",value:function(){var e=this.player,r=this.config.timeScale;e.currentTime=e.currentTime+r<e.duration?e.currentTime+r:e.duration-.1}},{key:"backward",value:function(){var e=this.player,r=this.config.timeScale;e.currentTime=e.currentTime-r>0?e.currentTime-r:0}},{key:"add",value:function(e){this.list.push({src:e.src,title:e.title,vid:e.vid,poster:e.poster})}},{key:"remove",value:function(e){var r=-1;this.list.every(function(s,o){return s.vid===e?(r=o,!1):!0}),r>-1&&this.list.splice(r,1)}},{key:"setAbCycle",value:function(e,r,s){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};e&&h.typeof(e)==="Object"?this.config.abCycle=Ai({},e):this.config.abCycle=Ai({start:e||0,end:r||this.player.duration,loop:s},o),this._initABCycle(this.config.abCycle,this.player)}},{key:"removeAbCycle",value:function(){this.config.abCycle=null,this._initABCycle(null,this.player)}},{key:"updateList",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.removeAbCycle(),this.player.pause(),this.player.currentTime=0,this.list=e,this.nextIndex=0,this.index=0,this.change()}},{key:"setIndex",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;e<0||e>=this.list.length||(this.nextIndex=e,this.index=e,this.change())}},{key:"change",value:function(){var e=this;if(!this.disable){var r=this.player,s=this.list,o=this.index,u=s[o].vid;this.halfPass=!1,this.checkOffline(s[o].src,u).then(function(l){e._curInfo={title:e.list[e.index].title||"",vid:e.list[e.index].vid,poster:e.list[e.index].poster||"",src:l.url},r.playNext({url:l.url,vid:e.list[e.index].vid||0,poster:e.list[e.index].poster||"",autoplay:!0}),r.off("timeupdate",e._emitChange),r.once("timeupdate",e._emitChange),r.play()})}}},{key:"checkOffline",value:function(e,r){var s=this;return new Promise(function(o,u){(!s.config.offline||s.disable)&&o({url:e,code:-1,vid:r});var l=s.player.database;l.openDB(function(){l.getDataByKey(l.myDB.ojstore.name,r,function(c){setTimeout(function(){l.closeDB()},5e3),o(c?{url:URL.createObjectURL(c.blob),code:0,vid:c.vid}:{url:e,code:-2,vid:r})})})})}},{key:"confirmOrder",value:function(){this.halfPass=!0,this._nextCompute(),this._prevCompute(),this.config.preloadNext&&this.preload(this.nextIndex)}},{key:"preload",value:function(e){if(!(e<0||e>=this.list.length)){var r=this.list[e],s=this.player;this.checkOffline(r.src,r.vid).then(function(o){if(o.code===-2){var u=r.vid;new FI(r.src,function(l){s.database.openDB(function(){s.database.addData(s.database.myDB.ojstore.name,[{vid:u,blob:new Blob([l],{type:'audio/mp4; codecs="mp4a.40.5"'})}]),setTimeout(function(){s.database.closeDB()},5e3)})})}})}}},{key:"timeScale",get:function(){return this.config.timeScale||15},set:function(e){this.config.timeScale=e}},{key:"mode",get:function(){return this.config.mode||ie.RANDOM},set:function(e){this.config.mode=e}}],[{key:"pluginName",get:function(){return"music"}},{key:"defaultConfig",get:function(){return{offline:!1,preloadNext:!0,abCycle:null,timeScale:15,mode:ie.ORDER,list:[]}}},{key:"ModeType",get:function(){return Object.keys(ie).map(function(e){return ie[e]})}}]),i}(Ye),UI=Y,HI=zi.find,jI=Eh,os="find",Tv=!0;os in[]&&Array(1)[os](function(){Tv=!1});UI({target:"Array",proto:!0,forced:Tv},{find:function(a){return HI(this,a,arguments.length>1?arguments[1]:void 0)}});jI(os);var GI=function(n){pt(i,n);var a=mt(i);function i(){return we(this,i),a.apply(this,arguments)}return Ie(i,[{key:"afterCreate",value:function(){var e=this;if(this.on("change",function(s){if(s&&s.poster){if(e.find("img"))e.find("img").src=s.poster;else{var o=new Image;o.src=s.poster,e.appendChild(o)}e.find("img").src=s.poster,e.show()}else e.hide()}),this.playerConfig.poster){var r=new Image;r.src=this.playerConfig.poster,this.appendChild(r)}}},{key:"render",value:function(){return'<xg-icon class="xgplayer-cover"></xg-icon>'}}],[{key:"pluginName",get:function(){return"musiccover"}},{key:"defaultConfig",get:function(){return{index:6,position:O.POSITIONS.CONTROLS_LEFT}}}]),i}(O),VI=function(n){pt(i,n);var a=mt(i);function i(){var t;we(this,i);for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return t=a.call.apply(a,[this].concat(r)),Ke(se(t),"onClick",function(o){var u=se(t),l=u.player;o.preventDefault(),o.stopPropagation(),l.plugins.music.backward()}),t}return Ie(i,[{key:"afterCreate",value:function(){var e=this;this.initIcons();var r=["click","touchstart"];r.forEach(function(s){e.bind(s,e.onClick)})}},{key:"registerIcons",value:function(){return{musicBackward:{icon:`<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="-2 0 21 15">
      <path d="m 14,2.99996 0,10 -7,-5 7,-5 z m -7,5 0,5 -7,-5 7,-5 0,5 z m -7,0 0,0 z"></path>
  </svg>`,class:"xg-icon-mbackward"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.musicBackward)}},{key:"destroy",value:function(){var e=this,r=["click","touchstart"];r.forEach(function(s){e.unbind(s,e.onClick)})}},{key:"render",value:function(){return`<xg-icon class="xgplayer-backward">
            <div class="xgplayer-icon">
            </div>
          </xg-icon>`}}],[{key:"pluginName",get:function(){return"musicbackword"}},{key:"defaultConfig",get:function(){return{index:1,position:O.POSITIONS.CONTROLS_LEFT}}}]),i}(O),WI=function(n){pt(i,n);var a=mt(i);function i(){var t;we(this,i);for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return t=a.call.apply(a,[this].concat(r)),Ke(se(t),"onClick",function(o){var u=se(t),l=u.player;o.preventDefault(),o.stopPropagation(),l.plugins.music.prev()}),t}return Ie(i,[{key:"afterCreate",value:function(){var e=this;this.initIcons();var r=["click","touchstart"];r.forEach(function(s){e.bind(s,e.onClick)})}},{key:"registerIcons",value:function(){return{musicPrev:{icon:` <svg xmlns="http://www.w3.org/2000/svg" width="40" height="32" viewBox="300 200 1024 1024">
        <path d="M600 1140v-768h128v352l320-320v704l-320-320v352zz"></path>
    </svg>`,class:"xg-icon-mprev"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.musicPrev)}},{key:"destroy",value:function(){var e=this,r=["click","touchstart"];r.forEach(function(s){e.unbind(s,e.onClick)})}},{key:"render",value:function(){return`<xg-icon class="xgplayer-next">
            <div class="xgplayer-icon">
            </div>
          </xg-icon>`}}],[{key:"pluginName",get:function(){return"musicprev"}},{key:"defaultConfig",get:function(){return{index:2,position:O.POSITIONS.CONTROLS_LEFT}}}]),i}(O),zI=function(n){pt(i,n);var a=mt(i);function i(){var t;we(this,i);for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return t=a.call.apply(a,[this].concat(r)),Ke(se(t),"onClick",function(o){var u=se(t),l=u.player;o.preventDefault(),o.stopPropagation(),l.plugins.music.forward()}),t}return Ie(i,[{key:"afterCreate",value:function(){var e=this;this.initIcons();var r=["click","touchstart"];r.forEach(function(s){e.bind(s,e.onClick)})}},{key:"registerIcons",value:function(){return{musicForward:{icon:`<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="-2 0 21 15">
        <path d="m 2,2.99996 0,10 7,-5 -7,-5 z m 7,5 0,5 7,-5 -7,-5 0,5 z m 7,0 0,0 z"></path>
      </svg>`,class:"xg-icon-mforward"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.musicForward)}},{key:"destroy",value:function(){var e=this,r=["click","touchstart"];r.forEach(function(s){e.unbind(s,e.onClick)})}},{key:"render",value:function(){return`<xg-icon class="xgplayer-forward">
            <div class="xgplayer-icon">
            </div>
          </xg-icon>`}}],[{key:"pluginName",get:function(){return"musicforward"}},{key:"defaultConfig",get:function(){return{index:5,position:O.POSITIONS.CONTROLS_LEFT}}}]),i}(O),KI=function(n){pt(i,n);var a=mt(i);function i(){var t;we(this,i);for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return t=a.call.apply(a,[this].concat(r)),Ke(se(t),"onClick",function(o){var u=se(t),l=u.player;o.preventDefault(),o.stopPropagation(),l.plugins.music.next()}),t}return Ie(i,[{key:"afterCreate",value:function(){var e=this;this.initIcons();var r=["click","touchstart"];r.forEach(function(s){e.bind(s,e.onClick)})}},{key:"registerIcons",value:function(){return{musicNext:{icon:` <svg xmlns="http://www.w3.org/2000/svg" width="40" height="32" viewBox="100 200 1024 1024">
        <path d="M800 380v768h-128v-352l-320 320v-704l320 320v-352z">
      </svg>`,class:"xg-icon-mnext"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.musicNext)}},{key:"destroy",value:function(){var e=this,r=["click","touchstart"];r.forEach(function(s){e.unbind(s,e.onClick)})}},{key:"render",value:function(){return`<xg-icon class="xgplayer-next">
            <div class="xgplayer-icon">
            </div>
          </xg-icon>`}}],[{key:"pluginName",get:function(){return"musicnext"}},{key:"defaultConfig",get:function(){return{index:4,position:O.POSITIONS.CONTROLS_LEFT}}}]),i}(O),YI=function(n){pt(i,n);var a=mt(i);function i(){return we(this,i),a.apply(this,arguments)}return Ie(i,[{key:"beforeCreate",value:function(e){var r=e.player.plugins.progress;r&&(e.root=r.root)}},{key:"afterCreate",value:function(){var e=this;this.on("change",function(r){r&&r.title?e.root.innerHTML="".concat(r.title):e.root.innerHTML=""})}},{key:"render",value:function(){var e=this.playerConfig;return`<xg-title class="xgplayer-name">
          `.concat(e.title||"",`
       </xg-title>`)}}],[{key:"pluginName",get:function(){return"musicmeta"}},{key:"defaultConfig",get:function(){return{index:0}}}]),i}(O);function XI(n){if(h.typeOf(n.controls)!=="Object")n.controls={mode:"flex",initShow:!0};else{var a=n.controls;n.controls=Ai({mode:"flex",initShow:!0},a)}var i=n.play||{};n.play=Ai({index:3},i),n.marginControls=!0,n.mediaType="audio"}var qI=Ie(function n(a,i){we(this,n),console.log("config",a,i),console.log("playerConfig",h.typeOf(i.controls)!=="Object"),XI(i),this.plugins=[BI,VI,WI,zI,KI,GI,YI],this.ignores=["start","cssFullScreen","fullscreen","pip","enter","replay","pc","loading","poster"]}),JI=Y,ZI=zi.filter,QI=Ki,ex=QI("filter");JI({target:"Array",proto:!0,forced:!ex},{filter:function(a){return ZI(this,a,arguments.length>1?arguments[1]:void 0)}});var tx=Ie(function n(a){we(this,n),this.regRule=/(\d{2}(?=:)):(\d{2}(?=\.))\.(\d{2,3})/g,this.regRule.test(a)?this.time=RegExp.$1*60+RegExp.$2*1+("0."+RegExp.$3)*1:this.time=-1}),rx=function(){function n(a,i){var t=this;we(this,n),this.rawTxts=a,this.txts=a.map(function(e){return e.replace(/^[\r\n]|[\r\n]$/g,"").match(/(\[.*\])[^[]+/g)}),this.isDynamics=a.map(function(e,r){return[].concat(e.match(/\[\d{2}:\d{2}\.\d{2,3}\]/g)).length===t.txts[r].length&&t.txts[r].length===t.txts[0].length&&t.txts[r].length>1}),this.isDynamic=this.isDynamics.some(function(e){return e}),this.__ainimateInterval__=0,this.__offset__=0,this.__offsetScale__=.5,this.dom=i,this.lists=[],this.isDynamics.map(function(e,r){e&&t.lists.push(t.txts[r].map(function(s,o){var u=/(\[[\d:\S]+\])([^[]+)/g.test(s),l=RegExp.$1,c=RegExp.$2;return{time:u?new tx(l).time:-1,lyric:c,idx:o}}))}),this.list=this.lists.reduce(function(e,r){return e.map(function(s,o){return{time:s.time,lyric:s.lyric===`
`?"".concat(s.lyric).concat(r[o].lyric):"".concat(s.lyric,"<br/>").concat(r[o].lyric),idx:o}})}),this.line=0}return Ie(n,[{key:"interval",get:function(){return this.__ainimateInterval__},set:function(i){this.__ainimateInterval__=i}},{key:"offset",get:function(){return this.__offset__},set:function(i){this.__offset__=i}},{key:"offsetScale",get:function(){return this.__offsetScale__},set:function(i){this.__offsetScale__=i}},{key:"adjust",value:function(){for(var i=this.list,t=0,e,r,s=i.length;t<s;t++){for(e=t+1;e<s&&!(i[e].time>i[t].time);e++);if(e<s){var o=(i[e].time-i[t].time)/(e-t);for(r=t+1;r<e;r++)i[r].time=i[r-1].time+o}}}},{key:"find",value:function(i){var t=this.list,e=this.__ainimateInterval__,r=this.__offset__;return i=i+r>0?i+r:0,t.filter(function(s,o){var u=s.time,l=o+1;return i>=u&&(t[l]&&i*1+e*1<=t[l].time||l>=t.length)})}},{key:"bind",value:function(i){var t=this,e=this;return this.__player__=i,e.isDynamic?(e.__handle__=(function(){var r=t.find(i.currentTime)[0];r&&r.idx!==t.line&&(t.line=r.idx,i.emit("lyricUpdate",r))}).bind(e,i),i.on("timeupdate",e.__handle__),e.__startHandle__=(function(){i.emit("lyricUpdate",e.list[0])}).bind(e,i),i.once("playing",e.__startHandle__),!0):!1}},{key:"unbind",value:function(i){delete this.__player__,this.__handle__&&(i.off("lyricUpdate",this.__handle__),delete this.__handle__)}},{key:"show",value:function(){var i=this,t=this.dom,e=[],r=this,s=["click","touchstart"];if(t&&t.nodeType===1){var o=h.createDom("div","<div></div>",{},"xgplayer-lrcWrap");t.appendChild(o),this.list.forEach(function(c){e.push('<xg-lyric-item class="xgplayer-lyric-item" data-idx="'.concat(c.idx,'">').concat(c.lyric.replace(/[\r\n]/g,""),"</xg-lyric-item>"))}),o.innerHTML=e.join("");var u=h.createDom("xg-lrcForward","<div></div>",{},"xgplayer-lrcForward");t.appendChild(u),s.forEach(function(c){u.addEventListener(c,function(f){f.preventDefault(),f.stopPropagation(),r.offset-=r.offsetScale,console.log("lyric go forward ".concat(r.offsetScale,"s"))},!1)});var l=h.createDom("xg-lrcBack","<div></div>",{},"xgplayer-lrcBack");t.appendChild(l),s.forEach(function(c){l.addEventListener(c,function(f){f.preventDefault(),f.stopPropagation(),r.offset+=r.offsetScale,console.log("lyric go back ".concat(r.offsetScale,"s"))},!1)}),this.__updateHandle__=function(c){var f=i.dom.querySelector(".xgplayer-lrcWrap"),v=f.querySelector(".xgplayer-lyric-item-active"),d=f.offsetHeight,g;v&&(v.className="xgplayer-lyric-item"),v=f.querySelector('.xgplayer-lyric-item[data-idx="'.concat(c.idx,'"]')),v&&(v.className="xgplayer-lyric-item xgplayer-lyric-item-active",g=v.getBoundingClientRect().top-f.getBoundingClientRect().top+f.scrollTop-d/2,g&&(f.scrollTop=g))},this.__player__.on("lyricUpdate",this.__updateHandle__)}else this.__player__.emit("error","lyric container can not be empty")}},{key:"hide",value:function(){this.__updateHandle__.off("lyricUpdate",this.__updateHandle__)}}]),n}();const ix="/assets/music-bg-DnHHlmmQ.png",nx={id:"mse",ref:"player"},Hc=10,ax=Iv({__name:"audio-viewer",setup(n){const{file:a,data:i}=Sv(wv()),t=wo("player"),e=wo("lyric");let r;return xv([a,t,i],async()=>{if(!i.value||!a.value||!t.value||!e.value)return;const s=URL.createObjectURL(i.value);if(r=new Re({el:t.value,url:s,controls:{mode:"flex",initShow:!0},marginControls:!0,mediaType:"audio",preset:[qI],width:"100%",height:"60px"}),a.value.lyricPath.length){const o=await Ev(a.value.lyricPath),u=new rx([o],e.value);u.bind(r),u.show();const l=o.split(`
`);r.on("seeked",f=>{var g,m;let v=null;for(let p=0;p<l.length;p++){const b=l[p],T=+b.slice(1,3),S=+b.slice(4,6),$=+b.slice(7,9),L=T*60+S*1+$*.1;if(v?Math.abs(L-f.currentTime)<Math.abs(v.seekTime-f.currentTime)&&(v={seekTime:L,i:p}):v={seekTime:L,i:p},L>f.currentTime)break}const d=(v.i+1)/c;(m=e.value)==null||m.scrollTo({top:d*((g=e.value)==null?void 0:g.scrollHeight)-180,behavior:"smooth"})});const c=o.split(`
`).length+Hc;r.on("lyricUpdate",f=>{var d,g;const v=(f.idx+1)/c;(g=e.value)==null||g.scrollTo({top:v*((d=e.value)==null?void 0:d.scrollHeight)-180,behavior:"smooth"})})}}),Pv(()=>{r==null||r.destroy()}),(s,o)=>{var u;return en(),tn("div",{class:"w-full h-full overflow-hidden relative",style:Av({backgroundImage:`url(${Io(ix)})`,backgroundSize:"cover"})},[(en(),tn("div",{ref:"lyric",key:(u=Io(a))==null?void 0:u.lyricPath,id:"gc",class:"flex flex-col items-center w-full h-full overflow-auto"},[(en(),tn(Ov,null,Rv(Hc,l=>rn("div",{class:"order-1 text-[white]",key:l},o[0]||(o[0]=[rn("br",null,null,-1)]))),64))])),rn("div",nx,null,512)],4)}}}),mx=kv(ax,[["__scopeId","data-v-59a197da"]]);export{mx as default};
